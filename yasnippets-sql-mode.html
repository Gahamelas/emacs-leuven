<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>SQL YASnippets</title>
<!-- 2017-08-12 Sat 10:38 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Fabrice Niessen" />
<meta  name="keywords" content="emacs, yasnippet, snippets, code templates" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">SQL YASnippets</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Overview</a></li>
<li><a href="#sec-2">Insert Snippet&#x2026;</a>
<ul>
<li><a href="#sec-2-1">Cursor</a></li>
<li><a href="#sec-2-2">Database</a></li>
<li><a href="#sec-2-3">Fragment</a></li>
<li><a href="#sec-2-4">Function</a></li>
<li><a href="#sec-2-5">Index</a></li>
<li><a href="#sec-2-6">Join fragment</a></li>
<li><a href="#sec-2-7">Login</a></li>
<li><a href="#sec-2-8">Role</a></li>
<li><a href="#sec-2-9">Schema</a></li>
<li><a href="#sec-2-10">Set options</a></li>
<li><a href="#sec-2-11">Stored Procedure</a></li>
<li><a href="#sec-2-12">Synonym</a></li>
<li><a href="#sec-2-13">Table</a></li>
<li><a href="#sec-2-14">Transaction</a></li>
<li><a href="#sec-2-15">Trigger</a></li>
<li><a href="#sec-2-16">User</a></li>
<li><a href="#sec-2-17">User Defined Data Type</a></li>
<li><a href="#sec-2-18">User Defined Table Type</a></li>
<li><a href="#sec-2-19">User Defined Type</a></li>
<li><a href="#sec-2-20">View</a></li>
<li><a href="#sec-2-21">&#x2014; Miscellaneous ---</a></li>
</ul>
</li>
<li><a href="#sec-3">Surround With&#x2026;</a>
<ul>
<li><a href="#sec-3-1">[begin] Code Snippet for BEGIN&#x2026;END block</a></li>
<li><a href="#sec-3-2">[if] Code Snippet for IF construct</a></li>
<li><a href="#sec-3-3">[while] Code Snippet for WHILE loop</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Overview</h2>
<div class="outline-text-2" id="text-1">
<p>
A <b>SQL snippet</b> is a frequently used <b>code template</b> which can be inserted into
a code you are typing by pressing the TAB key.
</p>

<p>
Snippets are categorized into 2 types:
</p>

<ul class="org-ul">
<li><b>Insert Snippets (or Expansion Snippets)</b>: These are code templates for various
SQL commands you can quickly insert into your SQL code when creating tables,
stored procedures, triggers and so on.
</li>

<li><b>Surround Snippets:</b> These are code templates that help you implement code
constructs such as <code>BEGIN...END</code>, <code>IF</code>, <code>WHILE</code> and so on.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Insert Snippet&#x2026;</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">Cursor</h3>
<div class="outline-text-3" id="text-2-1">
</div><div id="outline-container-sec-2-1-1" class="outline-4">
<h4 id="sec-2-1-1">[curff] Cursor Fast-Forward</h4>
<div class="outline-text-4" id="text-2-1-1">
<div class="org-src-container">

<pre class="src src-sql"># name: Fast-forward read-on...
# --
/* declare variables */
DECLARE @variable INT

DECLARE ${1:cursor_name} CURSOR
FAST_FORWARD READ_ONLY
FOR ${2:select_statement}

OPEN $1

FETCH NEXT FROM $1
INTO @variable

WHILE @@FETCH_STATUS = 0
BEGIN
    $0

    FETCH NEXT FROM $1
    INTO @variable
END

CLOSE $1
DEALLOCATE $1
GO
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">Database</h3>
<div class="outline-text-3" id="text-2-2">
</div><div id="outline-container-sec-2-2-1" class="outline-4">
<h4 id="sec-2-2-1">[cdb] Create DataBase</h4>
<div class="outline-text-4" id="text-2-2-1">
<p>
Create database.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Create database
# --
USE master
GO

-- Drop the database if it already exists
IF EXISTS (SELECT name
	FROM sys.databases
	WHERE name = N'${1:database_name}')
    DROP DATABASE $1
GO

CREATE DATABASE $1
ON
PRIMARY ( -- or use FILEGROUP filegroup_name
  NAME = $1_data,
  FILENAME = '$1.mdf'
) --, and repeat as required
LOG ON
(
  NAME = $1_log,
  FILENAME = '$1.ldf'
) --, and repeat as required
--COLLATE collation_name
--WITH
--  DB_CHAINING ON/OFF
--  TRUSTWORTHY ON/OFF
--FOR LOAD
--FOR ATTACH
--WITH
--  ENABLE_BROKER
--  NEW_BROKER
--  ERROR_BROKER_CONVERSATIONS
--FOR ATTACH_REBUILD_LOG
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-2-2" class="outline-4">
<h4 id="sec-2-2-2">[cdbsnap] Create DataBase Snapshot</h4>
<div class="outline-text-4" id="text-2-2-2">
<p>
Create snapshot.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Create database sna...
# --
USE master
GO

-- Drop snapshot database if it already exists
IF EXISTS (SELECT name
	FROM sys.databases
	WHERE name = N'${1:source_database}_${2:snapshot_id}')
    DROP DATABASE $1_$2
GO

-- Create the snapshot database
CREATE DATABASE $1_$2 ON
( NAME = $1_$2_data,
  FILENAME = '$1_$2.ss')
AS SNAPSHOT OF $1;
GO$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-2-3" class="outline-4">
<h4 id="sec-2-2-3">[dd] Drop Database</h4>
<div class="outline-text-4" id="text-2-2-3">
<div class="org-src-container">

<pre class="src src-sql"># name: Drop database
# --
USE master
GO

-- Drop the database if it already exists
IF EXISTS (SELECT name
	FROM sys.databases
	WHERE name = N'${1:database_name}')
    DROP DATABASE $1
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-2-4" class="outline-4">
<h4 id="sec-2-2-4">Database Backup</h4>
<div class="outline-text-4" id="text-2-2-4">
<p>
Backup database.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Backup database
# --
BACKUP DATABASE ${1:database_name}
    TO DISK = N'Backup_Path/$1.bak'
WITH
    NOFORMAT,
    NOINIT,
    NAME = N'$1-Full Database Backup',
    SKIP,
    STATS = 10;
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-2-5" class="outline-4">
<h4 id="sec-2-2-5">Database Restore</h4>
<div class="outline-text-4" id="text-2-2-5">
<p>
Restore database.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Restore database
# --
USE master
GO

RESTORE DATABASE ${1:database_name}
    FROM DISK = N'Backup_Path/$1.bak'
WITH
    FILE = 1,
    NOUNLOAD,
    REPLACE,
    STATS = 10
GO
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3">Fragment</h3>
<div class="outline-text-3" id="text-2-3">
</div><div id="outline-container-sec-2-3-1" class="outline-4">
<h4 id="sec-2-3-1">[ii] Insert Into</h4>
<div class="outline-text-4" id="text-2-3-1">
<div class="org-src-container">

<pre class="src src-sql"># name: INSERT INTO fragment
# --
INSERT INTO $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-2" class="outline-4">
<h4 id="sec-2-3-2">[ssf] Select Star From</h4>
<div class="outline-text-4" id="text-2-3-2">
<div class="org-src-container">

<pre class="src src-sql"># name: SELECT * FROM frag...
# --
SELECT * FROM $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-3" class="outline-4">
<h4 id="sec-2-3-3">[st100] Select Top 100</h4>
<div class="outline-text-4" id="text-2-3-3">
<p>
Select top 100 rows.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: SELECT top 100 rows
# --
SELECT TOP 100 *
FROM $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-4" class="outline-4">
<h4 id="sec-2-3-4">[scf] Select Count From</h4>
<div class="outline-text-4" id="text-2-3-4">
<p>
Count number of records returned by query.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Count number of rec...
# --
SELECT COUNT(*) FROM $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-5" class="outline-4">
<h4 id="sec-2-3-5">[is] INFORMATION<sub>SCHEMA</sub></h4>
<div class="outline-text-4" id="text-2-3-5">
<div class="org-src-container">

<pre class="src src-sql"># name: INFORMATION_SCH...
# --
INFORMATION_SCHEMA$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-6" class="outline-4">
<h4 id="sec-2-3-6">[gb] Group By</h4>
<div class="outline-text-4" id="text-2-3-6">
<div class="org-src-container">

<pre class="src src-sql"># name: GROUP BY fragment
# --
GROUP BY $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-7" class="outline-4">
<h4 id="sec-2-3-7">[ob] Order By</h4>
<div class="outline-text-4" id="text-2-3-7">
<div class="org-src-container">

<pre class="src src-sql"># name: ORDER BY fragment
# --
ORDER BY $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-8" class="outline-4">
<h4 id="sec-2-3-8">[df] Delete From</h4>
<div class="outline-text-4" id="text-2-3-8">
<p>
Delete statement.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: DELETE FROM frag...
# --
DELETE FROM ${1:[schema].[table_name]}
WHERE $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-9" class="outline-4">
<h4 id="sec-2-3-9">[be] Begin&#x2026;End</h4>
<div class="outline-text-4" id="text-2-3-9">
<p>
Insert <code>BEGIN...END</code> block.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: BEGIN...END block
# --
BEGIN
    $0
END
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-10" class="outline-4">
<h4 id="sec-2-3-10">[tc] Try &#x2026; Catch</h4>
<div class="outline-text-4" id="text-2-3-10">
<p>
Insert <code>TRY...CATCH</code> block.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: TRY ... CATCH fragm...
# --
BEGIN TRY
    $0
END TRY
BEGIN CATCH
    /*
	SELECT
	    ERROR_NUMBER() AS ErrorNumber,
	    ERROR_SEVERITY() AS ErrorSeverity,
	    ERROR_STATE() AS ErrorState,
	    ERROR_PROCEDURE() AS ErrorProcedure,
	    ERROR_LINE() AS ErrorLine,
	    ERROR_MESSAGE() AS ErrorMessage
    */
END CATCH;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-11" class="outline-4">
<h4 id="sec-2-3-11">[ifs] If</h4>
<div class="outline-text-4" id="text-2-3-11">
<div class="org-src-container">

<pre class="src src-sql"># name: IF fragment
# --
IF 1 = 1
BEGIN
    $0
END
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-12" class="outline-4">
<h4 id="sec-2-3-12">If Exists</h4>
<div class="outline-text-4" id="text-2-3-12">
<p>
Perform an operation if a selected object exists.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: ...
# --
IF EXISTS(
 SELECT
 FROM ${1:object})
 BEGIN
    $0
 END
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-13" class="outline-4">
<h4 id="sec-2-3-13">Case</h4>
<div class="outline-text-4" id="text-2-3-13">
<div class="org-src-container">

<pre class="src src-sql">CASE /*expression*/
    WHEN /*expression*/ THEN /*result_expression*/
    WHEN /*expression*/ THEN /*result_expression*/
    ELSE /*result_expression*/
END
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-3-14" class="outline-4">
<h4 id="sec-2-3-14">[cte] Common Table Expression</h4>
<div class="outline-text-4" id="text-2-3-14">
<p>
Temporary inline view.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: WITH cte fragment
# --
WITH ${1:cte_name} AS
(
    -- SELECT
    -- FROM
    -- GROUP BY
)
-- Statement that executes the common table expression
SELECT $0
FROM $1;
GO
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4">Function</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Naming convention: functions are prefixed with <code>ufn</code>.
</p>
</div>

<div id="outline-container-sec-2-4-1" class="outline-4">
<h4 id="sec-2-4-1">[ctif] Create Inline Table Function</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
Creates an inline table function.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Create inline table-va...
# --
IF OBJECT_ID (N'${1:[schema].[inline_function_name]}', N'IF') IS NOT NULL
    DROP FUNCTION $1;  
GO

-- ================================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      /* Author */
-- Create date: /* Create Date */
-- Description: /* Description */
-- =============================================
CREATE FUNCTION $1 (@${2:parameter_name} ${3:parameter_data_type})
RETURNS TABLE
--WITH ENCRYPTION|SCHEMABINDING, ...
AS
RETURN
(
    -- Add the SELECT statement with parameter references here
    SELECT @$2 AS c1
    $0
);
GO

-- =============================================
-- Example to execute function
-- =============================================
SELECT *
FROM $1 /* owner.inline_function_name */
    (/* value_for_@parameter_name */)
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-4-2" class="outline-4">
<h4 id="sec-2-4-2">[ctf] Create Multi-Statement Table Function</h4>
<div class="outline-text-4" id="text-2-4-2">
<p>
Creates a multi-statement table function.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Create multi-stateme...
# --
IF OBJECT_ID (N'${1:[schema].[table_function_name]}', N'TF') IS NOT NULL
    DROP FUNCTION $1;  
GO

CREATE FUNCTION $1 (@{2:parameter_name} ${3:parameter_data_type})
RETURNS @${4:return_variable_name} TABLE
(
    /* table type definition */
    $2 $3
)
--WITH ENCRYPTION|SCHEMABINDING, ...
AS
BEGIN
    /* function body */
    INSERT @$4
    SELECT 1
    RETURN
END;
GO

-- =============================================
-- Example to execute function
-- =============================================
SELECT * FROM $1 /* owner.table_function_name */
    (/* value_for_@parameter_name */)
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-4-3" class="outline-4">
<h4 id="sec-2-4-3">[csf] Create Scalar Function</h4>
<div class="outline-text-4" id="text-2-4-3">
<p>
Creates a scalar function.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Create scalar function
# --
IF OBJECT_ID (N'${1:[schema].[scalar_function_name]}', N'FN') IS NOT NULL
    DROP FUNCTION $1;  
GO

-- =============================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      /* Author */
-- Create date: /* Create Date */
-- Description: /* Description */
-- =============================================
CREATE FUNCTION $1 (@{2:parameter_name} ${3:parameter_data_type})
RETURNS ${4:function_data_type}
--WITH ENCRYPTION|SCHEMABINDING, ...
AS
-- Returns ...
BEGIN
    /* function body */
--  eg.
--  DECLARE @v_ret $4
--  SELECT @v_ret = /* scalar expression */
--  RETURN @v_ret$0
END;
GO

-- =============================================
-- Example to execute function
-- =============================================
SELECT $1 /* owner.scalar_function_name */
    (/* value_for_@parameter_name */)
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-4-4" class="outline-4">
<h4 id="sec-2-4-4">[af] Alter Function</h4>
<div class="outline-text-4" id="text-2-4-4">
<div class="org-src-container">

<pre class="src src-sql"># name: ALTER FUNCTION fr...
# --    
ALTER FUNCTION $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-4-5" class="outline-4">
<h4 id="sec-2-4-5">[dfn] Drop Function</h4>
<div class="outline-text-4" id="text-2-4-5">
<div class="org-src-container">

<pre class="src src-sql"># name: Drop function
# --
DROP FUNCTION $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5">Index</h3>
<div class="outline-text-3" id="text-2-5">
</div><div id="outline-container-sec-2-5-1" class="outline-4">
<h4 id="sec-2-5-1">[cni] Create Non-Clustered Index</h4>
<div class="outline-text-4" id="text-2-5-1">
<p>
Creates a basic, non-clustered index.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Create non-unique n...
# --
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'${3:index_name}')  
    DROP INDEX $3 ON ${1:[schema].[owner_name]};
GO

CREATE NONCLUSTERED INDEX $3
ON $1 (${2:column})
--WITH PAD_INDEX
--    | FILLFACTOR = fillfactor
--    | IGNORE_DUP_KEY
--    | DROP_EXISTING
--    | STATISTICS_NORECOMPUTE
--    | SORT_IN_TEMPDB, .. as required
-- ON filegroup
GO
$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-5-2" class="outline-4">
<h4 id="sec-2-5-2">[cuni] Create Unique Non-Clustered Index</h4>
<div class="outline-text-4" id="text-2-5-2">
<p>
Creates a unique, non-clustered index.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Create unique nonclu...
# --
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'${3:index_name}')  
    DROP INDEX $3 ON ${1:[schema].[owner_name]};
GO

CREATE UNIQUE NONCLUSTERED INDEX $3
ON $1 (${2:column})
--WITH
--    PAD_INDEX,
--    FILLFACTOR = fillfactor,
--    IGNORE_DUP_KEY,
--    DROP_EXISTING = OFF,
--    STATISTICS_NORECOMPUTE,
--    SORT_IN_TEMPDB = OFF, .. as required
ON ${3:filegroup_name}
GO
$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-5-3" class="outline-4">
<h4 id="sec-2-5-3">[cci] Create Clustered Index</h4>
<div class="outline-text-4" id="text-2-5-3">
<div class="org-src-container">

<pre class="src src-sql"># name: Create non-unique cl...
# --
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'${3:index_name}')  
    DROP INDEX $3 ON ${1:[schema].[owner_name]};
GO

CREATE CLUSTERED INDEX $3
ON $1 (${2:column})
--WITH PAD_INDEX
--    | FILLFACTOR = fillfactor
--    | IGNORE_DUP_KEY
--    | DROP_EXISTING
--    | STATISTICS_NORECOMPUTE
--    | SORT_IN_TEMPDB, .. as required
-- ON filegroup
GO
$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-5-4" class="outline-4">
<h4 id="sec-2-5-4">[cuci] Create Unique Clustered Index</h4>
<div class="outline-text-4" id="text-2-5-4">
<p>
Create index full syntax.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Create unique cluster...
# --
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'${3:index_name}')  
    DROP INDEX $3 ON ${1:[schema].[owner_name]};
GO

CREATE UNIQUE CLUSTERED INDEX $3
ON $1 (${2:column})
WITH
PAD_INDEX,
FILLFACTOR = ${3:fillfactor_value},
IGNORE_DUP_KEY,
DROP_EXISTING,
STATISTICS_NORECOMPUTE
--    | SORT_IN_TEMPDB, .. as required
ON ${4:filegroup_name}
GO
$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-5-5" class="outline-4">
<h4 id="sec-2-5-5">[di] Drop Index</h4>
<div class="outline-text-4" id="text-2-5-5">
<div class="org-src-container">

<pre class="src src-sql"># name: Drop index
# --
DROP INDEX $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6">Join fragment</h3>
<div class="outline-text-3" id="text-2-6">
</div><div id="outline-container-sec-2-6-1" class="outline-4">
<h4 id="sec-2-6-1">[cj] Cross Join</h4>
<div class="outline-text-4" id="text-2-6-1">
<div class="org-src-container">

<pre class="src src-sql"># name: CROSS JOIN fragment
# --
CROSS JOIN $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-6-2" class="outline-4">
<h4 id="sec-2-6-2">[fj] Full Join</h4>
<div class="outline-text-4" id="text-2-6-2">
<div class="org-src-container">

<pre class="src src-sql"># name: FULL JOIN fragment
# --
FULL JOIN $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-6-3" class="outline-4">
<h4 id="sec-2-6-3">[foj] Full Outer Join</h4>
<div class="outline-text-4" id="text-2-6-3">
<div class="org-src-container">

<pre class="src src-sql"># name: FULL OUTER JOIN fr...
# --
FULL OUTER JOIN $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-6-4" class="outline-4">
<h4 id="sec-2-6-4">[ij] Inner Join</h4>
<div class="outline-text-4" id="text-2-6-4">
<div class="org-src-container">

<pre class="src src-sql"># name: INNER JOIN fragment
# --
INNER JOIN $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-6-5" class="outline-4">
<h4 id="sec-2-6-5">[j] Join</h4>
<div class="outline-text-4" id="text-2-6-5">
<div class="org-src-container">

<pre class="src src-sql"># name: JOIN fragment
# --
JOIN $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-6-6" class="outline-4">
<h4 id="sec-2-6-6">[lj] Left Join</h4>
<div class="outline-text-4" id="text-2-6-6">
<div class="org-src-container">

<pre class="src src-sql"># name: LEFT JOIN fragment
# --
LEFT JOIN $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-6-7" class="outline-4">
<h4 id="sec-2-6-7">[loj] Left Outer Join</h4>
<div class="outline-text-4" id="text-2-6-7">
<div class="org-src-container">

<pre class="src src-sql"># name: LEFT OUTER JOIN fr...
# --
LEFT OUTER JOIN $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-6-8" class="outline-4">
<h4 id="sec-2-6-8">[rj] Right Join</h4>
<div class="outline-text-4" id="text-2-6-8">
<div class="org-src-container">

<pre class="src src-sql"># name: RIGHT JOIN fragment
# --
RIGHT JOIN $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-6-9" class="outline-4">
<h4 id="sec-2-6-9">[roj] Right Outer Join</h4>
<div class="outline-text-4" id="text-2-6-9">
<div class="org-src-container">

<pre class="src src-sql"># name: RIGHT OUTER JOIN f...
# --
RIGHT OUTER JOIN $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-7" class="outline-3">
<h3 id="sec-2-7">Login</h3>
<div class="outline-text-3" id="text-2-7">
</div><div id="outline-container-sec-2-7-1" class="outline-4">
<h4 id="sec-2-7-1">[cl] Create SQL Authentication Login</h4>
<div class="outline-text-4" id="text-2-7-1">
<p>
Creates a SQL Server Authentication login.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: CREATE SQL Server l...
# --
CREATE LOGIN ${1:SQL_login_name}
WITH PASSWORD = N'${2:Strong_P@ssword}'$0 /* HASHED */ /* MUST_CHANGE */
--  DEFAULT_DATABASE = database
--  DEFAULT_LANGUAGE = language
--  CHECK_POLICY = ON | OFF
--  SID = sid
--  CHECK_EXPIRATION = ON | OFF
--  CREDENTIAL = credential_name
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-7-2" class="outline-4">
<h4 id="sec-2-7-2">Create Windows Authentication Login</h4>
<div class="outline-text-4" id="text-2-7-2">
<p>
Creates a Windows Authentication login.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: CREATE Windows l...
# --
CREATE LOGIN ${1:[domain_name\user_name]}
FROM WINDOWS$0
WITH
DEFAULT_DATABASE = ${2:default_database}
--  DEFAULT_LANGUAGE = language
--  CERTIFICATE certificate_name
--  ASYMMETRIC KEY key_name
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-7-3" class="outline-4">
<h4 id="sec-2-7-3">[dl] Drop Login</h4>
<div class="outline-text-4" id="text-2-7-3">
<p>
Drop login.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Drop login
# --
DROP LOGIN ${1:SQL_login_name}
GO
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-8" class="outline-3">
<h3 id="sec-2-8">Role</h3>
<div class="outline-text-3" id="text-2-8">
</div><div id="outline-container-sec-2-8-1" class="outline-4">
<h4 id="sec-2-8-1">Create Role</h4>
<div class="outline-text-4" id="text-2-8-1">
<p>
Create Database Role.
</p>

<div class="org-src-container">

<pre class="src src-sql">USE ${1:database_name}
GO

CREATE ROLE ${2:role_name}$0
GO
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-9" class="outline-3">
<h3 id="sec-2-9">Schema</h3>
<div class="outline-text-3" id="text-2-9">
</div><div id="outline-container-sec-2-9-1" class="outline-4">
<h4 id="sec-2-9-1">Create Schema</h4>
<div class="outline-text-4" id="text-2-9-1">
<p>
Create a database schema.
</p>

<div class="org-src-container">

<pre class="src src-sql">CREATE SCHEMA ${1:schema}$0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-10" class="outline-3">
<h3 id="sec-2-10">Set options</h3>
<div class="outline-text-3" id="text-2-10">
</div><div id="outline-container-sec-2-10-1" class="outline-4">
<h4 id="sec-2-10-1">[san] Set ANSI<sub>NULLS</sub></h4>
<div class="outline-text-4" id="text-2-10-1">
<div class="org-src-container">

<pre class="src src-sql"># name: Change the current A...
# --
SET ANSI_NULLS ON$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-10-2" class="outline-4">
<h4 id="sec-2-10-2">[sqi] Set QUOTED<sub>IDENTIFIER</sub></h4>
<div class="outline-text-4" id="text-2-10-2">
<div class="org-src-container">

<pre class="src src-sql"># name: Change the current ...
# --
SET QUOTED_IDENTIFIER ON$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-10-3" class="outline-4">
<h4 id="sec-2-10-3">[sxa] Set XACT<sub>ABORT</sub></h4>
<div class="outline-text-4" id="text-2-10-3">
<div class="org-src-container">

<pre class="src src-sql"># name: Change the current X...
# --
SET XACT_ABORT OFF$0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-11" class="outline-3">
<h3 id="sec-2-11">Stored Procedure</h3>
<div class="outline-text-3" id="text-2-11">
<p>
Naming convention: stored procedures are prefixed with <code>usp</code>.
</p>
</div>

<div id="outline-container-sec-2-11-1" class="outline-4">
<h4 id="sec-2-11-1">[cp] Create Procedure Basic Template</h4>
<div class="outline-text-4" id="text-2-11-1">
<p>
Create a simple stored procedure with output parameter.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Create stored proced...
# --
-- Drop stored procedure if it already exists
IF OBJECT_ID ('${1:[schema].[procedure_name]}', 'P') IS NOT NULL   
    DROP PROCEDURE $1;  
GO

-- =============================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      /* Author */
-- Create date: /* Create Date */
-- Description: /* Description */
-- =============================================
CREATE PROCEDURE $1
    -- Add the parameters for the function here
    @${2:parameter_name_1} ${3:parameter_data_type_1} = ${4:default_value_for_parameter_1}
    @${5:parameter_name_2} ${6:parameter_data_type_2} OUTPUT
-- WITH ENCRYPTION, RECOMPILE, EXECUTE AS CALLER|SELF|OWNER| 'user_name'
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here
    SELECT @$2$0
END
GO

--SET QUOTED_IDENTIFIER ON|OFF
--SET ANSI_NULLS ON|OFF
--GO

-- =============================================
-- Example to execute the stored procedure
-- =============================================
DECLARE @${7:variable_for_output_parameter} $6

EXECUTE $1 /* value_for_parameter_1 */, $7 OUTPUT

SELECT $7
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-11-2" class="outline-4">
<h4 id="sec-2-11-2">[crlp] Create CLR Procedure</h4>
<div class="outline-text-4" id="text-2-11-2">
<div class="org-src-container">

<pre class="src src-sql"># name: Create CLR stored pr...
# --
--SET QUOTED_IDENTIFIER ON|OFF
--SET ANSI_NULLS ON|OFF
--GO

CREATE PROCEDURE ${1:[schema].[procedure_name]}
(
    @${2:parameter_name} ${3:parameter_data_type}
)
-- WITH EXECUTE AS CALLER|SELF|OWNER| 'user_name'
AS EXTERNAL NAME ${4:[assembly].[class].[method]};
GO

--SET QUOTED_IDENTIFIER ON|OFF
--SET ANSI_NULLS ON|OFF
--GO$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-11-3" class="outline-4">
<h4 id="sec-2-11-3">[ap] Alter Procedure</h4>
<div class="outline-text-4" id="text-2-11-3">
<div class="org-src-container">

<pre class="src src-sql"># name: ALTER PROCEDURE
# --    
ALTER PROCEDURE $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-11-4" class="outline-4">
<h4 id="sec-2-11-4">[dp] Drop Procedure</h4>
<div class="outline-text-4" id="text-2-11-4">
<div class="org-src-container">

<pre class="src src-sql"># name: Drop stored procedure
# --
DROP PROCEDURE $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-12" class="outline-3">
<h3 id="sec-2-12">Synonym</h3>
<div class="outline-text-3" id="text-2-12">
</div><div id="outline-container-sec-2-12-1" class="outline-4">
<h4 id="sec-2-12-1">Create Synonym</h4>
<div class="outline-text-4" id="text-2-12-1">
<p>
Creates a synonym.
</p>

<div class="org-src-container">

<pre class="src src-sql">CREATE SYNONYM ${1:[schema].[synonym_name]}
FOR ${2:[schema].[object_name]};
GO$0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-13" class="outline-3">
<h3 id="sec-2-13">Table</h3>
<div class="outline-text-3" id="text-2-13">
</div><div id="outline-container-sec-2-13-1" class="outline-4">
<h4 id="sec-2-13-1">[ct] Create Table</h4>
<div class="outline-text-4" id="text-2-13-1">
<p>
Creates a table (and drop previous one with the same name).
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Create table
# --
IF OBJECT_ID ('${1:[schema].[table_name]}', 'U') IS NOT NULL
    DROP TABLE $1;
GO

CREATE TABLE $1
(
    ${2:column_1} ${3:data_type_1} ${4:column_nullability_1},
    ${5:column_2} ${6:data_type_2} ${5:column_nullability_2},$0
    CONSTRAINT /* contraint_name */ PRIMARY KEY (/* columns_in_primary_key */)
);
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-13-2" class="outline-4">
<h4 id="sec-2-13-2">[at] Alter Table fragment</h4>
<div class="outline-text-4" id="text-2-13-2">
<div class="org-src-container">

<pre class="src src-sql"># name: ALTER TABLE fragm...
# --    
ALTER TABLE $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-13-3" class="outline-4">
<h4 id="sec-2-13-3">[ata] Add Column</h4>
<div class="outline-text-4" id="text-2-13-3">
<div class="org-src-container">

<pre class="src src-sql"># name: Add column
# --
ALTER TABLE ${1:[schema].[table_name]} ADD [${2:column_name}] ${3:data_type} ${4:column_nullability};
GO$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-13-4" class="outline-4">
<h4 id="sec-2-13-4">[atac] modify Column</h4>
<div class="outline-text-4" id="text-2-13-4">
<div class="org-src-container">

<pre class="src src-sql"># name: Modify column
# --
ALTER TABLE ${1:[schema].[table_name]} ALTER COLUMN $0;
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-13-5" class="outline-4">
<h4 id="sec-2-13-5">[atd] Drop column</h4>
<div class="outline-text-4" id="text-2-13-5">
<div class="org-src-container">

<pre class="src src-sql"># name: Drop column
# --    
ALTER TABLE ${1:[schema].[table_name]} DROP COLUMN $0;
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-13-6" class="outline-4">
<h4 id="sec-2-13-6">Add Constraint</h4>
<div class="outline-text-4" id="text-2-13-6">
<div class="org-src-container">

<pre class="src src-sql"># name: Add constraint
# --
ALTER TABLE ${1:[schema].[table_name]}
ADD CONSTRAINT ${2:constraint_name};
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-13-7" class="outline-4">
<h4 id="sec-2-13-7">[atdc] Drop Constraint</h4>
<div class="outline-text-4" id="text-2-13-7">
<div class="org-src-container">

<pre class="src src-sql"># name: Drop constraint
# --
ALTER TABLE ${1:[schema].[table_name]}
DROP CONSTRAINT ${2:constraint_name};
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-13-8" class="outline-4">
<h4 id="sec-2-13-8">[dt] Drop Table</h4>
<div class="outline-text-4" id="text-2-13-8">
<div class="org-src-container">

<pre class="src src-sql"># name: Drop table
# --

IF EXISTS (SELECT *
	     FROM sys.tables
	     JOIN sys.schemas
	       ON sys.tables.schema_id = sys.schemas.schema_id
	    WHERE sys.schemas.name = N'${1:schema}'
	      AND sys.tables.name = N'${2:table}')
    DROP TABLE $1.$2
GO
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-14" class="outline-3">
<h3 id="sec-2-14">Transaction</h3>
<div class="outline-text-3" id="text-2-14">
</div><div id="outline-container-sec-2-14-1" class="outline-4">
<h4 id="sec-2-14-1">[bt] Begin Transaction</h4>
<div class="outline-text-4" id="text-2-14-1">
<div class="org-src-container">

<pre class="src src-sql"># name: Begin transaction
# --
BEGIN TRANSACTION $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-14-2" class="outline-4">
<h4 id="sec-2-14-2">[ctr] Commit Transaction</h4>
<div class="outline-text-4" id="text-2-14-2">
<div class="org-src-container">

<pre class="src src-sql"># name: Commit transaction
# --
COMMIT TRANSACTION $0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-14-3" class="outline-4">
<h4 id="sec-2-14-3">[rt] Rollback Transaction</h4>
<div class="outline-text-4" id="text-2-14-3">
<div class="org-src-container">

<pre class="src src-sql"># name: Rollback transaction
# --
ROLLBACK TRANSACTION $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-15" class="outline-3">
<h3 id="sec-2-15">Trigger</h3>
<div class="outline-text-3" id="text-2-15">
</div><div id="outline-container-sec-2-15-1" class="outline-4">
<h4 id="sec-2-15-1">Create Trigger</h4>
<div class="outline-text-4" id="text-2-15-1">
<p>
Creates a trigger.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Create trigger
# --
IF OBJECT_ID ('${1:trigger_name}', 'TR') IS NOT NULL
    DROP TRIGGER $1;
GO

-- =============================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      /* Author */
-- Create date: /* Create Date */
-- Description: /* Description */
-- =============================================
CREATE TRIGGER $1
ON ${2:[schema].[table_name]}
FOR INSERT, UPDATE, DELETE
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for trigger here
    RAISERROR (50009, 16, 10)
    $0
END;
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-15-2" class="outline-4">
<h4 id="sec-2-15-2">Enable Trigger</h4>
<div class="outline-text-4" id="text-2-15-2">
<div class="org-src-container">

<pre class="src src-sql"># name: Enable trigger
# --
ALTER TABLE ${1:[schema].[table_name]} ENABLE TRIGGER $0;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-15-3" class="outline-4">
<h4 id="sec-2-15-3">Enable All Triggers</h4>
<div class="outline-text-4" id="text-2-15-3">
<p>
Enable all triggers on table.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Enable all triggers on...
# --
ALTER TABLE ${1:[schema].[table_name]}$0 ENABLE TRIGGER ALL;
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-15-4" class="outline-4">
<h4 id="sec-2-15-4">Disable Trigger</h4>
<div class="outline-text-4" id="text-2-15-4">
<div class="org-src-container">

<pre class="src src-sql"># name: Disable trigger
# --
ALTER TABLE ${1:[schema].[table_name]} DISABLE TRIGGER $0;
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-15-5" class="outline-4">
<h4 id="sec-2-15-5">Disable All Triggers</h4>
<div class="outline-text-4" id="text-2-15-5">
<p>
Disable all triggers on table.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Disable all triggers on...
# --
ALTER TABLE ${1:[schema].[table_name]}$0 DISABLE TRIGGER ALL;
GO
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-16" class="outline-3">
<h3 id="sec-2-16">User</h3>
<div class="outline-text-3" id="text-2-16">
</div><div id="outline-container-sec-2-16-1" class="outline-4">
<h4 id="sec-2-16-1">[cu] Create User</h4>
<div class="outline-text-4" id="text-2-16-1">
<p>
Creates a database user.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Create database user
# --
CREATE USER ${1:UserName}$0
FOR /* FROM */ LOGIN /* login_name */
--      CERTIFICATE certificate_name
--      ASYMMETRIC KEY key_name
--      WITHOUT LOGIN
--      WITH DEFAULT_SCHEMA = schema_name
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-16-2" class="outline-4">
<h4 id="sec-2-16-2">[du] Drop User</h4>
<div class="outline-text-4" id="text-2-16-2">
<div class="org-src-container">

<pre class="src src-sql"># name: Drop user
# --
DROP USER ${1:user_name}
GO
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-17" class="outline-3">
<h3 id="sec-2-17">User Defined Data Type</h3>
<div class="outline-text-3" id="text-2-17">
</div><div id="outline-container-sec-2-17-1" class="outline-4">
<h4 id="sec-2-17-1">Create User-Defined Data Type</h4>
<div class="outline-text-4" id="text-2-17-1">
<p>
Creates a user-defined data type.
</p>

<div class="org-src-container">

<pre class="src src-sql">CREATE TYPE ${1:[schema].[my_data_type]}
FROM ${2:data_type} ${3:column_nullability}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-18" class="outline-3">
<h3 id="sec-2-18">User Defined Table Type</h3>
<div class="outline-text-3" id="text-2-18">
</div><div id="outline-container-sec-2-18-1" class="outline-4">
<h4 id="sec-2-18-1">Create User-Defined Table Type</h4>
<div class="outline-text-4" id="text-2-18-1">
<p>
Creates a user-defined table type.
</p>

<div class="org-src-container">

<pre class="src src-sql">CREATE TYPE ${1:[schema].[my_table_type]} AS TABLE
(
    ${2:column_1} ${3:data_type_1},
    ${4:column_2} ${5:data_type_2}
);
GO$0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-19" class="outline-3">
<h3 id="sec-2-19">User Defined Type</h3>
<div class="outline-text-3" id="text-2-19">
</div><div id="outline-container-sec-2-19-1" class="outline-4">
<h4 id="sec-2-19-1">Create User-Defined Type</h4>
<div class="outline-text-4" id="text-2-19-1">
<p>
Creates a CLR integration user-defined type.
</p>

<div class="org-src-container">

<pre class="src src-sql">CREATE TYPE ${1:Utf8String}
EXTERNAL NAME ${2:utf8string}.${3:[Microsoft.Samples.SqlServer.utf8string]};
GO$0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-20" class="outline-3">
<h3 id="sec-2-20">View</h3>
<div class="outline-text-3" id="text-2-20">
</div><div id="outline-container-sec-2-20-1" class="outline-4">
<h4 id="sec-2-20-1">[cv] Create View</h4>
<div class="outline-text-4" id="text-2-20-1">
<p>
Creates a view.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Create view
# --
IF OBJECT_ID ('${1:[schema].[view_name]}', 'V') IS NOT NULL  
    DROP VIEW $1;  
GO

CREATE VIEW $1
--WITH ENCRYPTION, SCHEMABINDING, VIEW_METADATA
AS
    SELECT *
    FROM ${2:[schema].[sample_table]}
    $0
-- WITH CHECK OPTION
GO
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-20-2" class="outline-4">
<h4 id="sec-2-20-2">[dv] Drop View</h4>
<div class="outline-text-4" id="text-2-20-2">
<div class="org-src-container">

<pre class="src src-sql"># name: Drop view
# --
DROP VIEW $0
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-2-21" class="outline-3">
<h3 id="sec-2-21">&#x2014; Miscellaneous ---</h3>
<div class="outline-text-3" id="text-2-21">
</div><div id="outline-container-sec-2-21-1" class="outline-4">
<h4 id="sec-2-21-1">[sph] sp<sub>help</sub></h4>
<div class="outline-text-4" id="text-2-21-1">
<div class="org-src-container">

<pre class="src src-sql"># name: Execute sp_help
# --
EXEC sp_help$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-21-2" class="outline-4">
<h4 id="sec-2-21-2">[spt] sp<sub>helptext</sub></h4>
<div class="outline-text-4" id="text-2-21-2">
<div class="org-src-container">

<pre class="src src-sql"># name: Execute sp_helptext
# --
EXEC sp_helptext$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-21-3" class="outline-4">
<h4 id="sec-2-21-3">[xpfd] xp<sub>fixeddrives</sub></h4>
<div class="outline-text-4" id="text-2-21-3">
<p>
Retrieve free space on all fixed drives.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Retrieve free space o...
# --
EXEC master..xp_fixeddrives
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-21-4" class="outline-4">
<h4 id="sec-2-21-4">[w2] Who2</h4>
<div class="outline-text-4" id="text-2-21-4">
<div class="org-src-container">

<pre class="src src-sql"># name: Execute sp_who2$0
# --
EXEC sp_who2$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-21-5" class="outline-4">
<h4 id="sec-2-21-5">[err] @@ERROR</h4>
<div class="outline-text-4" id="text-2-21-5">
<div class="org-src-container">

<pre class="src src-sql"># name: @@ERROR function ...
# --
@@ERROR$0
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-21-6" class="outline-4">
<h4 id="sec-2-21-6">[mro] Most Recent Objects</h4>
<div class="outline-text-4" id="text-2-21-6">
<p>
Retrieve 20 most recently created objects.
</p>

<div class="org-src-container">

<pre class="src src-sql"># name: Retrieve 20 most rec...
# --
SELECT TOP 20 [name], [type], crdate
FROM sysobjects
ORDER BY crdate DESC
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-21-7" class="outline-4">
<h4 id="sec-2-21-7">Comment</h4>
<div class="outline-text-4" id="text-2-21-7">
<p>
A comment block.
</p>

<div class="org-src-container">

<pre class="src src-sql">/*
 * $0
 */
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-21-8" class="outline-4">
<h4 id="sec-2-21-8">Comment</h4>
<div class="outline-text-4" id="text-2-21-8">
<p>
A multiline comment block.
</p>

<div class="org-src-container">

<pre class="src src-sql">/*******************************************
 * $0
 *******************************************/
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Surround With&#x2026;</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">[begin] Code Snippet for BEGIN&#x2026;END block</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">

<pre class="src src-sql"># name: Surround with BEGIN...
# --
BEGIN
`yas-selected-text`
END
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2">[if] Code Snippet for IF construct</h3>
<div class="outline-text-3" id="text-3-2">
<div class="org-src-container">

<pre class="src src-sql"># name: Surround with IF...
# --
IF (${1:Condition})
BEGIN

`yas-selected-text`

END
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3">[while] Code Snippet for WHILE loop</h3>
<div class="outline-text-3" id="text-3-3">
<div class="org-src-container">

<pre class="src src-sql"># name: Surround with WHILE...
# --
WHILE (${1:Condition})
BEGIN

`yas-selected-text`

END
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Fabrice Niessen</p>
<p class="date">Created: 2017-08-12 Sat 10:38</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.2.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
