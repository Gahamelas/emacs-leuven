<!-- <xml version="1.0" encoding="utf-8"> -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Cygwin (vers 1st September 2004), see www.w3.org" />

  <title>Gnus Leuven</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Org-mode" />
  <meta name="author" content="Fabrice Niessen" />
</head>

<body>
  <div id="content">
    <h1 class="title">Gnus Leuven</h1>

    <div id="table-of-contents">
      <h2>Table of Contents</h2>

      <div id="text-table-of-contents">
        <ul>
          <li><a href="#sec-1">Overview</a></li>

          <li>
            <a href="#sec-2">Starting Up Gnus</a>

            <ul>
              <li><a href="#sec-2-1">Finding the News</a></li>

              <li><a href="#sec-2-2">New Groups</a></li>

              <li><a href="#sec-2-3">Startup Files</a></li>

              <li><a href="#sec-2-4">Auto Save</a></li>

              <li><a href="#sec-2-5">Active File</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-3">Group Buffer</a>

            <ul>
              <li><a href="#sec-3-1">Group Buffer Format</a></li>

              <li><a href="#sec-3-2">Selecting a Group</a></li>

              <li><a href="#sec-3-3">Listing Groups</a></li>

              <li><a href="#sec-3-4">Exiting Gnus</a></li>

              <li><a href="#sec-3-5">Group Topics</a></li>

              <li><a href="#sec-3-6">Misc Group Stuff</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-4">Summary buffer</a>

            <ul>
              <li><a href="#sec-4-1">Summary Buffer Format</a></li>

              <li><a href="#sec-4-2">Paging the Article</a></li>

              <li><a href="#sec-4-3">Reply, Followup and Post</a></li>

              <li><a href="#sec-4-4">Threading</a></li>

              <li><a href="#sec-4-5">Sorting the Summary Buffer</a></li>

              <li><a href="#sec-4-6">Article Caching</a></li>

              <li><a href="#sec-4-7">Article Treatment</a></li>

              <li><a href="#sec-4-8">MIME Commands</a></li>

              <li><a href="#sec-4-9">Charsets</a></li>

              <li>
                <a href="#sec-4-10">Various Summary Stuff</a>

                <ul>
                  <li><a href="#sec-4-10-1">Gnus Stripes</a></li>
                </ul>
              </li>
            </ul>
          </li>

          <li>
            <a href="#sec-5">Article Buffer</a>

            <ul>
              <li><a href="#sec-5-1">Hiding headers</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-6">Emacs MIME</a>

            <ul>
              <li><a href="#sec-6-1">Decoding and Viewing</a></li>

              <li><a href="#sec-6-2">Non-MIME</a></li>

              <li><a href="#sec-6-3">Display Customization</a></li>

              <li><a href="#sec-6-4">Composing</a></li>

              <li><a href="#sec-6-5">Basic Functions</a></li>
            </ul>
          </li>

          <li><a href="#sec-7">Back to Article Buffer</a></li>

          <li>
            <a href="#sec-8">Composing Messages</a>

            <ul>
              <li><a href="#sec-8-1">Mail</a></li>

              <li><a href="#sec-8-2">Posting Server</a></li>

              <li><a href="#sec-8-3">Archived Messages</a></li>

              <li>
                <a href="#sec-8-4">Posting Styles</a>

                <ul>
                  <li><a href="#sec-8-4-1">Multiple servers</a></li>

                  <li><a href="#sec-8-4-2">Headers</a></li>
                </ul>
              </li>
            </ul>
          </li>

          <li>
            <a href="#sec-9">Message</a>

            <ul>
              <li><a href="#sec-9-1">Interface</a></li>

              <li><a href="#sec-9-2">Commands</a></li>

              <li><a href="#sec-9-3">Variables</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-10">Select Methods</a>

            <ul>
              <li><a href="#sec-10-1">Getting Mail</a></li>

              <li><a href="#sec-10-2">Browsing the Web</a></li>

              <li><a href="#sec-10-3">IMAP</a></li>

              <li><a href="#sec-10-4">Gnus Unplugged</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-11">Scoring</a>

            <ul>
              <li><a href="#sec-11-1">From Sacha Chua</a></li>
            </ul>
          </li>

          <li><a href="#sec-12">Searching</a></li>

          <li>
            <a href="#sec-13">Various</a>

            <ul>
              <li><a href="#sec-13-1">Interactive</a></li>

              <li><a href="#sec-13-2">Formatting Variables</a></li>

              <li><a href="#sec-13-3">Window Layout</a></li>

              <li><a href="#sec-13-4">Interaction with other modes</a></li>

              <li><a href="#sec-13-5">Various Various</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-14">Appendices</a>

            <ul>
              <li><a href="#sec-14-1">History</a></li>

              <li><a href="#sec-14-2">Frequently Asked Questions</a></li>

              <li><a href="#sec-14-3">File Local Variables</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <div id="outline-container-sec-1" class="outline-2">
      <h2 id="sec-1">Overview</h2>

      <div class="outline-text-2" id="text-1">
        <p>See <a href=
        "http://www.gnu.org/software/emacs/manual/gnus.html">http://www.gnu.org/software/emacs/manual/gnus.html</a></p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;; </span><span class=
"org-comment">gnus-leuven.el --- my Gnus config file</span>

<span class="org-comment-delimiter">;; </span><span class=
"org-comment">Copyright (C) 2004-2014 Fabrice Niessen</span>

<span class="org-comment-delimiter">;; </span><span class=
"org-comment">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">Keywords: gnus, dotfile, config</span>

<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;;    </span><span class=
"org-comment">__ _ _ __  _   _ ___</span>
<span class="org-comment-delimiter">;;   </span><span class=
"org-comment">/ _` | '_ \| | | / __|</span>
<span class="org-comment-delimiter">;;  </span><span class=
"org-comment">| (_| | | | | |_| \__ \</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">(_)__, |_| |_|\__,_|___/</span>
<span class="org-comment-delimiter">;;   </span><span class=
"org-comment">|___/</span>

<span class="org-comment-delimiter">;; </span><span class=
"org-comment">This file is NOT part of GNU Emacs.</span>

<span class="org-comment-delimiter">;; </span><span class=
"org-comment">This program is free software: you can redistribute it and/or</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">modify it under the terms of the GNU General Public License as</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">published by the Free Software Foundation, either version 3 of</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">the License, or (at your option) any later version.</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">This program is distributed in the hope that it will be useful,</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">GNU General Public License for more details.</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">You should have received a copy of the GNU General Public License</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">along with this program. If not, see <a href=
"http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>


<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* Commentary:</span>

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** Help</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">For help on The Gnus Newsreader, see:</span>
<span class="org-comment-delimiter">;;     </span><span class=
"org-comment">(info "(gnus)")  &lt;== C-x C-e here!</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** </span><span class="org-comment"><span class=
"org-leuven-highlight">BUG</span></span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">Updating info for nnimap does not occurr for group INBOX (well for</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">subgroups) - i.e., mail GCc'ed to INBOX is lost...</span>


<span class="org-comment-delimiter">;; </span><span class=
"org-comment">http://www.emacswiki.org/emacs/GnusTutorial</span>


<span class="org-comment-delimiter">;; </span><span class=
"org-comment">Disconnected from IMAP? In the `</span><span class=
"org-comment"><span class="org-constant">*Server*</span></span><span class=
"org-comment">' buffer, hit 'C' to close the</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">server and then 'O' to reopen it.</span>

<span class="org-comment-delimiter">;; </span><span class=
"org-comment">"You should byte-compile Gnus" because the function `</span><span class="org-comment"><span class="org-constant">gnus</span></span><span class="org-comment">' isn't</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">byte-compiled. Check `M-x locate-library RET gnus RET' if it picks up the</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">.el or .elc file.</span>


<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* Code:</span>

<span class="org-comment-delimiter">;; </span><span class=
"org-comment">This file is only provided as an example. Customize it to your own taste!</span>
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
(message <span class="org-string">"* Load Gnus Leuven"</span>)

(<span class="org-keyword">defvar</span> <span class=
"org-variable-name">leuven-section-starting-gnus</span> t) <span class=
"org-comment-delimiter">; </span><span class="org-comment">required</span>
(<span class="org-keyword">defvar</span> <span class=
"org-variable-name">leuven-section-group-buffer</span> nil)
(<span class="org-keyword">defvar</span> <span class=
"org-variable-name">leuven-section-summary-buffer</span> nil)
(<span class="org-keyword">defvar</span> <span class=
"org-variable-name">leuven-section-article-buffer</span> nil)
(<span class="org-keyword">defvar</span> <span class=
"org-variable-name">leuven-section-composing-messages</span> t)
                                        <span class=
"org-comment-delimiter">; </span><span class="org-comment">required</span>
(<span class="org-keyword">defvar</span> <span class=
"org-variable-name">leuven-section-message</span> t)       <span class=
"org-comment-delimiter">; </span><span class="org-comment">required</span>
(<span class="org-keyword">defvar</span> <span class=
"org-variable-name">leuven-section-select-methods</span> nil)
(<span class="org-keyword">defvar</span> <span class=
"org-variable-name">leuven-section-scoring</span> nil)
(<span class="org-keyword">defvar</span> <span class=
"org-variable-name">leuven-section-various</span> nil)
(<span class="org-keyword">defvar</span> <span class=
"org-variable-name">leuven-section-appendices</span> nil)

(setq leuven-section-group-buffer t)
(setq leuven-section-summary-buffer t)
(setq leuven-section-article-buffer t)
(setq leuven-section-select-methods t)
(setq leuven-section-scoring t)
(setq leuven-section-various t)
(setq leuven-section-appendices t)

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* Loading</span>

<span class="org-comment-delimiter">;; </span><span class=
"org-comment">list of packages that `</span><span class=
"org-comment"><span class="org-constant">try-require</span></span><span class=
"org-comment">' can't find</span>
(setq leuven--missing-packages nil)
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-2" class="outline-2">
      <h2 id="sec-2">Starting Up Gnus</h2>

      <div class="outline-text-2" id="text-2">
        <p>If you’re running a recent Emacs, look into the EPA library to
        encrypt your <code>.authinfo</code> file.</p>

        <p>See <a href=
        "http://www.emacswiki.org/emacs/GnusEncryptedAuthInfo">http://www.emacswiki.org/emacs/GnusEncryptedAuthInfo</a>.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* 1 (info "(gnus)Starting Up") Gnus</span>

(<span class="org-keyword">when</span> leuven-section-starting-gnus
      (message <span class="org-string">"1 Starting Gnus..."</span>)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">support for `</span><span class="org-comment"><span class=
"org-constant">.authinfo</span></span><span class="org-comment">' file</span>
      (<span class="org-keyword">when</span> (try-require 'auth-source)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">for any host and any protocol, use just one .netrc-like file that</span>
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">holds authinfo passwords</span>
        (setq auth-sources
              (<span class="org-keyword">if</span> (file-exists-p <span class=
"org-string">"~/.authinfo.gpg"</span>)
                  '(<span class="org-string">"~/.authinfo.gpg"</span>)
                '(<span class="org-string">"~/.authinfo"</span>)))

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">log debug messages</span>
        (setq auth-source-debug t))
</pre>
        </div>
      </div>

      <div id="outline-container-sec-2-1" class="outline-3">
        <h3 id="sec-2-1">Finding the News</h3>

        <div class="outline-text-3" id="text-2-1">
          <p>Download and <b>install</b> of <a href=
          "http://www.gnu.org/software/gnutls/">GnuTLS library</a> may be
          required.</p>

          <p>Go to <a href=
          "http://schwarzvogel.de/ssl_tls_testing.shtml">Testing SSL and TLS
          services</a> to test the <b>opening of TLS connections</b>.</p>

          <p>Setting the following right is the only thing really required! The
          rest is customization.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 1.1 (info "(gnus)Finding the News")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">using Gnus for news (see `</span><span class=
"org-comment"><span class=
"org-constant">gnus-secondary-select-methods</span></span><span class=
"org-comment">' as well)</span>
      (setq gnus-select-method
            '(nntp <span class="org-string">"eternal-september.org"</span>
                   (nntp-address <span class=
"org-string">"news.eternal-september.org"</span>)
                   (nnir-search-engine nntp))

            <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; empty, read-only back-end (all real servers are secondary or</span>
            <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; foreign)</span>
            <span class="org-comment-delimiter">;; </span><span class=
"org-comment">'(nnnil)</span>
            )

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">required when posting to an authenticated news server</span>
      (add-hook 'nntp-server-opened-hook 'nntp-send-authinfo)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">configure incoming mail</span>
      (setq gnus-secondary-select-methods
            '((nnimap <span class="org-string">"mail"</span>
                      <span class=
"org-comment-delimiter">;; </span><span class="org-comment">account label allows for multiple accounts on the</span>
                      <span class=
"org-comment-delimiter">;; </span><span class="org-comment">same server (see `</span><span class="org-comment"><span class="org-constant">.authinfo</span></span><span class="org-comment">' for logins)</span>

                      (nnimap-address <span class="org-string">"mail"</span>)
                      <span class=
"org-comment-delimiter">;; </span><span class="org-comment">(nnimap-server-port 993)</span>
                      <span class=
"org-comment-delimiter">;; </span><span class="org-comment">(nnimap-stream ssl)</span>

                      (nnimap-split-methods 'nnimap-split-fancy) <span class=
"org-comment-delimiter">; </span><span class="org-comment"><span class=
"org-leuven-highlight">XXX</span></span><span class=
"org-comment"> when (try-require 'bbdb-gnus)...</span>

                      )

              (nntp <span class="org-string">"gmane"</span>
                    (nntp-address <span class=
"org-string">"news.gmane.org"</span>)
                    (nntp-port-number 119))))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">allow "hostname NOT matched" in the server certificate</span>
      (setq starttls-extra-arguments '(<span class=
"org-string">"--insecure"</span>))
      <span class="org-comment-delimiter">;;</span><span class=
"org-comment">! not used in an Emacs 24 with built-in gnutls support</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-2-2" class="outline-3">
        <h3 id="sec-2-2">New Groups</h3>

        <div class="outline-text-3" id="text-2-2">
          <p>Finding new newsgroups is done:</p>

          <ul class="org-ul">
            <li>at startup (if <code>gnus-check-new-newsgroups</code> is
            non-nil) or</li>

            <li>by using the function
            <code>gnus-find-new-newsgroup</code>.</li>
          </ul>

          <p>You can always subscribe to the new groups just by pressing
          <code>U</code> in the group buffer.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 1.4 (info "(gnus)New Groups")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">Gnus will not check for new newsgroups at startup</span>
      (setq gnus-check-new-newsgroups nil)
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">save you some time at startup and when you do the `g' command</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">don't save the list of killed groups</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment"><span class=
"org-leuven-highlight">WARNING</span></span><span class=
"org-comment"> As Gnus has no record of which groups are new and which are old,</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">the automatic new newsgroups subscription methods becomes meaningless</span>
      (setq gnus-save-killed-list nil)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">make all new groups that come from mail back-ends subscribed</span>
      (setq gnus-auto-subscribed-groups
            <span class="org-string">"^nnml</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">^nnimap</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">^nnslashdot"</span>)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-2-3" class="outline-3">
        <h3 id="sec-2-3">Startup Files</h3>

        <div class="outline-text-3" id="text-2-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 1.6 (info "(gnus)Startup Files")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">don't save a `</span><span class="org-comment"><span class=
"org-constant">.newsrc</span></span><span class=
"org-comment">' file (for using other newsreaders) on exit</span>
      (setq gnus-save-newsrc-file nil)  <span class=
"org-comment-delimiter">; </span><span class="org-comment">speed-up</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">ignore the `</span><span class="org-comment"><span class=
"org-constant">.newsrc</span></span><span class="org-comment">' file</span>
      (setq gnus-read-newsrc-file nil)  <span class=
"org-comment-delimiter">; </span><span class="org-comment">speed-up</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">my `</span><span class="org-comment"><span class=
"org-constant">.newsrc</span></span><span class=
"org-comment">' file (and the derived .el/.eld files)</span>
      (setq gnus-startup-file (concat gnus-directory <span class=
"org-string">".newsrc"</span>))
</pre>
          </div>

          <p>To stop the repetitive (and growing) “nntp read” messages, ensure
          you subscribe to at least one group for every NNTP server. You can
          even unsubscribe directly afterward…</p>
        </div>
      </div>

      <div id="outline-container-sec-2-4" class="outline-3">
        <h3 id="sec-2-4">Auto Save</h3>

        <div class="outline-text-3" id="text-2-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 1.7 (info "(gnus)Auto Save")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">enable showing of [Gmail]/* groups</span>
      (setq gnus-ignored-newsgroups <span class="org-string">""</span>)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">unconditionally read the dribble file</span>
      (setq gnus-always-read-dribble-file t)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-2-5" class="outline-3">
        <h3 id="sec-2-5">Active File</h3>

        <div class="outline-text-3" id="text-2-5">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 1.8 (info "(gnus)The Active File")</span>

      <span class="org-comment-delimiter">;;  </span><span class=
"org-comment">Gnus will only know about the groups in my `</span><span class=
"org-comment"><span class="org-constant">.newsrc</span></span><span class=
"org-comment">' file</span>
      (setq gnus-read-active-file nil) <span class=
"org-comment-delimiter">;; </span><span class="org-comment">speed-up</span>

      (message <span class="org-string">"1 Starting Gnus... Done"</span>))
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-3" class="outline-2">
      <h2 id="sec-3">Group Buffer</h2>

      <div class="outline-text-2" id="text-3">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* 2 (info "(gnus)The Group Buffer")</span>

(<span class="org-keyword">when</span> leuven-section-group-buffer
      (message <span class="org-string">"2 Group Buffer..."</span>)
</pre>
        </div>
      </div>

      <div id="outline-container-sec-3-1" class="outline-3">
        <h3 id="sec-3-1">Group Buffer Format</h3>

        <div class="outline-text-3" id="text-3-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 2.1 (info "(gnus)Group Buffer Format")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">create some faces</span>
      (<span class="org-keyword">defface</span> <span class=
"org-variable-name">leuven-gnus-ticked</span> '((t (<span class=
"org-builtin">:weight</span> bold <span class=
"org-builtin">:foreground</span> <span class="org-string">"#CF5D60"</span>)))
        <span class="org-doc">"Face for count of ticked articles."</span>)
      (<span class="org-keyword">defface</span> <span class=
"org-variable-name">leuven-gnus-unseen</span> '((t (<span class=
"org-builtin">:weight</span> bold <span class=
"org-builtin">:foreground</span> <span class="org-string">"blue"</span>)))
        <span class=
"org-doc">"Face for marker of new mail, and count of unseen articles."</span>)
      (<span class="org-keyword">defface</span> <span class=
"org-variable-name">leuven-gnus-unread</span> '((t (<span class=
"org-builtin">:weight</span> bold <span class=
"org-builtin">:foreground</span> <span class="org-string">"black"</span>)))
        <span class="org-doc">"Face for count of unread articles."</span>)
      (<span class="org-keyword">defface</span> <span class=
"org-variable-name">leuven-gnus-linum</span> '((t (<span class=
"org-builtin">:foreground</span> <span class="org-string">"#AFB7BA"</span>)))
        <span class="org-doc">"Face for markers in summary buffer."</span>)
      (<span class="org-keyword">defface</span> <span class=
"org-variable-name">leuven-gnus-score</span> '((t (<span class=
"org-builtin">:weight</span> bold <span class=
"org-builtin">:foreground</span> <span class=
"org-string">"#2B7E2A"</span> <span class=
"org-builtin">:background</span> <span class="org-string">"#CCFFCC"</span>)))
        <span class=
"org-doc">"Face for scoring marker in summary buffer."</span>)
      (<span class="org-keyword">defface</span> <span class=
"org-variable-name">leuven-gnus-diredp-file-suffix</span> '((t (<span class=
"org-builtin">:foreground</span> <span class="org-string">"#2EAE2C"</span>)))
        <span class=
"org-doc">"Face for size of article in summary buffer."</span>)
      (<span class="org-keyword">defface</span> <span class=
"org-variable-name">leuven-gnus-org-date</span> '((t (<span class=
"org-builtin">:foreground</span> <span class="org-string">"purple"</span>)))
        <span class="org-doc">"Face for date in summary buffer."</span>)

      (setq gnus-face-1 'leuven-gnus-ticked)
      (setq gnus-face-3 'leuven-gnus-unseen)
      (setq gnus-face-4 'leuven-gnus-unread)
      (setq gnus-face-5 'leuven-gnus-linum)
      (setq gnus-face-6 'leuven-gnus-score)
      (setq gnus-face-7 'leuven-gnus-diredp-file-suffix)
      (setq gnus-face-8 'leuven-gnus-org-date)

      (<span class="org-keyword">defun</span> <span class=
"org-function-name">gnus-user-format-function-y</span> (headers)
        <span class=
"org-doc">"Return string for count of unread articles."</span>
        (<span class=
"org-keyword">if</span> (&gt; (string-to-number gnus-tmp-number-of-unread) 0)
            (concat gnus-tmp-number-of-unread <span class=
"org-string">" Unread"</span>)
          <span class="org-string">""</span>))

      (<span class="org-keyword">defun</span> <span class=
"org-function-name">gnus-user-format-function-U</span> (headers)
        <span class=
"org-doc">"Return string for count of unseen articles."</span>
        (<span class=
"org-keyword">if</span> (&gt; (gnus-number-of-unseen-articles-in-group gnus-tmp-group) 0)
            <span class="org-comment-delimiter">;; </span><span class=
"org-comment">found in gnus-group.el</span>
            (concat (int-to-string
                     (gnus-number-of-unseen-articles-in-group
                      gnus-tmp-group)) <span class=
"org-string">" Unseen"</span>)
          <span class="org-string">""</span>))

      (<span class="org-keyword">defun</span> <span class=
"org-function-name">gnus-user-format-function-T</span> (headers)
        <span class=
"org-doc">"Return string for count of ticked articles."</span>
        (<span class=
"org-keyword">if</span> (&gt; (gnus-range-length (cdr (assq 'tick gnus-tmp-marked))) 0)
            (concat (int-to-string
                     (gnus-range-length (cdr (assq 'tick gnus-tmp-marked))))
                    <span class="org-string">" Ticked"</span>)
          <span class="org-string">""</span>))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">format of the group buffer</span>
      (setq gnus-group-line-format (concat <span class=
"org-string">"%1{%M%}"</span>
                                           <span class=
"org-string">"%3{%m%}"</span>
                                           <span class="org-string">"  "</span>
                                           <span class=
"org-string">"%(%-42,42g%) "</span>
                                           <span class=
"org-string">"%4{%10uy%} "</span>
                                           <span class=
"org-string">"%3{%10uU%} "</span>
                                           <span class=
"org-string">"%1{%10uT%} "</span>
                                           <span class=
"org-string">"%7{%6t Total%}"</span>
                                           <span class=
"org-string">"\n"</span>))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-3-2" class="outline-3">
        <h3 id="sec-3-2">Selecting a Group</h3>

        <div class="outline-text-3" id="text-3-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 2.3 (info "(gnus)Selecting a Group")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">no groups are considered big</span>
      (setq gnus-large-newsgroup nil)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-3-3" class="outline-3">
        <h3 id="sec-3-3">Listing Groups</h3>

        <div class="outline-text-3" id="text-3-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 2.11 (info "(gnus)Listing Groups")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">groups that should always be listed in the group buffer (even when</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">there no unread articles in the groups)</span>
      (setq gnus-permanently-visible-groups nil) <span class=
"org-comment-delimiter">;; </span><span class="org-comment">= none</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-3-4" class="outline-3">
        <h3 id="sec-3-4">Exiting Gnus</h3>

        <div class="outline-text-3" id="text-3-4">
          <p>Cleanup all Gnus buffers on exit.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 2.15 (info "(gnus)Exiting Gnus")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">quit Gnus properly, if it is running ...</span>
      (<span class="org-keyword">defun</span> <span class=
"org-function-name">exit-gnus</span> ()
        <span class="org-doc">"Save and exit Gnus."</span>
        (<span class="org-keyword">if</span> (and (fboundp 'gnus-group-exit)
                 (gnus-alive-p))
            (<span class=
"org-keyword">with-current-buffer</span> (get-buffer <span class=
"org-string">"*Group*"</span>)
              (<span class="org-keyword">let</span> (gnus-interactive-exit)
                (gnus-group-exit)))))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">... before exiting Emacs (not leaving auto-save files around)</span>
      (add-hook 'kill-emacs-hook 'exit-gnus)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-3-5" class="outline-3">
        <h3 id="sec-3-5">Group Topics</h3>

        <div class="outline-text-3" id="text-3-5">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 2.16 (info "(gnus)Group Topics")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">permanently enable the topic mode</span>
      (add-hook 'gnus-group-mode-hook 'gnus-topic-mode)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">remove the binding of `C-c C-x', used by Org clocking commands</span>
      (add-hook 'gnus-topic-mode-hook
                (<span class="org-keyword">lambda</span> ()
                  (define-key gnus-topic-mode-map
                    (kbd <span class="org-string">"C-c C-x"</span>) nil)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-3-6" class="outline-3">
        <h3 id="sec-3-6">Misc Group Stuff</h3>

        <div class="outline-text-3" id="text-3-6">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 2.17 (info "(gnus)Misc Group Stuff")</span>

      (<span class="org-keyword">defface</span> <span class=
"org-variable-name">gnus-hl-line</span>
        '((t (<span class="org-builtin">:background</span> <span class=
"org-string">"#F5F5F5"</span>)))  <span class=
"org-comment-delimiter">; </span><span class="org-comment">#FFFFCC</span>
        <span class=
"org-doc">"Face for highlighting the current line with `</span><span class=
"org-doc"><span class="org-constant">gnus-hl-line</span></span><span class=
"org-doc">'."</span>
        <span class="org-builtin">:group</span> 'hl-line)

      (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven--hl-line-highlight</span> ()
        <span class=
"org-doc">"Enable line highlighting in the current buffer."</span>
        (set (make-local-variable 'hl-line-face) 'gnus-hl-line)
        (hl-line-mode 1))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">highlight current line in group buffer</span>
      (add-hook 'gnus-group-mode-hook 'leuven--hl-line-highlight)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">jump to the first group with unread articles, after getting new news</span>
      (add-hook 'gnus-after-getting-new-news-hook
                'gnus-group-first-unread-group)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">keep track of when I last read a group</span>
      (add-hook 'gnus-select-group-hook 'gnus-group-set-timestamp)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">turn off the column number in the group buffer, and</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">remove the binding of `C-c C-x', used by Org clocking commands</span>
      (add-hook 'gnus-group-mode-hook
                (<span class="org-keyword">lambda</span> ()
                  (<span class="org-keyword">progn</span>
                    (set (make-local-variable 'column-number-mode) nil)
                    (define-key gnus-group-mode-map
                      (kbd <span class="org-string">"C-c C-x"</span>) nil))))

      (message <span class="org-string">"2 Group Buffer... Done"</span>))
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-4" class="outline-2">
      <h2 id="sec-4">Summary buffer</h2>

      <div class="outline-text-2" id="text-4">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* 3 (info "(gnus)The Summary Buffer")</span>

(<span class="org-keyword">when</span> leuven-section-summary-buffer
      (message <span class="org-string">"3 Summary Buffer..."</span>)
</pre>
        </div>
      </div>

      <div id="outline-container-sec-4-1" class="outline-3">
        <h3 id="sec-4-1">Summary Buffer Format</h3>

        <div class="outline-text-3" id="text-4-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 3.1 (info "(gnus)Summary Buffer Format")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">auxiliary summary mode commands for Gnus</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">http://theotp1.physik.uni-ulm.de/~ste/comp/emacs/gnus/rs-gnus-summary.el</span>
      (<span class=
"org-keyword">when</span> (try-require 'rs-gnus-summary-<span class=
"org-leuven-highlight">XXX</span>)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">summary line indicators</span>
        (setq rs-gnus-summary-line-content-type-alist
              '((<span class="org-string">".*"</span> <span class=
"org-string">" "</span>)
                (<span class=
"org-string">"^multipart/mixed"</span> <span class="org-string">"@"</span>)))

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">display `@' for message with attachment in summary line</span>
        (<span class="org-keyword">defalias</span> '<span class=
"org-function-name">gnus-user-format-function-attachment</span>
          'rs-gnus-summary-line-content-type)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">alias for the score function:</span>
        (<span class="org-keyword">defalias</span> '<span class=
"org-function-name">gnus-user-format-function-score</span>
          'rs-gnus-summary-line-score))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">date format depending on age of article</span>
      (setq gnus-user-date-format-alist <span class=
"org-comment-delimiter">;; </span><span class=
"org-comment">`</span><span class="org-comment"><span class=
"org-constant">user-date</span></span><span class="org-comment">'</span>
            '(((gnus-seconds-today) . <span class=
"org-string">"               %H:%M"</span>)
              <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(604800 . "           %a %H:%M")</span>
              ((gnus-seconds-month) . <span class=
"org-string">"        %d %a %H:%M"</span>)
              ((gnus-seconds-year) . <span class=
"org-string">"     %m-%d %a %H:%M"</span>)
              (t . <span class="org-string">"%Y-%m-%d %a %H:%M"</span>)))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">format specification of the lines in the summary buffer</span>
      (setq gnus-summary-line-format
            <span class="org-comment-delimiter">;; </span><span class=
"org-comment">for the record, the default string is</span>
            <span class="org-comment-delimiter">;; </span><span class=
"org-comment">`%U%R%z%I%(%[%4L: %-20,20n%]%) %s\n'</span>
            (concat
             <span class="org-string">"%5{%U%}"</span> <span class=
"org-comment-delimiter">;; </span><span class="org-comment">status</span>
             <span class="org-string">"%8{%R%}"</span> <span class=
"org-comment-delimiter">;; </span><span class="org-comment">reply status</span>
             <span class="org-string">"%6{%z%} "</span> <span class=
"org-comment-delimiter">;; </span><span class="org-comment">score</span>
             <span class=
"org-string">"%8{%20&amp;user-date; %} "</span> <span class=
"org-comment-delimiter">;; </span><span class="org-comment">date</span>
             <span class="org-string">"%7{ %4k %}"</span> <span class=
"org-comment-delimiter">;; </span><span class="org-comment">size</span>
             <span class="org-string">"%*"</span> <span class=
"org-string">"%-15,15f "</span> <span class=
"org-comment-delimiter">;; </span><span class=
"org-comment">cursor before name of the poster</span>
             <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(if (boundp 'rs-gnus-summary-line-content-type-alist)</span>
             <span class="org-comment-delimiter">;;     </span><span class=
"org-comment">"%u&amp;attachment; ")</span>
             <span class="org-string">"%u&amp;r; "</span>
             <span class="org-string">"%5{ %}"</span>
             <span class="org-string">"%B"</span>
             <span class="org-string">"%I%s"</span>
             <span class="org-string">"\n"</span>))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">string indicating that the current article has the same subject as</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">the previous</span>
      (setq gnus-summary-same-subject <span class="org-string">""</span>)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">strings indicating that the current article has the same subject as</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">the previous</span>
      (<span class="org-keyword">if</span> (and (char-displayable-p ?\u25A3)
                                        <span class=
"org-comment-delimiter">; </span><span class=
"org-comment">white square containg black small square</span>
               (char-displayable-p ?\u2570))
          <span class="org-comment-delimiter">;; </span><span class=
"org-comment">See http://www.santagata.us/characters/CharacterEntities.html</span>

          (<span class="org-keyword">progn</span> <span class=
"org-comment-delimiter">;; </span><span class=
"org-comment">using ASCII tree layout with Unicode chars</span>
            (setq gnus-sum-thread-tree-root <span class=
"org-string">"■ "</span>)
            (setq gnus-sum-thread-tree-false-root <span class=
"org-string">"▣ "</span>)
            (setq gnus-sum-thread-tree-single-indent <span class=
"org-string">"□ "</span>)
            (setq gnus-sum-thread-tree-vertical <span class=
"org-string">"│   "</span>)
            (setq gnus-sum-thread-tree-indent <span class=
"org-string">"    "</span>)
            (setq gnus-sum-thread-tree-leaf-with-other <span class=
"org-string">"├── "</span>)
            (setq gnus-sum-thread-tree-single-leaf <span class=
"org-string">"└── "</span>))

        (<span class="org-keyword">progn</span> <span class=
"org-comment-delimiter">;; </span><span class=
"org-comment">using ASCII tree layout</span>
          (setq gnus-sum-thread-tree-root <span class="org-string">"* "</span>)
          (setq gnus-sum-thread-tree-false-root <span class=
"org-string">"x "</span>)
          (setq gnus-sum-thread-tree-single-indent <span class=
"org-string">"o "</span>)
          (setq gnus-sum-thread-tree-vertical <span class=
"org-string">"| "</span>)
          (setq gnus-sum-thread-tree-indent <span class=
"org-string">"  "</span>)
          (setq gnus-sum-thread-tree-leaf-with-other <span class=
"org-string">"+-&gt; "</span>)
          (setq gnus-sum-thread-tree-single-leaf <span class=
"org-string">"\\-&gt; "</span>)))

      (<span class="org-keyword">eval-after-load</span> <span class=
"org-string">"message"</span>
        '(<span class="org-keyword">progn</span>
           <span class="org-comment-delimiter">;; </span><span class=
"org-comment">regexp matching alternative email addresses</span>
           (setq message-alternative-emails
                 (concat
                  (regexp-quote <span class=
"org-string">"johndoe@example.com"</span>) <span class=
"org-string">"</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                  (regexp-quote <span class=
"org-string">"janedoe@example.com"</span>)))

           <span class="org-comment-delimiter">;; </span><span class=
"org-comment">`</span><span class="org-comment"><span class=
"org-constant">From</span></span><span class=
"org-comment">' headers that may be suppressed in favor of `</span><span class=
"org-comment"><span class="org-constant">To</span></span><span class=
"org-comment">' headers</span>
           (setq gnus-ignored-from-addresses
                 (concat
                  (regexp-quote user-mail-address) <span class=
"org-string">"</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span> message-alternative-emails))))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">extra headers to parse (to check when matching recipients)</span>
      (<span class="org-keyword">when</span> (boundp 'nnmail-extra-headers)
        (add-to-list 'nnmail-extra-headers 'Cc))

      (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven-gnus-count-recipients</span> (header)
        <span class=
"org-doc">"Given a Gnus message header, returns priority mark.</span>
<span class="org-doc">      If I am the only recipient, return \"!\".</span>
<span class=
"org-doc">      If I am one of the recipients listed in To:, return \"T\".</span>
<span class=
"org-doc">      If I am one of a few recipients, return \"C\".</span>
<span class=
"org-doc">      If I am one of many recipients, return \"*\".</span>
<span class="org-doc">      Else, return \" \"."</span>
        (<span class=
"org-keyword">let*</span> ((to (or (cdr (assoc 'To (mail-header-extra header))) <span class="org-string">""</span>))
               (cc (or (cdr (assoc 'Cc (mail-header-extra header))) <span class="org-string">""</span>)))
          (<span class="org-keyword">cond</span>
           ((and (string-match gnus-ignored-from-addresses to)
                 (fboundp 'bbdb-split))
            (<span class=
"org-keyword">let</span> ((len (length (bbdb-split to <span class=
"org-string">","</span>))))
              (<span class="org-keyword">cond</span>
               ((= len 1) <span class="org-string">"»"</span>)
               (t <span class="org-string">"T"</span>))))
           ((and (string-match gnus-ignored-from-addresses (concat to <span class="org-string">", "</span> cc))
                 (fboundp 'bbdb-split))
            (<span class=
"org-keyword">if</span> (&lt; (length (bbdb-split (concat to <span class=
"org-string">", "</span> cc) <span class="org-string">","</span>)) 5)
                <span class="org-comment-delimiter">;; </span><span class=
"org-comment">number of recipients to consider as large</span>
                <span class="org-string">"C"</span>
              <span class="org-string">"*"</span>))
           (t <span class="org-string">" "</span>))))

      (<span class="org-keyword">defalias</span> '<span class=
"org-function-name">gnus-user-format-function-r</span> 'leuven-gnus-count-recipients)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">format specification for the summary mode line</span>
      (setq gnus-summary-mode-line-format <span class=
"org-string">"%V: %%b"</span>)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-2" class="outline-3">
        <h3 id="sec-4-2">Paging the Article</h3>

        <div class="outline-text-3" id="text-4-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 3.4 (info "(gnus)Paging the Article")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">added some key bindings to the gnus summary mode</span>
      (define-key gnus-summary-mode-map
        (kbd <span class="org-string">"&lt;M-up&gt;"</span>) '(<span class=
"org-keyword">lambda</span> () (scroll-other-window -1)))

      (define-key gnus-summary-mode-map
        (kbd <span class="org-string">"&lt;M-down&gt;"</span>) '(<span class=
"org-keyword">lambda</span> () (scroll-other-window 1)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-3" class="outline-3">
        <h3 id="sec-4-3">Reply, Followup and Post</h3>

        <div class="outline-text-3" id="text-4-3">
          <p>Messages posted via Usenet do not show up in the Emacs bug
          tracker. Avoid to forget about this programmatically!</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 3.5 (info "(gnus)Reply Followup and Post")</span>

      (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven-gnus-summary-followup-with-original</span> ()
        <span class="org-doc">"Force sending messages to `</span><span class=
"org-doc"><span class="org-constant">gnu.emacs.bug</span></span><span class=
"org-doc">' per email."</span>
        (interactive)
        (<span class="org-keyword">if</span> (string-match (rx <span class=
"org-string">"gnu.emacs.bug"</span>) gnus-newsgroup-name)
                                        <span class=
"org-comment-delimiter">; </span><span class=
"org-comment">answer per email</span>
            (call-interactively 'gnus-summary-wide-reply-with-original)
                                        <span class=
"org-comment-delimiter">; </span><span class="org-comment">post via news</span>
          (call-interactively 'gnus-summary-followup-with-original)))

      (with-eval-after-load <span class="org-string">"gnus-sum"</span>
        (define-key gnus-summary-mode-map
          (kbd <span class=
"org-string">"F"</span>) 'leuven-gnus-summary-followup-with-original))
</pre>
          </div>

          <p>Source: Michael Heerdegen.</p>
        </div>
      </div>

      <div id="outline-container-sec-4-4" class="outline-3">
        <h3 id="sec-4-4">Threading</h3>

        <div class="outline-text-3" id="text-4-4">
          <p>Threading is the representation of discussions “as they happen”.
          Use <code>T T</code> to toggle threading.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 3.9 (info "(gnus)Threading")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">gather threads by comparing the Subject header of the articles</span>
      (setq gnus-summary-thread-gathering-function
            'gnus-gather-threads-by-subject)
            <span class="org-comment-delimiter">;; </span><span class=
"org-comment">'gnus-gather-threads-by-references)</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">don't grab old headers to build threads</span>
      (setq gnus-fetch-old-headers nil)
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">nil to speed up (otherwise, it can seriously impact performance)</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">fill in all the gaps to tie loose threads together</span>
      (setq gnus-build-sparse-threads nil) <span class=
"org-comment-delimiter">;; </span><span class="org-comment">was 'some</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">added some key bindings to the gnus summary mode</span>
      (define-key gnus-summary-mode-map
        (kbd <span class=
"org-string">"&lt;C-up&gt;"</span>) 'gnus-summary-prev-thread)
      (define-key gnus-summary-mode-map
        (kbd <span class=
"org-string">"&lt;C-down&gt;"</span>) 'gnus-summary-next-thread)
</pre>
          </div>

          <p>Show/hide threads with <code>&gt;</code> / <code>&lt;</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
(define-key gnus-summary-mode-map
  (kbd <span class="org-string">"&gt;"</span>) 'gnus-summary-show-thread)
(define-key gnus-summary-mode-map
  (kbd <span class="org-string">"&lt;"</span>) 'gnus-summary-hide-thread)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-5" class="outline-3">
        <h3 id="sec-4-5">Sorting the Summary Buffer</h3>

        <div class="outline-text-3" id="text-4-5">
          <p><b>Primary</b> sort key should be the <b>last</b> function in the
          list.</p>

          <p>You should always include <code>gnus-thread-sort-by-number</code>
          in the list, probably as first (least important) element.</p>

          <p>WARNING – Sorting by date is often much slower than sorting by
          number, and the sorting order is very similar.</p>

          <p>The threads with the highest article scores in total are on top in
          my summary buffers. For threads with equal scores, I sort by the most
          recent article in a thread (older before younger, thus the not). If
          that still doesn’t distinguish 2 threads, it’s sorted by article
          number (that should always be included as last element to guarantee a
          total ordering).</p>

          <p>By the way: in mail groups (except for mailing list groups) I
          disable scoring, so there the sorting by recency of youngest message
          in thread is the decision maker. I like that in older-before-younger
          order, because then I read older replies to an article before younger
          replies.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 3.10 (info "(gnus)Sorting the Summary Buffer")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">sort threads in descending article order</span>
      (setq gnus-thread-sort-functions
            '(gnus-thread-sort-by-number
              (not gnus-thread-sort-by-most-recent-date)
              <span class="org-comment-delimiter">;; </span><span class=
"org-comment">gnus-thread-sort-by-total-score</span>
              ))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-6" class="outline-3">
        <h3 id="sec-4-6">Article Caching</h3>

        <div class="outline-text-3" id="text-4-6">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 3.12 (info "(gnus)Article Caching")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">use the cache</span>
      (setq gnus-use-cache t)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; local cache</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(setq gnus-cache-directory (concat gnus-directory "cache/"))</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">entering of articles from the cache</span>
      (setq gnus-cache-enter-articles '(ticked dormant unread read))
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">simple setup for your convenience, if you are using `</span><span class="org-comment"><span class="org-constant">nnimap</span></span><span class="org-comment">' from</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">home, over a dialup connection</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">removing of articles from the cache</span>
      (setq gnus-cache-remove-articles nil)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">cache your nnimap groups</span>
      (setq gnus-cacheable-groups <span class="org-string">"^nnimap"</span>)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">avoid caching your nnml and nnfolder groups</span>
      (setq gnus-uncacheable-groups <span class=
"org-string">"^nnml</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">^nnfolder"</span>)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-7" class="outline-3">
        <h3 id="sec-4-7">Article Treatment</h3>

        <div class="outline-text-3" id="text-4-7">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 3.18 (info "(gnus)Article Treatment")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">change a `\205' figure to "..."</span>
      (add-hook 'gnus-part-display-hook 'article-treat-dumbquotes)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">full shampoo of messages you read</span>
      (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven-gnus-wash-this-article</span> ()
        <span class="org-doc">"Wash an article."</span>
        (interactive)
        (gnus-article-outlook-deuglify-article)
        (gnus-article-fill-cited-article nil '79)
        (gnus-article-capitalize-sentences)
        (message <span class="org-string">"Washed this article"</span>))

      (define-key gnus-summary-mode-map
        (kbd <span class=
"org-string">"C-c w"</span>) 'leuven-gnus-wash-this-article)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">what is to be considered a signature</span>
      (setq gnus-signature-separator
            '(<span class="org-string">"^-- $"</span>         <span class=
"org-comment-delimiter">; </span><span class="org-comment">the standard</span>
              <span class="org-string">"^-- *$"</span>        <span class=
"org-comment-delimiter">; </span><span class=
"org-comment">a common mangling</span>
              <span class="org-string">"^________*$"</span>)) <span class=
"org-comment-delimiter">; </span><span class=
"org-comment">a long line of underscores is also popular</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">limit (in lines, in floating point) to what is considered a signature</span>
      (setq gnus-signature-limit 20.0)

      (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven-prefix-line</span> ()
        <span class="org-doc">"Prefix the current line with `&gt;'."</span>
        (interactive)
        (beginning-of-line)
        (<span class="org-keyword">while</span>
            (<span class="org-keyword">progn</span>
              <span class="org-comment-delimiter">;; </span><span class=
"org-comment">repeat...</span>
              (<span class="org-keyword">if</span> (looking-at <span class=
"org-string">"[&gt;\n]"</span>)
                  (insert <span class="org-string">"&gt;"</span>)
                (insert <span class="org-string">"&gt; "</span>))
              (forward-line 1)
              (beginning-of-line)
              (not
               <span class="org-comment-delimiter">;; </span><span class=
"org-comment">...until blank line found</span>
               (looking-at <span class="org-string">" *$"</span>)))))

      (global-set-key (kbd <span class=
"org-string">"&lt;S-f5&gt;"</span>) 'leuven-prefix-line)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">banners to remove</span>
      (setq gnus-article-address-banner-alist
            '((<span class="org-string">"@yahoo\\.com"</span> .
               <span class=
"org-string">"^__________________+\nDo you Yahoo!\\?\n.*\n.*\n"</span>)
              (<span class="org-string">"@hotmail\\.com</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">@msn.com"</span> .
               <span class=
"org-string">"^_________________________________________________________________\n.*MSN .*\n.*\n"</span>)))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment"><span class=
"org-leuven-highlight">FIXME</span></span><span class="org-comment"> This is under test!</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">L'affichage des messages</span>
      (setq gnus-article-display-hook
            '(gnus-article-hide-headers-if-wanted
              gnus-article-date-lapsed
              gnus-article-hide-pgp
              gnus-article-treat-overstrike
              gnus-article-de-quoted-unreadable
              gnus-article-strip-leading-blank-lines
              gnus-article-remove-trailing-blank-lines
              gnus-article-strip-multiple-blank-lines
              gnus-article-highlight
              gnus-article-highlight-signature
              gnus-article-emphasize
              gnus-article-fill-cited-article))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-8" class="outline-3">
        <h3 id="sec-4-8">MIME Commands</h3>

        <div class="outline-text-3" id="text-4-8">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 3.19 (info "(gnus)MIME Commands")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">rewrite file names of MIME parts (delete control characters, delete</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">shell gotchas, handle evil white spaces)</span>
      (setq mm-file-name-rewrite-functions
            '(mm-file-name-delete-control
              mm-file-name-delete-gotchas
              mm-file-name-trim-whitespace
              mm-file-name-collapse-whitespace
              mm-file-name-replace-whitespace))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-9" class="outline-3">
        <h3 id="sec-4-9">Charsets</h3>

        <div class="outline-text-3" id="text-4-9">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 3.20 (info "(gnus)Charsets")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">permitted unencoded charsets for posting</span>
      (setq gnus-group-posting-charset-alist
            '((message-this-is-news nil (iso-8859-15))))

      (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven-show-article-as-charset</span> ()
        (interactive)
        (message <span class=
"org-string">"Display in: latin-[1], latin-[9]/15, [u]tf-8, [c]p1252"</span>)
        (<span class="org-keyword">let</span> ((answer (read-char)))
          (<span class="org-keyword">cond</span>
           ((eq answer ?1)
            (gnus-summary-show-article-from-menu-as-charset-iso-8859-1))
           ((eq answer ?9)
            (gnus-summary-show-article-from-menu-as-charset-iso-8859-9))
           ((eq answer ?c)
            (gnus-summary-show-article-from-menu-as-charset-cp1252))
           ((eq answer ?u)
            (gnus-summary-show-article-from-menu-as-charset-utf-8))))
        (gnus-summary-rethread-current))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-4-10" class="outline-3">
        <h3 id="sec-4-10">Various Summary Stuff</h3>

        <div class="outline-text-3" id="text-4-10">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 3.27 (info "(gnus)Various Summary Stuff")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">highlight current line in summary buffer</span>
      (add-hook 'gnus-summary-mode-hook 'leuven--hl-line-highlight)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">search forward for an article containing a given regexp</span>
      (define-key gnus-summary-mode-map
        (kbd <span class=
"org-string">"s"</span>) 'gnus-summary-search-article-forward)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">repeat the last search through the articles in the summary buffer</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(without requiring a confirmation of the search string each time)</span>
      (<span class="org-keyword">defun</span> <span class=
"org-function-name">gnus-summary-search-article-forward-next</span> ()
        <span class="org-doc">"Repeat the last forward search."</span>
        (interactive)
        (gnus-summary-search-article-forward gnus-last-search-regexp nil))
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment"><span class="org-leuven-highlight">TODO</span></span><span class=
"org-comment"> `</span><span class="org-comment"><span class=
"org-constant">g-s-s-a-f-next</span></span><span class=
"org-comment">' should be the only function to be called by the</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">user, whether or not the search is made for the first time or a</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">repetition of it</span>

      (define-key gnus-summary-mode-map
        (kbd <span class=
"org-string">"M-s"</span>) 'gnus-summary-search-article-forward-next)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">turn off the column number in the group buffer</span>
      (add-hook 'gnus-summary-mode-hook
                (<span class="org-keyword">lambda</span> ()
                  (set (make-local-variable 'column-number-mode) nil)))
</pre>
          </div>
        </div>

        <div id="outline-container-sec-4-10-1" class="outline-4">
          <h4 id="sec-4-10-1"><a href=
          "http://www.emacswiki.org/emacs/GnusStripes">Gnus Stripes</a></h4>

          <div class="outline-text-4" id="text-4-10-1">
            <p>The following does work, but hides the read background for read
            postings, as the stripe background is superimposed on my “read”
            background.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
     <span class="org-comment-delimiter">;;  </span><span class=
"org-comment">;; the color of the stripes is obtained by dimming the frame background color</span>
     <span class="org-comment-delimiter">;;  </span><span class=
"org-comment">(defvar stripe-intensity 12</span>
     <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">"*intensity of the shade. Used to compute the color of the stripes.</span>
     <span class="org-comment-delimiter">;; </span><span class=
"org-comment">0 means no shading of the background color, nil means gray80")</span>
     <span class="org-comment-delimiter">;;</span>
     <span class="org-comment-delimiter">;;  </span><span class=
"org-comment">;; a command that computes the rgb code of the shaded background color</span>
     <span class="org-comment-delimiter">;;  </span><span class=
"org-comment">(defun shade-color (intensity)</span>
     <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">"print the #rgb color of the background, dimmed according to intensity"</span>
     <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">(interactive "nIntensity of the shade : ")</span>
     <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">(apply 'format "#%02x%02x%02x"</span>
     <span class="org-comment-delimiter">;;           </span><span class=
"org-comment">(mapcar (lambda (x)</span>
     <span class=
"org-comment-delimiter">;;                     </span><span class=
"org-comment">(if (&gt; (lsh x -8) intensity)</span>
     <span class=
"org-comment-delimiter">;;                         </span><span class=
"org-comment">(- (lsh x -8) intensity)</span>
     <span class=
"org-comment-delimiter">;;                       </span><span class=
"org-comment">0))</span>
     <span class=
"org-comment-delimiter">;;                   </span><span class=
"org-comment">(color-values (cdr (assoc 'background-color (frame-parameters)))))))</span>
     <span class="org-comment-delimiter">;;</span>
     <span class="org-comment-delimiter">;;  </span><span class=
"org-comment">;; the command that actually puts the stripes in the current buffer</span>
     <span class="org-comment-delimiter">;;  </span><span class=
"org-comment">(defun stripe-alternate ()</span>
     <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">"stripes all down the current buffer"</span>
     <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">(interactive)</span>
     <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">;; compute the color of the stripes from the value of stripe-intensity</span>
     <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">(if stripe-intensity</span>
     <span class="org-comment-delimiter">;;        </span><span class=
"org-comment">(setq stripe-overlay-face (shade-color stripe-intensity))</span>
     <span class="org-comment-delimiter">;;      </span><span class=
"org-comment">(setq stripe-overlay-face "gray80"))</span>
     <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">;; put the overlay in the current buffer</span>
     <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">(save-excursion</span>
     <span class="org-comment-delimiter">;;      </span><span class=
"org-comment">(goto-char (point-min))</span>
     <span class="org-comment-delimiter">;;      </span><span class=
"org-comment">(let (stripe-overlay)</span>
     <span class="org-comment-delimiter">;;        </span><span class=
"org-comment">(while (not (eobp))</span>
     <span class="org-comment-delimiter">;;          </span><span class=
"org-comment">(forward-line)</span>
     <span class="org-comment-delimiter">;;          </span><span class=
"org-comment">(setq stripe-overlay</span>
     <span class="org-comment-delimiter">;;                </span><span class=
"org-comment">(make-overlay (line-beginning-position)</span>
     <span class=
"org-comment-delimiter">;;                              </span><span class=
"org-comment">(line-beginning-position 2)))</span>
     <span class="org-comment-delimiter">;;          </span><span class=
"org-comment">(overlay-put stripe-overlay 'face (list :background stripe-overlay-face))</span>
     <span class="org-comment-delimiter">;;          </span><span class=
"org-comment">(overlay-put stripe-overlay 'priority -1)</span>
     <span class="org-comment-delimiter">;;          </span><span class=
"org-comment">(forward-line)))))</span>
     <span class="org-comment-delimiter">;;</span>
     <span class="org-comment-delimiter">;;  </span><span class=
"org-comment">;; activate the stripes for the mail buffers only</span>
     <span class="org-comment-delimiter">;;  </span><span class=
"org-comment">(add-hook 'gnus-summary-prepare-hook (lambda ()</span>
     <span class=
"org-comment-delimiter">;;                                         </span><span class="org-comment">(with-current-buffer gnus-summary-buffer</span>
     <span class=
"org-comment-delimiter">;;                                           </span><span class="org-comment">;; (unless (gnus-news-group-p gnus-newsgroup-name)</span>
     <span class=
"org-comment-delimiter">;;                                             </span><span class="org-comment">(stripe-alternate))))</span>
     <span class="org-comment-delimiter">;;  </span><span class=
"org-comment">;; )</span>

      (message <span class="org-string">"3 Summary Buffer... Done"</span>))
</pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-5" class="outline-2">
      <h2 id="sec-5">Article Buffer</h2>

      <div class="outline-text-2" id="text-5">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* 4 (info "(gnus)The Article Buffer")</span>

(<span class="org-keyword">when</span> leuven-section-article-buffer
      (message <span class="org-string">"4 Article Buffer..."</span>)
</pre>
        </div>
      </div>

      <div id="outline-container-sec-5-1" class="outline-3">
        <h3 id="sec-5-1">Hiding headers</h3>

        <div class="outline-text-3" id="text-5-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 4.1 Hiding headers</span>

      (<span class="org-keyword">eval-after-load</span> <span class=
"org-string">"gnus-art"</span>
        '(<span class="org-keyword">progn</span>
           <span class="org-comment-delimiter">;; </span><span class=
"org-comment"><span class="org-leuven-highlight">TODO</span></span><span class=
"org-comment"> Could be limited to news headers only</span>
           (setq gnus-visible-headers
                 (concat
                 <span class="org-string">"^User-Agent:</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">^X-Spam-Level:</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">^X-Report-Spam:</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                 gnus-visible-headers))

           <span class="org-comment-delimiter">;; </span><span class=
"org-comment">when Gnus, highlight user agent</span>
           (add-to-list
            'gnus-header-face-alist
            (list (concat
                   <span class="org-string">"^"</span>
                   (regexp-opt '(<span class=
"org-string">"User-Agent"</span> <span class=
"org-string">"X-Mailer"</span> <span class=
"org-string">"Newsreader"</span> <span class=
"org-string">"X-Newsreader"</span>) t)
                   <span class="org-string">":.*Gnus.*"</span>)
                  nil 'gnus-server-opened))))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">,----[ (info "(gnus)Choosing Commands") ]</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">| `G j'</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">| `j'</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">|      Ask for an article number or `</span><span class=
"org-comment"><span class="org-constant">Message-ID</span></span><span class=
"org-comment">', and then go to that</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">|      article (`</span><span class="org-comment"><span class=
"org-constant">gnus-summary-goto-article</span></span><span class=
"org-comment">').</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">`----</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">&gt; At the moment, I am appending the `</span><span class=
"org-comment"><span class="org-constant">Message-ID</span></span><span class=
"org-comment">' to</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">&gt; `</span><span class="org-comment"><span class=
"org-constant">http://groups.google.com/groups?selm=</span></span><span class=
"org-comment">' to get the target URL, but this</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">&gt; does not work reliably.</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">auxiliary article mode commands for Gnus</span>
      (<span class=
"org-keyword">when</span> (try-require 'rs-gnus-article-<span class=
"org-leuven-highlight">XXX</span>)
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment"><span class=
"org-leuven-highlight">FIXME</span></span><span class="org-comment"> Break my 2-column display for the mails (summary | article)</span>

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">initialization</span>
        (rs-gnus-buttons)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(defun rs-gnus-button-browse-mid (mid)</span>
        <span class="org-comment-delimiter">;;   </span><span class=
"org-comment">"Browse MID on Google or Gmane."</span>
        <span class="org-comment-delimiter">;;   </span><span class=
"org-comment">(message "mid=`</span><span class="org-comment"><span class=
"org-constant">%s</span></span><span class="org-comment">'" mid)</span>
        <span class="org-comment-delimiter">;;   </span><span class=
"org-comment">(browse-url (concat</span>
        <span class=
"org-comment-delimiter">;;                </span><span class=
"org-comment">(if (string-match "\\bgmane\\." gnus-newsgroup-name)</span>
        <span class=
"org-comment-delimiter">;;                    </span><span class=
"org-comment">"http://thread.gmane.org/31"</span>
        <span class=
"org-comment-delimiter">;;                  </span><span class=
"org-comment">"http://groups.google.com/groups?as_umsgid=32")</span>
        <span class=
"org-comment-delimiter">;;                </span><span class=
"org-comment">mid)))</span>

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">open the article in the browser when clicking (or using `</span><span class="org-comment"><span class="org-constant">RET</span></span><span class="org-comment">') on a</span>
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">mid in `</span><span class="org-comment"><span class=
"org-constant">References</span></span><span class=
"org-comment">' and `</span><span class="org-comment"><span class=
"org-constant">Message-ID</span></span><span class=
"org-comment">' headers</span>
        (add-to-list
         'gnus-header-button-alist
         '(<span class="org-string">"^</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">(</span></span><span class=
"org-string">References</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Message-I[Dd]</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">)</span></span><span class=
"org-string">:"</span> <span class="org-string">"&lt;</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">(</span></span><span class=
"org-string">[</span><span class="org-string"><span class=
"org-negation-char">^</span></span><span class=
"org-string">&lt;&gt;]+</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">)</span></span><span class=
"org-string">&gt;"</span>
           1 (&gt;= gnus-button-message-level 0) rs-gnus-button-browse-mid 1)
         t)) <span class="org-comment-delimiter">;; </span><span class=
"org-comment">append!</span>

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 4.2 (info "(gnus)Using MIME")</span>

      (message <span class="org-string">"Emacs MIME..."</span>)
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-6" class="outline-2">
      <h2 id="sec-6">Emacs MIME</h2>

      <div class="outline-text-2" id="text-6">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* (info "(emacs-mime)Top")</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-6-1" class="outline-3">
        <h3 id="sec-6-1">Decoding and Viewing</h3>

        <div class="outline-text-3" id="text-6-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 1 (info "(emacs-mime)Decoding and Viewing")</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-2" class="outline-3">
        <h3 id="sec-6-2">Non-MIME</h3>

        <div class="outline-text-3" id="text-6-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 1.2 (info "(emacs-mime)Non-MIME")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">regexp of Emacs sources groups</span>
      (setq mm-uu-emacs-sources-regexp <span class="org-string">"emacs"</span>)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">regexp matching diff groups</span>
      (setq mm-uu-diff-groups-regexp <span class="org-string">".*"</span>)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">regexp matching TeX groups</span>
      (setq mm-uu-tex-groups-regexp <span class="org-string">".*"</span>)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-3" class="outline-3">
        <h3 id="sec-6-3">Display Customization</h3>

        <div class="outline-text-3" id="text-6-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 1.5 (info "(emacs-mime)Display Customization")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">You can view "text/html" parts of the current article with a WWW</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">browser by pressing `K H' (`</span><span class=
"org-comment"><span class=
"org-constant">gnus-article-browse-html-article</span></span><span class=
"org-comment">')</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; MIME type that will be displayed externally automatically</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(add-to-list 'mm-automatic-external-display "text/html")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">do not treat inline images as real attachments (display them,</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">instead)</span>
      (add-to-list 'mm-attachment-override-types <span class=
"org-string">"image/.*"</span>)
                                        <span class=
"org-comment-delimiter">; </span><span class=
"org-comment">"text/x-vcard"...</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">don't render HTML automatically *when plain text alternative is</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">available*</span>
      (<span class="org-keyword">eval-after-load</span> <span class=
"org-string">"mm-decode"</span>
        '(<span class="org-keyword">progn</span>
           (add-to-list 'mm-discouraged-alternatives <span class=
"org-string">"text/html"</span>)
           (add-to-list 'mm-discouraged-alternatives <span class=
"org-string">"text/richtext"</span>)
           (add-to-list 'mm-discouraged-alternatives <span class=
"org-string">"text/enriched"</span>)
           (add-to-list 'mm-discouraged-alternatives <span class=
"org-string">"multipart/related"</span>)))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">all images fit in the buffer</span>
      (setq mm-inline-large-images t)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; always show HTML mails as attachments (even if they can be</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; displayed) use `</span><span class="org-comment"><span class=
"org-constant">browse-url-browser-function</span></span><span class=
"org-comment">' (firefox) to render</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; HTML mails</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(push "text/html" mm-inline-override-types)</span>


      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">use `</span><span class="org-comment"><span class=
"org-constant">w3m</span></span><span class=
"org-comment">' browser (if installed) to render HTML-only mails</span>
      (setq mm-text-html-renderer
            (<span class=
"org-keyword">cond</span> ((executable-find <span class=
"org-string">"w3m"</span>) 'w3m) <span class=
"org-comment-delimiter">;; </span><span class=
"org-comment">or `</span><span class="org-comment"><span class=
"org-constant">gnus-w3m</span></span><span class="org-comment">'?</span>
                  (t 'html2text))) <span class=
"org-comment-delimiter">;; </span><span class=
"org-comment">Emacs built-in</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">recent Gnusae have a built-in HTML renderer which even (somewhat)</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">handles CSS</span>
      (setq mm-text-html-renderer 'shr)


      (<span class="org-keyword">eval-after-load</span> <span class=
"org-string">"w3m"</span>
        '(<span class="org-keyword">progn</span>
           <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(setq browse-url-browser-function 'w3m-browse-url)</span>
           (setq mm-inline-text-html-renderer
                 'mm-inline-text-html-render-with-w3m)
           (setq gnus-article-wash-function
                 'gnus-article-wash-html-with-w3m)

           <span class="org-comment-delimiter">;; </span><span class=
"org-comment">Whenever you try to browse URLs found in articles, Gnus</span>
           <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(`</span><span class="org-comment"><span class=
"org-constant">emacs-w3m</span></span><span class=
"org-comment">', in fact) complains that "This link is considered</span>
           <span class="org-comment-delimiter">;; </span><span class=
"org-comment">unsafe...". To turn it off, frob the variables</span>
           <span class="org-comment-delimiter">;; </span><span class=
"org-comment">`</span><span class="org-comment"><span class=
"org-constant">w3m-safe-url-regexp</span></span><span class=
"org-comment">' and `</span><span class="org-comment"><span class=
"org-constant">mm-w3m-safe-url-regexp</span></span><span class=
"org-comment">'.</span>
           ))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">allow retrieving images in HTML contents with the &lt;img&gt; tags</span>
      (setq mm-inline-text-html-with-images t)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">Remove HTML tags from a buffer</span>
      (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven-wash-ugly-html</span> ()
        <span class="org-doc">"Remove ugly HTML tags."</span>
        (interactive)
        (toggle-read-only -1)
        (<span class="org-keyword">save-excursion</span>
          (goto-char (point-min))
          (<span class=
"org-keyword">while</span> (re-search-forward <span class=
"org-string">"&lt;[</span><span class="org-string"><span class=
"org-negation-char">^</span></span><span class=
"org-string">#][</span><span class="org-string"><span class=
"org-negation-char">^</span></span><span class=
"org-string">&lt;@&gt;]*&gt;"</span> nil t)
            (replace-match <span class="org-string">""</span> nil nil))
          (goto-char (point-min))
          (<span class=
"org-keyword">while</span> (re-search-forward <span class=
"org-string">"&amp;gt;"</span> nil t)
            (replace-match <span class="org-string">"&gt;"</span> nil nil))
          (goto-char (point-min))
          (<span class=
"org-keyword">while</span> (re-search-forward <span class=
"org-string">"&amp;lt;"</span> nil t)
            (replace-match <span class="org-string">"&lt;"</span> nil nil))

          <span class="org-comment-delimiter">;; </span><span class=
"org-comment"><span class=
"org-leuven-highlight">FIXME</span></span><span class="org-comment"> Do not simply remove accents like it does now</span>
          (goto-char (point-min))
          (<span class=
"org-keyword">while</span> (re-search-forward <span class=
"org-string">"&amp;[</span><span class="org-string"><span class=
"org-negation-char">^</span></span><span class="org-string">;]*;"</span> nil t)
            (replace-match <span class="org-string">""</span> nil nil))))

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 1.6 (info "(emacs-mime)Files and Directories")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">default directory for saving attachments</span>
      (setq mm-default-directory <span class="org-string">"~/Desktop/"</span>)
      (setq mm-default-directory <span class=
"org-string">"~/"</span>) <span class=
"org-comment-delimiter">; </span><span class="org-comment"><span class=
"org-leuven-highlight">FIXME</span></span><span class=
"org-comment"> Temp on temp pc</span>

      (<span class=
"org-keyword">when</span> (fboundp 'leuven-make-directory-yes-or-no)
        (leuven-make-directory-yes-or-no mm-default-directory))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">directory for storing temporary files (opened attachments as well)</span>
      (setq mm-tmp-directory temporary-file-directory)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-4" class="outline-3">
        <h3 id="sec-6-4">Composing</h3>

        <div class="outline-text-3" id="text-6-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 2 (info "(emacs-mime)Composing")</span>

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 2.4 (info "(emacs-mime)Encoding Customization")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">preferred coding systems for encoding outgoing messages</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">ensure that utf-8 is chosen over iso-latin-9 and latin-1, if possible</span>
      (setq mm-coding-system-priorities
            '(utf-8
              iso-latin-9
              iso-latin-1))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-6-5" class="outline-3">
        <h3 id="sec-6-5">Basic Functions</h3>

        <div class="outline-text-3" id="text-6-5">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 4 (info "(emacs-mime)Basic Functions")</span>

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 4.12 (info "(emacs-mime)mailcap")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">choose the right MIME type when sending an attachment</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">MIME content-types keyed by file extensions</span>
      (<span class="org-keyword">eval-after-load</span> <span class=
"org-string">"mailcap"</span>
        '(<span class="org-keyword">progn</span>
           (add-to-list 'mailcap-mime-extensions
                        '(<span class="org-string">".doc"</span> . <span class=
"org-string">"application/msword"</span>))
           (add-to-list 'mailcap-mime-extensions
                        '(<span class="org-string">".ppt"</span> . <span class=
"org-string">"application/vnd.ms-powerpoint"</span>))))


      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">&gt; which settings do you have to see PDF attachments as text,</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">&gt; automagically? Does it work as well for DOC, XLS and PPT?</span>
      <span class="org-comment-delimiter">;;</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">not here, but I think it's customizable. You need to have the</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">programs installed, of course. The variable to look at is</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">mailcap-mime-data. It is not customizable, but see</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">http://www.gnus.org/manual/emacs-mime_30.html</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-7" class="outline-2">
      <h2 id="sec-7">Back to Article Buffer</h2>

      <div class="outline-text-2" id="text-7">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 4.4 (info "(gnus)Customizing Articles")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(require 'gnus-art)</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">add buttons</span>
      (setq gnus-treat-buttonize t)
      (setq gnus-treat-buttonize-head 'head)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">do not display smileys as pictures</span>
      (setq gnus-treat-display-smileys nil)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">sound</span>
      (setq gnus-treat-play-sounds t)
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 4.6 (info "(gnus)Misc Article")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">format specification for the article mode line</span>
      (setq gnus-article-mode-line-format <span class=
"org-string">"%S%m"</span>)

      (message <span class="org-string">"4 Article Buffer... Done"</span>))
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">make C-c C-f active from within messages</span>
(define-key gnus-article-mode-map
  (kbd <span class="org-string">"C-c C-f"</span>) 'gnus-summary-mail-forward)
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-8" class="outline-2">
      <h2 id="sec-8">Composing Messages</h2>

      <div class="outline-text-2" id="text-8">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* 5 (info "(gnus)Composing Messages")</span>

(<span class="org-keyword">when</span> leuven-section-composing-messages
      (message <span class="org-string">"5 Composing Messages..."</span>)
</pre>
        </div>
      </div>

      <div id="outline-container-sec-8-1" class="outline-3">
        <h3 id="sec-8-1">Mail</h3>

        <div class="outline-text-3" id="text-8-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 5.1 (info "(gnus)Mail")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">Gnus requests confirmation when replying to news (unlike mail)</span>
      (setq gnus-confirm-mail-reply-to-news t)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-8-2" class="outline-3">
        <h3 id="sec-8-2">Posting Server</h3>

        <div class="outline-text-3" id="text-8-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 5.2 (info "(gnus)Posting Server")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">control the hostname sent in the first EHLO or HELO command sent to</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">the server (client sends `EHLO CLARK.smtpmail-local-domain')</span>
      (setq smtpmail-local-domain <span class=
"org-string">"i-did-not-set--mail-host-address--so-tickle-me"</span>)
                                        <span class=
"org-comment-delimiter">;         </span><span class=
"org-comment">^^^^^^^^^^^^^^^^^</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">make the SMTP library add `@' and the specified domain name to</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">recipients specified in the message when they are sent using the RCPT</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">TO command (or when we simply enter an email address without its</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">domain extension)</span>
      (setq smtpmail-sendto-domain <span class="org-string">"local"</span>)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">print info in buffer *trace of SMTP session to &lt;somewhere&gt;*</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">only to debug problems</span>
      (setq smtpmail-debug-info t)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">send the SMTP VERB command (enabling verbose information from the</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">SMTP server)</span>
      (setq smtpmail-debug-verb t)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-8-3" class="outline-3">
        <h3 id="sec-8-3">Archived Messages</h3>

        <div class="outline-text-3" id="text-8-3">
          <p>The <code>Gcc:</code> header is about in which group to save the
          messages you’ve written.</p>

          <p><code>gnus-message-archive-group</code> specifies which (if any)
          <code>Gcc:</code> header is inserted when a message buffer is
          <b>created</b>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">group in which to save the messages you've written</span>
(setq gnus-message-archive-group <span class=
"org-string">"nnimap+mail:INBOX.Sent"</span>)
</pre>
          </div>

          <p>The <code>Gcc:</code> header at the time of <b>sending</b> the
          message specifies where it is archived.</p>

          <p>If you want to be asked for each <b>message to be sent</b>, you
          can change the <code>Gcc:</code> header in the
          <code>message-send-hook</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 5.5 (info "(gnus)Archived Messages")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">the Gcc Header specifies a local mail box that receives a copy of the</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">sent article</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">"Gcc:"-chooser, from Christoph Conrad</span>
      (<span class="org-keyword">defvar</span> <span class=
"org-variable-name">header-gcc-history</span> nil)
      (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven-choose-gcc</span>()
        (interactive)
        (<span class="org-keyword">let*</span> (<span class=
"org-comment-delimiter">;; </span><span class=
"org-comment">if this "group" is chosen the default "Gcc" remains</span>
               (default <span class="org-string">"nnimap+mail:INBOX"</span>)
               <span class="org-comment-delimiter">;; </span><span class=
"org-comment">if this "group" is chosen the default "Gcc" is deleted</span>
               (delete <span class=
"org-string">"nnimap+mail:INBOX.Trash"</span>)
               <span class="org-comment-delimiter">;; </span><span class=
"org-comment">else the choosen group is inserted as "Gcc:"</span>
               (groups (append gnus-newsrc-alist (list (list default 'dummy)
                                                       (list delete  'dummy))))
               (group (completing-read <span class="org-string">"Gcc: "</span>
                                       groups
                                       nil t default 'header-gcc-history))
               (completion-ignore-case t))
          <span class="org-comment-delimiter">;; </span><span class=
"org-comment">input?</span>
          (<span class="org-keyword">if</span> (not (equal default group))
              (<span class="org-keyword">progn</span>
                (message-remove-header <span class="org-string">"Gcc"</span> t)
                (<span class="org-keyword">if</span> (not (equal delete group))
                    (message-add-header (concat <span class=
"org-string">"Gcc: "</span> group)))))))

      (add-hook 'message-send-hook 'leuven-choose-gcc)
</pre>
          </div>

          <p>I use it in such a way that, in all my IMAP mail groups, mails I
          write automatically end up in the group I wrote from.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">automatically mark Gcc articles (i.e., sent by myself) as read</span>
      (setq gnus-gcc-mark-as-read t)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-8-4" class="outline-3">
        <h3 id="sec-8-4">Posting Styles</h3>

        <div class="outline-text-3" id="text-8-4">
          <p>Concept of “roles” in mutt.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 5.6 (info "(gnus)Posting Styles")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">an alternative to `</span><span class="org-comment"><span class=
"org-constant">gnus-posting-styles</span></span><span class=
"org-comment">', if you want to change</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">accounts on the fly while composing messages</span>
      (autoload 'gnus-alias-determine-identity <span class=
"org-string">"gnus-alias"</span> nil t)
      (add-hook 'message-setup-hook 'gnus-alias-determine-identity)

      (<span class="org-keyword">eval-after-load</span> <span class=
"org-string">"gnus-alias"</span>
        '(<span class="org-keyword">progn</span>

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; add gnus-alias call to message mode hook</span>
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(gnus-alias-init)</span>

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">added one key binding</span>
        (define-key message-mode-map
          (kbd <span class=
"org-string">"C-c p"</span>) 'gnus-alias-select-identity)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">set up my identities</span>
        (setq gnus-alias-identity-alist
              '((<span class="org-string">"John-Doe-ID"</span>
                 <span class="org-string">""</span>
                 <span class="org-string">"John Doe <a href=
"mailto:johndoe%40example.com">&lt;johndoe@example.com&gt;</a>"</span>
                 <span class="org-string">"John Doe"</span>
                 ((<span class="org-string">"X-Url"</span> . <span class=
"org-string">"http://www.example.com/~john"</span>))
                 <span class="org-string">"\nJohn\n"</span>
                 <span class="org-string">"John Doe"</span>)

                (<span class="org-string">"Jane-Doe-ID"</span>
                 <span class="org-string">""</span>
                 <span class="org-string">"Jane Doe <a href=
"mailto:janedoe%40example.com">&lt;janedoe@example.com&gt;</a>"</span>
                 <span class="org-string">"Jane Doe"</span>
                 ((<span class="org-string">"X-Url"</span> . <span class=
"org-string">"Under construction..."</span>))
                 <span class="org-string">"\nBest regards,\n  Jane\n"</span>
                 <span class="org-string">"Jane Doe"</span>)))

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">automatically choose an identity given the message context</span>
        (setq gnus-alias-identity-rules
              '((<span class="org-string">"Newsgroups-Rule"</span>
                 (<span class="org-string">"newsgroups"</span> <span class=
"org-string">".*"</span> current)
                 <span class="org-string">"John-Doe-ID"</span>)

                (<span class="org-string">"John-Doe-Rule"</span>
                 (<span class="org-string">"any"</span> <span class=
"org-string">"johndoe@example.com"</span> both)
                 <span class="org-string">"John-Doe-ID"</span>)

                (<span class="org-string">"Jane-Doe-Rule"</span>
                 (<span class="org-string">"any"</span> <span class=
"org-string">"janedoe@example.com"</span> both)
                 <span class="org-string">"Jane-Doe-ID"</span>)))

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">identity to use when gnus-alias finds an unknown identity</span>
        (setq gnus-alias-unknown-identity-rule '<span class=
"org-leuven-highlight">error</span>)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">default identity (when it isn't able to determine which identity to</span>
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">use)</span>
        (setq gnus-alias-default-identity <span class=
"org-string">"John-Doe-ID"</span>)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">old identity is completely removed before the new one is added</span>
        (setq gnus-alias-overlay-identities nil)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">allow your `</span><span class="org-comment"><span class=
"org-constant">Return-Path</span></span><span class=
"org-comment">' to be set properly</span>
        (setq gnus-alias-override-user-mail-address t)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">after an Identity is used, where should point be moved to?</span>
        (setq gnus-alias-point-position 'start-of-sig)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">`</span><span class="org-comment"><span class=
"org-constant">From</span></span><span class=
"org-comment">' header becomes a button that you can click on</span>
        (setq gnus-alias-use-buttonized-from t)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">level of verbosity -- message output only (see `*gnus-alias debug*'</span>
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">buffer, when maximum verbosity)</span>
        (setq gnus-alias-verbosity 1)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">set message envelope to content of `</span><span class=
"org-comment"><span class="org-constant">From</span></span><span class=
"org-comment">'</span>
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment"><span class="org-leuven-highlight">XXX</span></span><span class=
"org-comment"> see `</span><span class="org-comment"><span class=
"org-constant">mail-specify-envelope-from</span></span><span class=
"org-comment">'</span>
        (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven-set-msg-envelope-from</span>()
          <span class="org-doc">"Set `</span><span class="org-doc"><span class=
"org-constant">mail-envelope-from</span></span><span class=
"org-doc">' to the value in the \"From\" field."</span>
          (<span class=
"org-keyword">let*</span> ((from (message-fetch-field <span class=
"org-string">"From"</span> t))
                 (first (1+ (string-match <span class=
"org-string">"&lt;"</span> from)))
                 (last (string-match <span class=
"org-string">"&gt;"</span> from)))
            (setq mail-envelope-from (substring from first last))))

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; alternative for FPZ??</span>
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(defun leuven-set-msg-envelope-from ()</span>
        <span class="org-comment-delimiter">;;   </span><span class=
"org-comment">(let ((from (cadr</span>
        <span class=
"org-comment-delimiter">;;                </span><span class=
"org-comment">(mail-extract-address-components</span>
        <span class=
"org-comment-delimiter">;;                 </span><span class=
"org-comment">(message-field-value "from")))))</span>
        <span class="org-comment-delimiter">;;       </span><span class=
"org-comment">(setq mail-envelope-from from)))</span>

        (add-hook 'message-setup-hook 'leuven-set-msg-envelope-from)
        ))
</pre>
          </div>
        </div>

        <div id="outline-container-sec-8-4-1" class="outline-4">
          <h4 id="sec-8-4-1">Multiple servers</h4>

          <div class="outline-text-4" id="text-8-4-1">
            <p>Let Gnus decide which SMTP server should be used for sending
            email by looking at XXX.</p>

            <p>See <a href=
            "http://www.emacswiki.org/emacs/MultipleSMTPAccounts">http://www.emacswiki.org/emacs/MultipleSMTPAccounts</a>
            for looking at the <code>From:</code> header line of the current
            post.</p>
          </div>
        </div>

        <div id="outline-container-sec-8-4-2" class="outline-4">
          <h4 id="sec-8-4-2">Headers</h4>

          <div class="outline-text-4" id="text-8-4-2">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">add certain headers before sending messages</span>
      (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven-message-add-content</span> ()
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">for Gmane address obfuscation</span>
        (message-add-header <span class=
"org-string">"X-Archive: encrypt"</span>))

      (add-hook 'message-send-hook 'leuven-message-add-content)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
      (message <span class="org-string">"5 Composing Messages... Done"</span>))
</pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-9" class="outline-2">
      <h2 id="sec-9">Message</h2>

      <div class="outline-text-2" id="text-9">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* (info "(message)Top")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">Message mode has become the default mail editing mode in Emacs 23.2+</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(used by Gnus and RMail, at least)</span>

(<span class="org-keyword">when</span> leuven-section-message
      (message <span class="org-string">"Message..."</span>)
</pre>
        </div>
      </div>

      <div id="outline-container-sec-9-1" class="outline-3">
        <h3 id="sec-9-1">Interface</h3>

        <div class="outline-text-3" id="text-9-1">
          <p>&gt; Is there a way to configure multiple addresses?</p>

          <p>Yes. There are a couple of variables for that. I use a code piece
          like the one below to set the variables.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    (<span class="org-keyword">let</span> ((addr '(<span class=
"org-string">"primary.address@somewhere.invalid"</span>
                  <span class="org-string">"another.address@isp.invalid"</span>
                  <span class=
"org-string">"yet.another@address.invalid"</span>)))

      (setq-default
       user-mail-address (car addr)
       message-alternative-emails (regexp-opt (cdr addr) 'words)
       message-dont-reply-to-names (regexp-opt addr 'words)
       gnus-ignored-from-addresses message-dont-reply-to-names))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 1 (info "(message)Interface")</span>

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 1.1 (info "(message)New Mail Message")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">keyboard macro to prepare a mail from the current buffer</span>
      (fset 'leuven-mail-this-buffer <span class=
"org-comment-delimiter">;; </span><span class="org-comment"><span class=
"org-leuven-highlight">XXX</span></span><span class=
"org-comment"> does not work</span>
            <span class=
"org-string">"\C-xh\M-w\M-xmail\C-m\C-c\C-t\C-y\C-c\C-f\C-t"</span>)

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 1.4 (info "(message)Wide Reply")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">addresses to prune (disable `</span><span class=
"org-comment"><span class="org-constant">Cc:</span></span><span class=
"org-comment">' to myself) when doing wide replies</span>
      (<span class="org-keyword">eval-after-load</span> <span class=
"org-string">"message"</span>
        (<span class=
"org-keyword">when</span> (boundp 'gnus-ignored-from-addresses)
          (setq message-dont-reply-to-names gnus-ignored-from-addresses)))

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 1.8 (info "(message)Forwarding")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">delimiter inserted before forwarded messages</span>
      (setq message-forward-start-separator <span class=
"org-string">"-----Original Message-----\n"</span>)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">delimiter inserted after forwarded messages</span>
      (setq message-forward-end-separator <span class="org-string">"\n"</span>)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">when forwarding mail, chop off these headers</span>
      (setq message-forward-ignored-headers
            (concat <span class="org-string">"^</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">(</span></span><span class=
"org-string">"</span>
                    <span class="org-comment-delimiter">;; </span><span class=
"org-comment"><span class=
"org-leuven-highlight">FIXME</span></span><span class="org-comment"> Rewrite the following in a shorter way</span>
                    <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(mapconcat 'regexp-quote</span>
                    <span class=
"org-comment-delimiter">;;            </span><span class=
"org-comment">'("Content-Class" "Content-language" "DKIM-Signature"</span>
                    <span class=
"org-comment-delimiter">;;              </span><span class=
"org-comment">"Delivered-To" "Disposition-Notification-To")</span>
                    <span class=
"org-comment-delimiter">;;            </span><span class=
"org-comment">"\\|")</span>

                    <span class="org-string">"Approved</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Archived-At</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Authentication-Results</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class=
"org-string">"Accept-Language</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">acceptlanguage</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Auto-Submitted</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"BCc</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"Cancel-Lock</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Content-Class</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Content-language</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"DKIM-Signature</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Delivered-To</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class=
"org-string">"Disposition-Notification-To</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">DomainKey-Signature</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"Envelope-to</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string"><span class="org-leuven-highlight">Error</span></span><span class=
"org-string">s-To</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"Face</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"Importance</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">In-Reply-To</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"Lines</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">List-.*</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"Message-Id</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class=
"org-string">"NNTP-Posting-Date</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">NNTP-Posting-Host</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"Organization</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Original-.*</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"Path</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Precedence</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Priority</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"Received-SPF</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Received</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">References</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Reply-To</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"Return-Path</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Return-Receipt-To</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"Sender</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Sensitivity</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"Thread-Index</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">Thread-Topic</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"User-Agent</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string">"</span>
                    <span class="org-string">"X.*"</span>
                    <span class="org-string">"</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">)</span></span><span class=
"org-string">:"</span>))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">subject of article with 'Fwd:' prepended to it, for forwarded</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">messages</span>
      (setq message-make-forward-subject-function
            'message-forward-subject-fwd)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">forwarded messages will just be copied inline to the new message</span>
      (setq message-forward-as-mime nil)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-9-2" class="outline-3">
        <h3 id="sec-9-2">Commands</h3>

        <div class="outline-text-3" id="text-9-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 2 (info "(message)Commands")</span>

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 2.4 (info "(message)Insertion")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">name of file containing the signature</span>
      (setq message-signature-file <span class=
"org-string">"~/Mail/signatures/johndoe"</span>)
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">this file must exist (otherwise, you get misplaced headers when</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">switching between personalities (see `</span><span class=
"org-comment"><span class="org-constant">gnus-alias</span></span><span class=
"org-comment">')</span>

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 2.8 (info "(message)Various Commands")</span>

      (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven-gnus-obfuscate-email</span> (username)
        <span class="org-doc">"Wrapper for email address obfuscation."</span>
        (apply 'leuven-mail-obfuscate-address
               (list username
                     (<span class=
"org-keyword">cond</span> ((string-equal leuven-system <span class=
"org-string">"slac"</span>)
                            <span class=
"org-string">"generic@slac.stanford.edu"</span>)
                           ((string-equal leuven-system <span class=
"org-string">"gnu"</span>)
                            <span class="org-string">"generic@gnu.org"</span>)
                           (t
                            <span class=
"org-string">"generic@ast.cam.ac.uk"</span>)))))

      (<span class="org-keyword">when</span> (<span class=
"org-keyword">require</span> '<span class="org-constant">gnushush</span> nil t)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">Note headers with total length &gt; 76 chars get folded by</span>
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">rfc2047-fold-region, called from mail-encode-encoded-word-buffer,</span>
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">called from message-send-mail.</span>
        (setq gnushush-enable-p t
              <span class="org-comment-delimiter">;; </span><span class=
"org-comment">Shows up in the headers, so may as well use it.</span>
              gnushush-fqdn (system-name)
              gnushush-uid 'random
              gnushush-sender-header 'none
              gnushush-user-agent-header
              <span class=
"org-string">"Gnus (www.gnus.org), GNU Emacs (www.gnu.org/software/emacs/)"</span>))

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 2.11 (info "(message)Spelling")</span>

     (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven-message-setup-routine</span> ()
       (flyspell-mode 1))
     (add-hook 'message-setup-hook 'leuven-message-setup-routine)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-9-3" class="outline-3">
        <h3 id="sec-9-3">Variables</h3>

        <div class="outline-text-3" id="text-9-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 3 (info "(message)Variables")</span>

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 3.1 (info "(message)Message Headers")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">specify how `</span><span class="org-comment"><span class=
"org-constant">From</span></span><span class=
"org-comment">' headers should look</span>
      (setq message-from-style 'angles)

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 3.3 (info "(message)Mail Variables")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">sending mail -- for Gnus (for `</span><span class=
"org-comment"><span class="org-constant">message</span></span><span class=
"org-comment">')</span>
      (setq message-send-mail-function 'message-smtpmail-send-it)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">limit on the size of messages sent (10 MB)</span>
      (setq message-send-mail-partially-limit (* 10 1000 1024))

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 3.4 (info "(message)News Headers")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">domain part of message-Ids</span>
      (setq message-user-fqdn <span class=
"org-string">"somewhere.org"</span>) <span class=
"org-comment-delimiter">;; </span><span class=
"org-comment">(system-name)</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">tell Gnus not to generate a sender header on outgoing posts</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(default behavior since Gnus 5.10.0)</span>
      (<span class="org-keyword">eval-after-load</span> <span class=
"org-string">"message"</span>
        '(add-to-list 'message-syntax-checks '(sender . disabled)))

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 3.6 (info "(message)Insertion Variables")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">function for citing an original message</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(stripping off the signature from the original message)</span>
      (setq message-cite-function 'message-cite-original-without-signature)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(setq message-cite-function 'trivial-cite</span>
      <span class="org-comment-delimiter">;;       </span><span class=
"org-comment">tc-normal-citemarks "&gt;|:"</span>
      <span class="org-comment-delimiter">;;       </span><span class=
"org-comment">tc-fill-long-lines nil</span>
      <span class="org-comment-delimiter">;;       </span><span class=
"org-comment">tc-make-attribution 'tc-fancy-attribution)</span>

      (<span class="org-keyword">defun</span> <span class=
"org-function-name">message-insert-citation-line</span> ()
        <span class=
"org-doc">"A replacement of the original `</span><span class=
"org-doc"><span class=
"org-constant">message-insert-citation-line</span></span><span class=
"org-doc">'."</span>
        (<span class="org-keyword">let</span> ((from (replace-regexp-in-string
                     <span class="org-string">"[()]</span><span class=
"org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">|</span></span><span class=
"org-string"> ?[</span><span class="org-string"><span class=
"org-negation-char">^</span></span><span class=
"org-string"> ]*?@[</span><span class="org-string"><span class=
"org-negation-char">^</span></span><span class=
"org-string"> ]* ?"</span> <span class="org-string">""</span>
                     (mail-header-from message-reply-headers))))
          (insert (concat from <span class="org-string">" wrote:\n"</span>))))

      (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven-message-insert-citation-line</span> ()
        <span class="org-doc">"Insert preferred citation line."</span>
        (<span class="org-keyword">if</span> message-reply-headers
            (<span class=
"org-keyword">let*</span> ((from (mail-header-from message-reply-headers))
                   (head (or
                          (and
                           (string-match <span class=
"org-string">"[ \t]*&lt;[</span><span class="org-string"><span class=
"org-negation-char">^</span></span><span class=
"org-string">&gt;]+&gt;\\'"</span> from)
                           (replace-match <span class=
"org-string">""</span> nil t from))
                          (and
                           (string-match <span class=
"org-string">"(</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">(</span></span><span class=
"org-string">[</span><span class="org-string"><span class=
"org-negation-char">^</span></span><span class=
"org-string">)]+</span><span class="org-string"><span class=
"org-regexp-grouping-backslash">\\</span></span><span class=
"org-string"><span class=
"org-regexp-grouping-construct">)</span></span><span class=
"org-string">)[ \t]*\\'"</span> from)
                           (match-string 1 from)))))
              (insert (or head from) <span class=
"org-string">" wrote:\n\n"</span>))))

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 3.7 (info "(message)Various Message Variables")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; directory from which all other mail file variables are derived</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(setq message-directory "~/Mail/")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">remove the binding of `C-c C-v', used by Org-Babel commands</span>
      (add-hook 'message-mode-hook
                (<span class="org-keyword">lambda</span> ()
                  (define-key message-mode-map
                    (kbd <span class="org-string">"C-c C-v"</span>) nil)))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">operates on messages you compose</span>
      (<span class="org-keyword">defun</span> <span class=
"org-function-name">leuven--message-mode-hook</span> ()
        <span class=
"org-doc">"Enable Org minor modes, auto-fill and auto-complete."</span>

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; prompt for and insert a mail alias</span>
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(local-set-key (kbd "M-a") 'mail-abbrev-insert-alias)</span>

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">tab completion for alias in `</span><span class=
"org-comment"><span class="org-constant">.mailrc</span></span><span class=
"org-comment">'</span>
        (local-set-key (kbd <span class=
"org-string">"&lt;M-tab&gt;"</span>) 'mail-abbrev-complete-alias)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">enable automatic word-wrap when composing messages</span>
        (setq-default fill-column 79)
        (auto-fill-mode)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">turn on the Org mode table editor (in emails)</span>
        (turn-on-orgtbl)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">turn on (the enhanced version of) orgstruct-mode</span>
        (turn-on-orgstruct++)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; make `</span><span class="org-comment"><span class=
"org-constant">orgstruct-hijacker-command-22</span></span><span class=
"org-comment">' rebind `</span><span class="org-comment"><span class=
"org-constant">M-q</span></span><span class="org-comment">' to a message</span>
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; specific function to fill a paragraph</span>
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(setq fill-paragraph-function 'org-fill-paragraph)</span>

        (<span class="org-keyword">when</span> (try-require 'org-footnote)
          <span class="org-comment-delimiter">;; </span><span class=
"org-comment">default style used for footnoting is local to the Message being</span>
          <span class="org-comment-delimiter">;; </span><span class=
"org-comment">written</span>
          (set (make-local-variable 'org-footnote-auto-label) 'plain)

          <span class="org-comment-delimiter">;; </span><span class=
"org-comment">no tag marking the beginning of footnote section</span>
          (set (make-local-variable
          'org-footnote-tag-for-non-org-mode-files) nil))

        (<span class="org-keyword">when</span> (try-require 'auto-complete)
          (auto-complete-mode)))

      (add-hook 'message-mode-hook 'leuven--message-mode-hook 'append)

      (add-hook 'message-send-hook 'org-footnote-normalize)

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 3.9 (info "(message)Message Buffers")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">kill message buffer after sending a message</span>
      (setq message-kill-buffer-on-exit t)

      (message <span class="org-string">"Message... Done"</span>))
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-10" class="outline-2">
      <h2 id="sec-10">Select Methods</h2>

      <div class="outline-text-2" id="text-10">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* 6 (info "(gnus)Select Methods")</span>

(<span class="org-keyword">when</span> leuven-section-select-methods
      (message <span class="org-string">"6 Select Methods..."</span>)
</pre>
        </div>
      </div>

      <div id="outline-container-sec-10-1" class="outline-3">
        <h3 id="sec-10-1">Getting Mail</h3>

        <div class="outline-text-3" id="text-10-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 6.3 (info "(gnus)Getting Mail")</span>

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 6.3.3 (info "(gnus)Splitting Mail") (in IMAP)</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">the registry should be installed</span>
      (setq gnus-registry-install t)    <span class=
"org-comment-delimiter">; </span><span class=
"org-comment">for `G G' searches</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">article registry for Gnus</span>
      (<span class=
"org-keyword">when</span> (try-require 'gnus-registry-<span class=
"org-leuven-highlight">XXX</span>)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">use long group names (so that Gnus knows where the article is)</span>
        (setq gnus-registry-use-long-group-names t)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">unlimited number of entries in the registry</span>
        (setq gnus-registry-max-entries nil)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">enable the various registry functions</span>
        (gnus-registry-initialize))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">the first match in `</span><span class="org-comment"><span class=
"org-constant">nnmail-split-rule</span></span><span class=
"org-comment">' found will be used</span>
      (setq nnmail-crosspost nil)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">name(s) of IMAP mailboxes to split mail from</span>
      (setq nnimap-inbox '(<span class=
"org-string">"INBOX"</span>))    <span class=
"org-comment-delimiter">; </span><span class="org-comment">Gnus v5.13</span>
      (setq nnimap-split-inbox '(<span class=
"org-string">"INBOX"</span>)) <span class=
"org-comment-delimiter">; </span><span class="org-comment">Ma Gnus</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">BBDB (Big Brother DataBase) is loaded from my `</span><span class="org-comment"><span class="org-constant">.emacs</span></span><span class="org-comment">' file</span>
      (<span class="org-keyword">when</span> (try-require 'bbdb-gnus)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">split function to use (sorting mails into groups using BBDB)</span>
        (setq nnimap-split-methods 'nnimap-split-fancy)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">for records which don't have gnus-private set, the following rules in</span>
        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">split--fancy are invoked</span>
        (setq bbdb/gnus-split-default-group nil)

        <span class="org-comment-delimiter">;; </span><span class=
"org-comment">specify how to split mail</span>
        (setq nnimap-split-fancy
              `(|                       <span class=
"org-comment-delimiter">; </span><span class=
"org-comment">split to the *first* match</span>

                  <span class="org-comment-delimiter">;; </span><span class=
"org-comment">mailing lists (in To: or Cc:)</span>
                  (to <span class=
"org-string">"foo@bar\\.com"</span> <span class="org-string">"list.foo"</span>)

                  <span class="org-comment-delimiter">;; </span><span class=
"org-comment">invoke BBDB</span>
                  (: (<span class="org-keyword">lambda</span> ()
                       (car (bbdb/gnus-split-method))))

                  <span class="org-comment-delimiter">;; </span><span class=
"org-comment">catch spam</span>
                  (<span class="org-string">"X-Spam-Status"</span> <span class=
"org-string">"[Yy]es"</span> <span class="org-string">"INBOX.Spam"</span>)

                  <span class="org-comment-delimiter">;; </span><span class=
"org-comment">unmatched mail goes to the catch-all group (default mailbox)</span>
                  <span class="org-string">"INBOX"</span>)))

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 6.3.9 (info "(gnus)Expiring Mail")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">How can I purge a message from an IMAP server using Gnus?</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">IMAP calls it "Expunge" of deleted messages, Gnus calls it expiry of</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">expirable (marked 'E') messages..</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">groups in which to perform expiry of all read articles</span>
      (setq gnus-total-expirable-newsgroups <span class=
"org-string">"\\`nnrss:"</span>)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; disable the expiry process started on leaving a group (for speed</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; reason) before you leave for lunch, `M-x</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; gnus-group-expire-all-groups'</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(remove-hook 'gnus-summary-prepare-exit-hook</span>
      <span class="org-comment-delimiter">;;              </span><span class=
"org-comment">'gnus-summary-expire-articles)</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">make the `d' key mean `</span><span class=
"org-comment"><span class="org-constant">delete</span></span><span class=
"org-comment">' in mail groups, too (as in many other</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">modes), instead of `keep this message for archival purposes'</span>
      (define-key gnus-summary-mode-map
        (kbd <span class=
"org-string">"d"</span>) 'gnus-summary-mark-as-expirable)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; Email pre-expiry period according to group</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(setq nnmail-expiry-wait-function</span>
      <span class="org-comment-delimiter">;;       </span><span class=
"org-comment">(lambda (group)</span>
      <span class="org-comment-delimiter">;;         </span><span class=
"org-comment">(cond ((string= group "Gmail")      90)</span>
      <span class="org-comment-delimiter">;;               </span><span class=
"org-comment">((string= group "moley")      30)</span>
      <span class="org-comment-delimiter">;;               </span><span class=
"org-comment">((string= group "blackhole") 'immediate)</span>
      <span class="org-comment-delimiter">;;               </span><span class=
"org-comment">(t                            7))))</span>
      <span class="org-comment-delimiter">;;</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; Each time I quit the summary buffer of 'blackhole', any read mail</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; is immediately expired</span>


      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">"deletion" versus "expiry"</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; messages should be expired as soon as possible (when the mail</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; group is left)</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(setq nnmail-expiry-wait 'immediate)</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">1) Only (*only*) articles that are marked as expirable are apt to be</span>
      <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">expired. (Yes, *only* those. Yes.)</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">2) If you have made a group total-expirable, all read articles are</span>
      <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">apt to be expired. (Yes, only the read articles. No, not the</span>
      <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">unread, ticked and dormant articles. Only the read ones.)</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">Delete, even in IMAP terms, means "I want this message to go</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">away soon."  IMAP has no equivalent to Gnus' expire mark, which means</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">"I want this message to go away after expiry-wait days."</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">When you `B DEL', the message dies immediately, now and forever.</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">There is no recovery.</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">This is "delete" as in "delete it from your disk forever and ever,</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">never to return again." Use with caution.</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">If you want something to be scheduled for death, then hit `E' to mark</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">a message as expirable. The default expiry interval is one week, at</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">which point it will be deleted automatically, as though you had hit</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">it then with `B DEL'. Then you have 7 days to undelete the messages.</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">Many mailers have a concept of a "deleted items" folder but Gnus does</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">not have that.  It has expiry instead, so that articles due to</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">disappear will remain where they belong until their expiry interval</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">arrives.</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">Deleting a message is normally done via marking as expirable: you hit</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">`E' (not `e') to mark a message as expirable, and whenever expiry is</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">run (normally when you `q'uit a summary buffer), the old E messages</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">are deleted (old == nnmail-expiry-wait days).</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">1. No expiry.  Only articles explicitly marked with 'E' from the</span>
      <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">summary buffer are expired.  Reading articles marks them 'R'ead.</span>
      <span class="org-comment-delimiter">;;</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">2. Auto-expiry.  Only articles marked expirable are expired, but</span>
      <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">reading articles marks them 'E'xpirable.</span>
      <span class="org-comment-delimiter">;;</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">3. Total-expiry.  Articles merely marked 'R'ead are expired, along</span>
      <span class="org-comment-delimiter">;;    </span><span class=
"org-comment">with articles explicitly marked 'E'xpirable.</span>
      <span class="org-comment-delimiter">;;</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">Assuming you read every article, auto- and total-expiry will</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">eventually expire them all at the same times. It's just a question as</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">to whether you'd prefer to mark articles as expirable or read when</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">you read them. I tend to use total-expiry for everything; it has</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">predictable behavior if I'm switching it on and off for a group, and</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">I understand better how it works with scoring.</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">delete the article when pressing `</span><span class=
"org-comment"><span class="org-constant">Delete</span></span><span class=
"org-comment">'</span>

<span class="org-comment-delimiter">;; </span><span class=
"org-comment"><span class=
"org-leuven-highlight">FIXME</span></span><span class="org-comment"> Does not work... This is the opposite of SPC (page down)!</span>
(<span class="org-keyword">eval-after-load</span> <span class=
"org-string">"gnus-sum"</span> <span class=
"org-comment-delimiter">;; </span><span class=
"org-comment">be sure to override default</span>
      (gnus-define-keys gnus-summary-mode-map
        [delete] gnus-summary-delete-article))

<span class="org-comment-delimiter">;;</span><span class=
"org-comment">*** 6.3.11 (info "(gnus)Duplicates")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">cache of old Message-IDs for every message Gnus sees</span>
      (setq nnmail-message-id-cache-file
            (concat gnus-directory <span class=
"org-string">".nnmail-cache"</span>))

<span class="org-comment-delimiter">;; </span><span class=
"org-comment">to use `</span><span class="org-comment"><span class=
"org-constant">nnmail-split-fancy-with-parent</span></span><span class=
"org-comment">'</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">record the message id of every message it sees</span>
(setq nnmail-treat-duplicates 'warn)     <span class=
"org-comment-delimiter">; </span><span class=
"org-comment">or `</span><span class="org-comment"><span class=
"org-constant">delete</span></span><span class="org-comment">'</span>

<span class="org-comment-delimiter">;; </span><span class=
"org-comment">ensure that the message ids are still in the cache</span>
(setq nnmail-message-id-cache-length 5000)

<span class="org-comment-delimiter">;; </span><span class=
"org-comment">record the message ids of moved articles</span>
(setq nnmail-cache-accepted-message-ids t)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-10-2" class="outline-3">
        <h3 id="sec-10-2">Browsing the Web</h3>

        <div class="outline-text-3" id="text-10-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 6.4 (info "(gnus)Browsing the Web")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">use `</span><span class="org-comment"><span class=
"org-constant">wget</span></span><span class=
"org-comment">' instead of `</span><span class="org-comment"><span class=
"org-constant">url.el</span></span><span class=
"org-comment">' (for nnweb-type google), cause it</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">seems to be more reliable (about how the HTML is fetched)</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">use external grab program (to fetch the RSS feed, etc.)</span>
      (setq mm-url-use-external t)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">URL grab program</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment"><span class="org-leuven-highlight">TODO</span></span><span class=
"org-comment"> Protect in case wget is not installed</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(setq mm-url-program "wget") ; make sure you don't use the symbol 'wget</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">FYI, wget is run when a link from Org is not found, for example</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">because the mail has been moved from one group to another.</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">arguments for `</span><span class="org-comment"><span class=
"org-constant">mm-url-program</span></span><span class="org-comment">'</span>
      (setq mm-url-arguments '(<span class=
"org-string">"-q"</span> <span class="org-string">"-O"</span> <span class=
"org-string">"-"</span>))

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">how to find the parent article</span>
      (<span class="org-keyword">when</span> (try-require 'nnweb-<span class=
"org-leuven-highlight">XXX</span>)    <span class=
"org-comment-delimiter">; </span><span class=
"org-comment">not sure it really works!?</span>
        (setq gnus-refer-article-method
              '(
                <span class="org-comment-delimiter">;; </span><span class=
"org-comment">first try the current method</span>
                current

                <span class="org-comment-delimiter">;; </span><span class=
"org-comment">find the message-id based on the registry, so that you can</span>
                <span class="org-comment-delimiter">;; </span><span class=
"org-comment">safely move articles around</span>
                <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(nnregistry)</span>

                (nnweb <span class=
"org-string">"gmane"</span> (nnweb-type gmane))

                <span class="org-comment-delimiter">;; </span><span class=
"org-comment">then ask Google</span>
                (nnweb <span class=
"org-string">"google"</span> (nnweb-type google))

                <span class="org-comment-delimiter">;; </span><span class=
"org-comment">and finally ask `</span><span class="org-comment"><span class=
"org-constant">news.gmane.org</span></span><span class=
"org-comment">' if that fails</span>
                (nntp <span class="org-string">"news.gmane.org"</span>)
                )))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-10-3" class="outline-3">
        <h3 id="sec-10-3">IMAP</h3>

        <div class="outline-text-3" id="text-10-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 6.5 (info "(gnus)IMAP")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">log commands (imap session trace) to the `*imap log*' buffer</span>
      (setq nnimap-record-commands t)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-10-4" class="outline-3">
        <h3 id="sec-10-4">Gnus Unplugged</h3>

        <div class="outline-text-3" id="text-10-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 6.8 (info "(gnus)Gnus Unplugged")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">disable the Gnus agent (used for "offline" reading)</span>
      (setq gnus-agent nil) <span class=
"org-comment-delimiter">;; </span><span class=
"org-comment">prevent being unable to delete some mails from</span>
                            <span class=
"org-comment-delimiter">;; </span><span class="org-comment">your inbox</span>

      (message <span class="org-string">"6 Select Methods... Done"</span>))
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-11" class="outline-2">
      <h2 id="sec-11">Scoring</h2>

      <div class="outline-text-2" id="text-11">
        <p>You can <i>increase</i> or <i>lower</i> the score, respectively, in
        the global file (instead of the score file local for the group) by
        pressing <code>M-i a I</code> or <code>M-i a L</code>.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* 7 (info "(gnus)Scoring")</span>

(<span class="org-keyword">when</span> leuven-section-scoring
      (message <span class="org-string">"7 Scoring..."</span>)

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; directory where kill and score files will be stored</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(setq gnus-kill-files-directory "~/")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; increase score of messages that are replies to my own postings</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">;; </span><span class="org-comment"><span class=
"org-leuven-highlight">TODO</span></span><span class=
"org-comment"> only for newsgroups (and not for mails)!</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(add-hook 'message-sent-hook 'gnus-score-followup-article)</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">(add-hook 'message-sent-hook 'gnus-score-followup-thread)</span>

      (message <span class="org-string">"7 Scoring... Done"</span>))
</pre>
        </div>
      </div>

      <div id="outline-container-sec-11-1" class="outline-3">
        <h3 id="sec-11-1">From Sacha Chua</h3>

        <div class="outline-text-3" id="text-11-1">
          <p>Adaptive scoring means that if you kill a thread you’re not
          particularly interested in, it lowers the score on that one, so any
          replies are shown with a negative score. You can also configure it to
          hide messages with scores below a certain threshold, so you don’t
          even see replies.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
(setq gnus-use-adaptive-scoring t)

(setq gnus-default-adaptive-score-alist
      '((gnus-unread-mark)
        (gnus-ticked-mark (subject 10))
        (gnus-killed-mark (subject -5))
        (gnus-catchup-mark (subject -1))))
</pre>
          </div>

          <p>I also have some more rules that score things up if they mention
          my name or other things I’m interested in. =)</p>

          <p>Maybe a score file with this in it?</p>
          <pre class="example">
(("Body" ("sacha" 10 nil s)))
</pre>

          <p>which theoretically adds a score based on that keyword, but I
          haven’t tested it and it slows loading groups down a bit.</p>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-12" class="outline-2">
      <h2 id="sec-12">Searching</h2>

      <div class="outline-text-2" id="text-12">
        <p>Basically, there’s only one user-frontend function:
        <code>gnus-group-make-nnir-group</code> bound to <code>G G</code> in
        <code>*Group*</code>.</p>

        <p>It comes with Gnus. You don’t even need to configure anything for
        searching <b>IMAP</b> and <b>Gmane</b> groups.</p>
      </div>
    </div>

    <div id="outline-container-sec-13" class="outline-2">
      <h2 id="sec-13">Various</h2>

      <div class="outline-text-2" id="text-13">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* 9 (info "(gnus)Various")</span>

(<span class="org-keyword">when</span> leuven-section-various
      (message <span class="org-string">"8 Various..."</span>)
</pre>
        </div>
      </div>

      <div id="outline-container-sec-13-1" class="outline-3">
        <h3 id="sec-13-1">Interactive</h3>

        <div class="outline-text-3" id="text-13-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 9.2 (info "(gnus)Interactive")</span>

<span class="org-comment-delimiter">;; </span><span class=
"org-comment">don't display verbose messages and don't require confirmations</span>
(setq gnus-novice-user nil)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-13-2" class="outline-3">
        <h3 id="sec-13-2">Formatting Variables</h3>

        <div class="outline-text-3" id="text-13-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 9.4 (info "(gnus)Formatting Variables")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">assume that fixed width fonts have characters of the same width</span>
      (setq gnus-use-correct-string-widths nil)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-13-3" class="outline-3">
        <h3 id="sec-13-3">Window Layout</h3>

        <div class="outline-text-3" id="text-13-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 9.5 (info "(gnus)Window Layout")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">add a window configuration to `</span><span class=
"org-comment"><span class=
"org-constant">gnus-buffer-configuration</span></span><span class=
"org-comment">'</span>
      (<span class="org-keyword">if</span> (&gt; (frame-width) 160)
          (gnus-add-configuration
           '(article
             (horizontal 1.0
                         (summary 0.50 point)
                         <span class=
"org-comment-delimiter">;; </span><span class=
"org-comment">`</span><span class="org-comment"><span class=
"org-constant">point</span></span><span class=
"org-comment">' positions the cursor properly</span>
                         (article 1.0))))
        (gnus-add-configuration
         '(article
           (vertical 1.0
                     (summary 0.40 point)
                     (article 1.0)))))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-13-4" class="outline-3">
        <h3 id="sec-13-4">Interaction with other modes</h3>

        <div class="outline-text-3" id="text-13-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 9.20 Interaction with (info "(gnus)Other modes")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">attach all marked files from Dired to a new Gnus message</span>
      (autoload 'gnus-dired-mode <span class="org-string">"gnus-dired"</span>
        <span class=
"org-doc">"Attach dired's marked files to a gnus message composition."</span> t)

      (autoload 'gnus-dired-attach <span class="org-string">"gnus-dired"</span>
        <span class=
"org-doc">"Attach dired's marked files to a gnus message composition."</span> t)

      (with-eval-after-load <span class="org-string">"dired"</span>

        (add-hook 'dired-mode-hook 'gnus-dired-mode)

        (define-key dired-mode-map
          (kbd <span class=
"org-string">"a"</span>) 'gnus-dired-attach)) <span class=
"org-comment-delimiter">; </span><span class="org-comment"><span class=
"org-leuven-highlight">XXX</span></span><span class=
"org-comment"> conflict with</span>
                                         <span class=
"org-comment-delimiter">; </span><span class="org-comment">`</span><span class=
"org-comment"><span class=
"org-constant">dired-find-alternate-file</span></span><span class=
"org-comment">'</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-13-5" class="outline-3">
        <h3 id="sec-13-5">Various Various</h3>

        <div class="outline-text-3" id="text-13-5">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 9.21 (info "(gnus)Various Various")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">display more messages from Gnus</span>
      (setq gnus-verbose 10) <span class=
"org-comment-delimiter">;; </span><span class=
"org-comment">9 = minimum for helpful debugging</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">display more messages from the Gnus back-ends</span>
      (setq gnus-verbose-backends 10)

      (message <span class="org-string">"8 Various... Done"</span>))
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-14" class="outline-2">
      <h2 id="sec-14">Appendices</h2>

      <div class="outline-text-2" id="text-14">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">* 11 (info "(gnus)Appendices")</span>

(<span class="org-keyword">when</span> leuven-section-appendices
      (message <span class="org-string">"11 Appendices..."</span>)
</pre>
        </div>
      </div>

      <div id="outline-container-sec-14-1" class="outline-3">
        <h3 id="sec-14-1">History</h3>

        <div class="outline-text-3" id="text-14-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 11.2 (info "(gnus)History")</span>

      (setq canlock-password <span class="org-string">"secret"</span>)
      (setq canlock-password-for-verify <span class=
"org-string">"secret"</span>)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-14-2" class="outline-3">
        <h3 id="sec-14-2">Frequently Asked Questions</h3>

        <div class="outline-text-3" id="text-14-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class=
"org-comment">** 11.9 (info "(gnus)Frequently Asked Questions")</span>

      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">byte-compile the user-defined format specs (things like</span>
      <span class="org-comment-delimiter">;; </span><span class=
"org-comment">`</span><span class="org-comment"><span class=
"org-constant">gnus-summary-line-format</span></span><span class=
"org-comment">')</span>
      (<span class="org-keyword">when</span> (fboundp 'gnus-compile)
        (gnus-compile)) <span class=
"org-comment-delimiter">;;  </span><span class=
"org-comment">at the bottom</span>

      (message <span class="org-string">"11 Appendices... Done"</span>))

<span class="org-comment-delimiter">;; </span><span class=
"org-comment">warn that some packages were missing</span>
(<span class="org-keyword">dolist</span> (pkg leuven--missing-packages)
  (message <span class="org-string">"(</span><span class=
"org-string"><span class=
"org-leuven-highlight">warning</span></span><span class=
"org-string">) Package `</span><span class="org-string"><span class=
"org-constant">%s</span></span><span class=
"org-string">' not found"</span> pkg))

(message <span class="org-string">"\n"</span>)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
(<span class="org-keyword">provide</span> '<span class=
"org-constant">gnus-leuven</span>)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-14-3" class="outline-3">
        <h3 id="sec-14-3">File Local Variables</h3>

        <div class="outline-text-3" id="text-14-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">This is for the sake of Emacs.</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">Local Variables:</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">coding: utf-8-unix</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">eval: (when (locate-library "rainbow-mode") (require 'rainbow-mode) (rainbow-mode))</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">ispell-local-dictionary: "american"</span>
<span class="org-comment-delimiter">;; </span><span class=
"org-comment">End:</span>

<span class="org-comment-delimiter">;;; </span><span class=
"org-comment">gnus-leuven.el ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="postamble" class="status">
    <div id="footer">
      <div id="copyright">
        Copyright © Fabrice Niessen
      </div>
    </div>
  </div>
</body>
</html>
