<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta name="generator" content="HTML Tidy for Cygwin (vers 1st September 2004), see www.w3.org" />
<title>Gnus Leuven Config</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Org-mode" />
<meta name="author" content="Fabrice Niessen" />
<meta name="keywords" content="emacs, gnus, dotfile, config" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" type="text/css" href="d:/Users/fni/src/org-html-themes/styles/readtheorg/css/htmlize.css" />
<link rel="stylesheet" type="text/css" href="d:/Users/fni/src/org-html-themes/styles/readtheorg/css/readtheorg.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript">
</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js" type="text/javascript">
</script>
<script type="text/javascript" src="d:/Users/fni/src/org-html-themes/styles/lib/js/jquery.stickytableheaders.js">
</script>
<script type="text/javascript" src="d:/Users/fni/src/org-html-themes/styles/readtheorg/js/readtheorg.js">
</script>
</head>
<body>
<div id="content">
<h1 class="title">Gnus Leuven Config</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">Overview</a></li>
<li><a href="#orgheadline2">Header</a></li>
<li><a href="#orgheadline3">Loading Libraries of Lisp Code for Emacs</a></li>
<li><a href="#orgheadline4">Starting Up Gnus</a>
<ul>
<li><a href="#orgheadline5">Finding the News</a></li>
<li><a href="#orgheadline6">New Groups</a></li>
<li><a href="#orgheadline7">Startup Files</a></li>
<li><a href="#orgheadline8">Auto Save</a></li>
<li><a href="#orgheadline9">Active File</a></li>
</ul>
</li>
<li><a href="#orgheadline10">Group Buffer</a>
<ul>
<li><a href="#orgheadline11">Group Buffer Format</a></li>
<li><a href="#orgheadline12">Selecting a Group</a></li>
<li><a href="#orgheadline13">Exiting Gnus</a></li>
<li><a href="#orgheadline14">Group Topics</a></li>
<li><a href="#orgheadline15">Misc Group Stuff</a></li>
</ul>
</li>
<li><a href="#orgheadline16">Summary buffer</a>
<ul>
<li><a href="#orgheadline17">Summary Buffer Format</a></li>
<li><a href="#orgheadline18">Reply, Followup and Post</a></li>
<li><a href="#orgheadline19">Marking Articles</a>
<ul>
<li><a href="#orgheadline20">Unread Articles</a></li>
<li><a href="#orgheadline21">Read Articles</a></li>
<li><a href="#orgheadline22">Other marks</a></li>
<li><a href="#orgheadline23">Score Variables</a></li>
</ul>
</li>
<li><a href="#orgheadline24">Threading</a></li>
<li><a href="#orgheadline25">Sorting the Summary Buffer</a></li>
<li><a href="#orgheadline26">Article Caching</a></li>
<li><a href="#orgheadline27">Article Treatment</a></li>
<li><a href="#orgheadline28">MIME Commands</a></li>
<li><a href="#orgheadline29">Charsets</a></li>
<li><a href="#orgheadline30">Various Summary Stuff</a>
<ul>
<li><a href="#orgheadline31">Gnus Stripes</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline32">Article Buffer</a>
<ul>
<li><a href="#orgheadline33">Hiding headers</a></li>
</ul>
</li>
<li><a href="#orgheadline34">Emacs MIME</a>
<ul>
<li><a href="#orgheadline35">Decoding and Viewing</a></li>
<li><a href="#orgheadline36">Non-MIME</a></li>
<li><a href="#orgheadline37">Display Customization</a></li>
<li><a href="#orgheadline38">Basic Functions</a></li>
</ul>
</li>
<li><a href="#orgheadline39">Back to Article Buffer</a></li>
<li><a href="#orgheadline40">Composing Messages</a>
<ul>
<li><a href="#orgheadline41">Mail</a></li>
<li><a href="#orgheadline42">Posting Server</a></li>
<li><a href="#orgheadline43">Archived Messages</a></li>
<li><a href="#orgheadline44">Posting Styles</a>
<ul>
<li><a href="#orgheadline45">Multiple servers</a></li>
<li><a href="#orgheadline46">Headers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline47">Message</a>
<ul>
<li><a href="#orgheadline48">Interface</a></li>
<li><a href="#orgheadline49">Commands</a></li>
<li><a href="#orgheadline50">Variables</a></li>
</ul>
</li>
<li><a href="#orgheadline51">Select Methods</a>
<ul>
<li><a href="#orgheadline52">Getting News</a></li>
<li><a href="#orgheadline53">Getting Mail</a></li>
<li><a href="#orgheadline54">Browsing the Web</a></li>
<li><a href="#orgheadline55">IMAP</a></li>
<li><a href="#orgheadline56">Gnus Unplugged</a></li>
</ul>
</li>
<li><a href="#orgheadline57">Scoring</a>
<ul>
<li><a href="#orgheadline58">From Sacha Chua</a></li>
</ul>
</li>
<li><a href="#orgheadline59">Searching</a></li>
<li><a href="#orgheadline60">Various</a>
<ul>
<li><a href="#orgheadline61">Interactive</a></li>
<li><a href="#orgheadline62">Formatting Variables</a></li>
<li><a href="#orgheadline63">Window Layout</a></li>
<li><a href="#orgheadline64">Interaction with other modes</a></li>
<li><a href="#orgheadline65">Various Various</a></li>
</ul>
</li>
<li><a href="#orgheadline66">Appendices</a>
<ul>
<li><a href="#orgheadline67">History</a></li>
<li><a href="#orgheadline68">Frequently Asked Questions</a></li>
<li><a href="#orgheadline69">Feature</a></li>
<li><a href="#orgheadline70">File Local Variables</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">Overview</h2>
<div class="outline-text-2" id="text-orgheadline1">
<p>See <a href="http://www.gnu.org/software/emacs/manual/gnus.html">http://www.gnu.org/software/emacs/manual/gnus.html</a></p>
<p>This covers the basics of Gnus: <a href="http://koldfront.dk/text/gnus-email-basic-usage.html">http://koldfront.dk/text/gnus-email-basic-usage.html</a></p>
</div>
</div>
<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2">Header</h2>
<div class="outline-text-2" id="text-orgheadline2">
<div class="org-src-container">
<pre class="src src-emacs-lisp" id="orgsrcblock1">
(format-time-string <span class="org-string">"%Y%m%d.%H%M"</span>)
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;; </span><span class="org-comment">gnus-leuven.el --- my Gnus config file</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Copyright (C) 2004-2015 Fabrice Niessen</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">URL: https://github.com/fniessen/emacs-leuven-theme</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Version: 20150519.1033</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Keywords: emacs, gnus, dotfile, config</span>
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;;    </span><span class="org-comment">__ _ _ __  _   _ ___</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">/ _` | '_ \| | | / __|</span>
<span class="org-comment-delimiter">;;  </span><span class="org-comment">| (_| | | | | |_| \__ \</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">(_)__, |_| |_|\__,_|___/</span>
<span class="org-comment-delimiter">;;   </span><span class="org-comment">|___/</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">This file is NOT part of GNU Emacs.</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">This program is free software: you can redistribute it and/or</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">modify it under the terms of the GNU General Public License as</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">published by the Free Software Foundation, either version 3 of</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">the License, or (at your option) any later version.</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">This program is distributed in the hope that it will be useful,</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">GNU General Public License for more details.</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">You should have received a copy of the GNU General Public License</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">along with this program. If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">Commentary:</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">** Help</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">For help on The Gnus Newsreader, see:</span>
<span class="org-comment-delimiter">;;     </span><span class="org-comment">(info "(gnus)")  &lt;== C-x C-e here!</span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;;</span><span class="org-comment">** </span><span class="org-leuven-highlight"><span class="org-comment">BUG</span></span>
<span class="org-comment-delimiter">;;</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Updating info for nnimap does not occurr for group INBOX (well for</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">subgroups) - i.e., mail GCc'ed to INBOX is lost...</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">http://www.emacswiki.org/emacs/GnusTutorial</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Disconnected from IMAP? In the `</span><span class="org-constant"><span class="org-comment">*Server*</span></span><span class="org-comment">' buffer, hit 'C' to close the</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">server and then 'O' to reopen it.</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">"You should byte-compile Gnus" because the function `</span><span class="org-constant"><span class="org-comment">gnus</span></span><span class="org-comment">' isn't</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">byte-compiled. Check `M-x locate-library RET gnus RET' if it picks up the</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">.el or .elc file.</span>
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;; </span><span class="org-comment">Code:</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">This file is only provided as an example. Customize it to your own taste!</span>
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(message <span class="org-string">"* Load Gnus Leuven"</span>)

<span class="org-comment-delimiter">;;</span><span class="org-comment">* Loading</span>

(<span class="org-keyword">require</span> '<span class="org-constant">gnus</span>)

<span class="org-comment-delimiter">;; </span><span class="org-comment">list of packages that `</span><span class="org-constant"><span class="org-comment">try-require</span></span><span class="org-comment">' can't find</span>
(setq leuven--missing-packages nil)
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline3" class="outline-2">
<h2 id="orgheadline3">Loading Libraries of Lisp Code for Emacs</h2>
<div class="outline-text-2 org-src-container" id="text-orgheadline3">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Require a feature/library if available; if not, fail silently.</span>
  (<span class="org-keyword">unless</span> (fboundp 'try-require)
    (<span class="org-keyword">defun</span> <span class="org-function-name">try-require</span> (feature)
      <span class="org-doc">"Attempt to load a FEATURE (or library).</span>
<span class="org-doc">    Return true if the library given as argument is successfully loaded.  If</span>
<span class="org-doc">    not, just print a message."</span>
      (<span class="org-keyword">condition-case</span> err
          (<span class="org-keyword">progn</span>
            (<span class="org-keyword">if</span> (stringp feature)
                (load-library feature)
              (<span class="org-keyword">require</span> <span class="org-constant">feature</span>))
            t)                          <span class="org-comment-delimiter">; </span><span class="org-comment">Necessary for correct behavior in</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">conditional expressions.</span>
        (file-error
         (message <span class="org-string">"Requiring `</span><span class="org-constant"><span class="org-string">%s</span></span><span class="org-string">'... missing"</span> feature)
         nil))))
</pre></div>
</div>
<div id="outline-container-orgheadline4" class="outline-2">
<h2 id="orgheadline4">Starting Up Gnus</h2>
<div class="outline-text-2" id="text-orgheadline4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(setq gnus-directory <span class="org-string">"~/.gnus.d/"</span>)      <span class="org-comment-delimiter">; </span><span class="org-leuven-highlight"><span class="org-comment">XXX</span></span>
</pre></div>
<p>If you're running a recent Emacs, look into the EPA library to encrypt your <code>.authinfo</code> file.</p>
<p>See <a href="http://www.emacswiki.org/emacs/GnusEncryptedAuthInfo">http://www.emacswiki.org/emacs/GnusEncryptedAuthInfo</a>.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">* 1 (info "(gnus)Starting Up") Gnus</span>

  (message <span class="org-string">"1 Starting Gnus..."</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">support for `</span><span class="org-constant"><span class="org-comment">.authinfo</span></span><span class="org-comment">' file</span>
  (<span class="org-keyword">when</span> (try-require 'auth-source)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">log debug messages</span>
    (setq auth-source-debug t))
</pre></div>
<p class="verse">Richard Stallman &lt;rms@gnu.org&gt; writes:<br />
<br />
&gt; <a href="http://www.theguardian.com/technology/2014/sep/29/londoners-wi-fi-security-herod-clause">http://www.theguardian.com/technology/2014/sep/29/londoners-wi-fi-security-herod-clause</a><br />
&gt;<br />
&gt; says that POP3 passwords are sometimes transmitted in plain text.<br />
&gt;<br />
&gt; Is plaintext transmission of passwords inherent in POP3<br />
&gt; or is it optional?<br />
<br />
Modern pop3 servers support STARTTLS, and Emacs will upgrade to a TLS<br />
connection whenever the server supports it. (If you have an Emacs<br />
compiled with gnutls support, but I would guess that almost all Emacs<br />
instances has that.)<br />
<br />
Virtually all the Emacs network transports that I know of will upgrade<br />
to TLS opportunistically, if the servers allow it, so Emacs should send<br />
no passwords unencrypted.<br />
<br />
The only exceptions are HTTP and IRC, unless the latter has been fixed<br />
lately. And there are hopefully nobody who does a login that matters<br />
over HTTP.<br /></p>
</div>
<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5">Finding the News</h3>
<div class="outline-text-3" id="text-orgheadline5">
<p>Download and <b>install</b> of <a href="http://www.gnu.org/software/gnutls/">GnuTLS library</a> may be required.</p>
<p>Go to <a href="http://schwarzvogel.de/ssl_tls_testing.shtml">Testing SSL and TLS services</a> to test the <b>opening of TLS connections</b>.</p>
<p>Setting the following right is the only thing really required! The rest is customization.</p>
<div class="note">
<p>The account label allows for multiple accounts on the same server (see <code>.authinfo</code> for logins).</p>
</div>
<div class="note">
<p>The groups in the gnus-select-method don't get a prefix like "nnimap". Nice!</p>
</div>
<div class="note">
<p>The following configuration, given as example (which works if your mail server is accessible via the name <code>mail</code>), is wrapped in a test with my host name, so that it does not interfere with your own configuration…</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 1.1 (info "(gnus)Finding the News")</span>

  (<span class="org-keyword">if</span> (equal (system-name) <span class="org-string">"MUNDANEUM"</span>) <span class="org-comment-delimiter">; </span><span class="org-comment">private config</span>

      <span class="org-comment-delimiter">;; </span><span class="org-comment">Configure incoming mail.</span>
      (setq gnus-select-method
            '(nnimap <span class="org-string">"mail"</span>
                     (nnimap-address <span class="org-string">"mail"</span>)
                     (nnimap-server-port 993)
                     (nnimap-stream ssl)
                     <span class="org-comment-delimiter">;; </span><span class="org-comment">(nnimap-split-methods default) ; &lt;&lt; ABSOLUTELY NEEDED</span>
                     (nnimap-split-methods nnimap-split-fancy) <span class="org-comment-delimiter">; </span><span class="org-comment">&lt;&lt;&lt; NOT QUOTED!!!</span>
                     <span class="org-comment-delimiter">;;                        </span><span class="org-comment">; </span><span class="org-leuven-highlight"><span class="org-comment">XXX</span></span><span class="org-comment"> when (try-require 'bbdb-gnus)...</span>
                     ))

    (setq gnus-select-method '(nnnil <span class="org-string">""</span>)))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Allow "hostname NOT matched" in the server certificate.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq starttls-extra-arguments '("--insecure"))</span>
  <span class="org-comment-delimiter">;;                                   </span><span class="org-comment">;! Not used in an Emacs 24 with built-in</span>
  <span class="org-comment-delimiter">;;                                   </span><span class="org-comment">;! gnutls support.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Using Gnus for news.</span>
  (setq gnus-secondary-select-methods
        '((nntp <span class="org-string">"gmane"</span>
                (nntp-address <span class="org-string">"news.gmane.org"</span>))
          (nntp <span class="org-string">"eternal-september"</span>
                (nntp-address <span class="org-string">"news.eternal-september.org"</span>))))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Required when posting to an authenticated news server.</span>
  (add-hook 'nntp-server-opened-hook 'nntp-send-authinfo)
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6">New Groups</h3>
<div class="outline-text-3" id="text-orgheadline6">
<p>Finding new newsgroups is done:</p>
<ul class="org-ul">
<li>at startup (if <code>gnus-check-new-newsgroups</code> is non-nil) or</li>
<li>by using the function <code>gnus-find-new-newsgroup</code>.</li>
</ul>
<p>You can always subscribe to the new groups just by pressing <code>U</code> in the group buffer.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 1.4 (info "(gnus)New Groups")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Gnus will not check for new newsgroups at startup.</span>
  (setq gnus-check-new-newsgroups nil)  <span class="org-comment-delimiter">; </span><span class="org-comment">Save you some time at startup and when</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">you do the `g' command.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't save the list of killed groups.</span>
  (setq gnus-save-killed-list nil)      <span class="org-comment-delimiter">; </span><span class="org-comment">WARNING -- As Gnus has no record of</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">which groups are new and which are</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">old, the automatic new newsgroups</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">subscription methods becomes</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">meaningless.</span>
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7">Startup Files</h3>
<div class="outline-text-3" id="text-orgheadline7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 1.6 (info "(gnus)Startup Files")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't save a `</span><span class="org-constant"><span class="org-comment">.newsrc</span></span><span class="org-comment">' file (for using other newsreaders) on exit.</span>
  (setq gnus-save-newsrc-file nil)      <span class="org-comment-delimiter">; </span><span class="org-comment">Speed-up.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Ignore the `</span><span class="org-constant"><span class="org-comment">.newsrc</span></span><span class="org-comment">' file.</span>
  (setq gnus-read-newsrc-file nil)      <span class="org-comment-delimiter">; </span><span class="org-comment">Speed-up.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">My `</span><span class="org-constant"><span class="org-comment">.newsrc</span></span><span class="org-comment">' file (and the derived .el/.eld files).</span>
  (setq gnus-startup-file (concat gnus-directory <span class="org-string">".newsrc"</span>))
</pre></div>
<div class="tip">
<p>To stop the repetitive (and growing) <code>nntp read</code> messages, ensure you subscribe to at least one group for every NNTP server. You can even unsubscribe directly afterward…</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8">Auto Save</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline8">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 1.7 (info "(gnus)Auto Save")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Enable showing of [Gmail]/* groups.</span>
  (setq gnus-ignored-newsgroups <span class="org-string">""</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Unconditionally read the dribble file.</span>
  (setq gnus-always-read-dribble-file t)
</pre></div>
</div>
<div id="outline-container-orgheadline9" class="outline-3">
<h3 id="orgheadline9">Active File</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline9">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 1.8 (info "(gnus)The Active File")</span>

  <span class="org-comment-delimiter">;;  </span><span class="org-comment">Gnus will only know about the groups in my `</span><span class="org-constant"><span class="org-comment">.newsrc</span></span><span class="org-comment">' file</span>
  (setq gnus-read-active-file nil)  <span class="org-comment-delimiter">; </span><span class="org-comment">speed-up</span>

  (message <span class="org-string">"1 Starting Gnus... Done"</span>)
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline10" class="outline-2">
<h2 id="orgheadline10">Group Buffer</h2>
<div class="outline-text-2 org-src-container" id="text-orgheadline10">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">* 2 (info "(gnus)The Group Buffer")</span>

  (message <span class="org-string">"2 Group Buffer..."</span>)
</pre></div>
<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11">Group Buffer Format</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline11">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 2.1 (info "(gnus)Group Buffer Format")</span>

  (<span class="org-keyword">defun</span> <span class="org-function-name">gnus-user-format-function-y</span> (headers)
    <span class="org-doc">"Return string for count of unread articles."</span>
    (<span class="org-keyword">if</span> (&gt; (string-to-number gnus-tmp-number-of-unread) 0)
        (concat gnus-tmp-number-of-unread <span class="org-string">" Unread"</span>)
      <span class="org-string">""</span>))

  (<span class="org-keyword">defun</span> <span class="org-function-name">gnus-user-format-function-U</span> (headers)
    <span class="org-doc">"Return string for count of unseen articles."</span>
    (<span class="org-keyword">if</span> (&gt; (gnus-number-of-unseen-articles-in-group gnus-tmp-group) 0)
        <span class="org-comment-delimiter">;; </span><span class="org-comment">found in gnus-group.el</span>
        (concat (int-to-string
                 (gnus-number-of-unseen-articles-in-group
                  gnus-tmp-group)) <span class="org-string">" Unseen"</span>)
      <span class="org-string">""</span>))

  (<span class="org-keyword">defun</span> <span class="org-function-name">gnus-user-format-function-T</span> (headers)
    <span class="org-doc">"Return string for count of ticked articles."</span>
    (<span class="org-keyword">if</span> (&gt; (gnus-range-length (cdr (assq 'tick gnus-tmp-marked))) 0)
        (concat (int-to-string
                 (gnus-range-length (cdr (assq 'tick gnus-tmp-marked))))
                <span class="org-string">" Ticked"</span>)
      <span class="org-string">""</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">create some faces</span>
  (<span class="org-keyword">defface</span> <span class="org-variable-name">leuven-gnus-unseen</span> '((t (<span class="org-builtin">:weight</span> normal <span class="org-builtin">:foreground</span> <span class="org-string">"#FC7202"</span>)))
    <span class="org-doc">"Face for count of unread articles."</span>)
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(defface leuven-gnus-total '((t (:foreground "#2EAE2C")))</span>
  <span class="org-comment-delimiter">;;   </span><span class="org-comment">"Face for size of article in summary buffer.")</span>

  (setq gnus-face-1 'gnus-summary-normal-ticked)
  (setq gnus-face-2 'gnus-summary-normal-unread)
  (setq gnus-face-3 'leuven-gnus-unseen)
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq gnus-face-4 'leuven-gnus-total)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">format of the group buffer</span>
  (setq gnus-group-line-format (concat <span class="org-string">"%1{%M%}"</span>
                                       <span class="org-string">"%2{%m%}"</span>
                                       <span class="org-string">"  "</span>
                                       <span class="org-string">"%(%-42,42g%) "</span>
                                       <span class="org-string">"%2{%10uy%} "</span>
                                       <span class="org-string">"%3{%10uU%} "</span>
                                       <span class="org-string">"%1{%10uT%} "</span>
                                       <span class="org-comment-delimiter">;; </span><span class="org-comment">"%4{%6t Total%}"</span>
                                       <span class="org-string">"\n"</span>))
</pre></div>
</div>
<div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12">Selecting a Group</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline12">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 2.3 (info "(gnus)Selecting a Group")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Groups of 200+ articles are NOT considered big.</span>
  (setq gnus-large-newsgroup nil)
</pre></div>
</div>
<div id="outline-container-orgheadline13" class="outline-3">
<h3 id="orgheadline13">Exiting Gnus</h3>
<div class="outline-text-3" id="text-orgheadline13">
<p>Cleanup all Gnus buffers on exit.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 2.15 (info "(gnus)Exiting Gnus")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Quit Gnus properly, if it is running ...</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">exit-gnus</span> ()
    <span class="org-doc">"Save and exit Gnus."</span>
    (<span class="org-keyword">if</span> (and (fboundp 'gnus-group-exit)
             (gnus-alive-p))
        (<span class="org-keyword">with-current-buffer</span> (get-buffer <span class="org-string">"*Group*"</span>)
          (<span class="org-keyword">let</span> (gnus-interactive-exit)
            (gnus-group-exit)))))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">... before exiting Emacs (not leaving auto-save files around).</span>
  (add-hook 'kill-emacs-hook 'exit-gnus)
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14">Group Topics</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline14">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 2.16 (info "(gnus)Group Topics")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Permanently enable the topic mode.</span>
  (add-hook 'gnus-group-mode-hook 'gnus-topic-mode)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Remove the binding of `C-c C-x', used by Org clocking commands.</span>
  (add-hook 'gnus-topic-mode-hook
            (<span class="org-keyword">lambda</span> ()
              (define-key gnus-topic-mode-map
                (kbd <span class="org-string">"C-c C-x"</span>) nil)))
</pre></div>
</div>
<div id="outline-container-orgheadline15" class="outline-3">
<h3 id="orgheadline15">Misc Group Stuff</h3>
<div class="outline-text-3" id="text-orgheadline15">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 2.17 (info "(gnus)Misc Group Stuff")</span>
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Turn off the column number in the group buffer, and remove the binding</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">of `C-c C-x', used by Org clocking commands.</span>
  (add-hook 'gnus-group-mode-hook
            (<span class="org-keyword">lambda</span> ()
              (<span class="org-keyword">progn</span>
                (set (make-local-variable 'column-number-mode) nil)
                (define-key gnus-group-mode-map
                  (kbd <span class="org-string">"C-c C-x"</span>) nil))))
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">jump to the first group with unread articles, after getting new news</span>
  (add-hook 'gnus-after-getting-new-news-hook
            'gnus-group-first-unread-group)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">keep track of when I last read a group</span>
  (add-hook 'gnus-select-group-hook 'gnus-group-set-timestamp)
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (<span class="org-keyword">defface</span> <span class="org-variable-name">highlight-line-gnus</span>
    '((t (<span class="org-builtin">:background</span> <span class="org-string">"#DAEAFC"</span>)))
    <span class="org-doc">"Face for highlighting the current line with `</span><span class="org-constant"><span class="org-doc">highlight-line-gnus</span></span><span class="org-doc">'."</span>
    <span class="org-builtin">:group</span> 'hl-line)

  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven--hl-line-highlight</span> ()
    <span class="org-doc">"Enable line highlighting in the current buffer."</span>
    (set (make-local-variable 'hl-line-face) 'highlight-line-gnus)
    (hl-line-mode 1))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">highlight current line in group buffer</span>
  (add-hook 'gnus-group-mode-hook 'leuven--hl-line-highlight)
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (message <span class="org-string">"2 Group Buffer... Done"</span>)
</pre></div>
</div>
</div>
</div>
<div id="outline-container-orgheadline16" class="outline-2">
<h2 id="orgheadline16">Summary buffer</h2>
<div class="outline-text-2 org-src-container" id="text-orgheadline16">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">* 3 (info "(gnus)The Summary Buffer")</span>

  (message <span class="org-string">"3 Summary Buffer..."</span>)
</pre></div>
<div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17">Summary Buffer Format</h3>
<div class="outline-text-3" id="text-orgheadline17">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.1 (info "(gnus)Summary Buffer Format")</span>
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Auxiliary summary mode commands for Gnus.</span>
  (<span class="org-keyword">when</span> (try-require 'rs-gnus-summary-<span class="org-leuven-highlight">XXX</span>)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Summary line indicators.</span>
    (setq rs-gnus-summary-line-content-type-alist
          '((<span class="org-string">".*"</span> <span class="org-string">" "</span>)
            (<span class="org-string">"^multipart/mixed"</span> <span class="org-string">"@"</span>)))

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Display `@' for message with attachment in summary line.</span>
    (<span class="org-keyword">defalias</span> '<span class="org-function-name">gnus-user-format-function-attachment</span>
      'rs-gnus-summary-line-content-type)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">Alias for the score function.</span>
    (<span class="org-keyword">defalias</span> '<span class="org-function-name">gnus-user-format-function-score</span>
      'rs-gnus-summary-line-score))
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">date format depending on age of article</span>
  (setq gnus-user-date-format-alist <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-constant"><span class="org-comment">user-date</span></span><span class="org-comment">'</span>
        '(((gnus-seconds-today) . <span class="org-string">"Today, %H:%M"</span>)
          ((+ 86400 (gnus-seconds-today)) . <span class="org-string">"Yesterday, %H:%M"</span>)
          (604800 . <span class="org-string">"%A, %H:%M"</span>)
          ((gnus-seconds-month) . <span class="org-string">"%d %a %H:%M"</span>)
          ((gnus-seconds-year) . <span class="org-string">"%m-%d %a %H:%M"</span>)
          (t . <span class="org-string">"%Y-%m-%d %a %H:%M"</span>)))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">create some faces</span>
  (<span class="org-keyword">defface</span> <span class="org-variable-name">leuven-gnus-date</span> '((t (<span class="org-builtin">:foreground</span> <span class="org-string">"#FF80BF"</span>)))
    <span class="org-doc">"Face for date in summary buffer."</span>)
 (<span class="org-keyword">defface</span> <span class="org-variable-name">leuven-gnus-size</span> '((t (<span class="org-builtin">:foreground</span> <span class="org-string">"#8FBF60"</span>)))
    <span class="org-doc">"Face for size of article in summary buffer."</span>)

  (setq gnus-face-7 'gnus-summary-high-unread)
  (setq gnus-face-8 'leuven-gnus-date)
  (setq gnus-face-9 'leuven-gnus-size)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">format specification of the lines in the summary buffer</span>
  (setq gnus-summary-line-format
        <span class="org-comment-delimiter">;; </span><span class="org-comment">for the record, the default string is</span>
        <span class="org-comment-delimiter">;; </span><span class="org-comment">`%U%R%z%I%(%[%4L: %-20,20n%]%) %s\n'</span>
        (concat
         <span class="org-string">"%U"</span>                           <span class="org-comment-delimiter">; </span><span class="org-comment">"read" status</span>
         <span class="org-string">"%3{%R%}"</span>                      <span class="org-comment-delimiter">; </span><span class="org-comment">"reply" status</span>
         <span class="org-string">"%7{%z%} "</span>                     <span class="org-comment-delimiter">; </span><span class="org-comment">score</span>
         <span class="org-string">"%8{%~(pad-left 20)&amp;user-date; %} "</span> <span class="org-comment-delimiter">; </span><span class="org-comment">date</span>
         <span class="org-string">"%9{ %4k %}"</span>                   <span class="org-comment-delimiter">; </span><span class="org-comment">size</span>
         <span class="org-string">"%*"</span> <span class="org-string">"%-15,15f "</span>               <span class="org-comment-delimiter">; </span><span class="org-comment">cursor before name of the poster</span>
         <span class="org-comment-delimiter">;; </span><span class="org-comment">(if (boundp 'rs-gnus-summary-line-content-type-alist)</span>
         <span class="org-comment-delimiter">;;     </span><span class="org-comment">"%u&amp;attachment; ")</span>
         <span class="org-string">"%u&amp;r;  "</span>
         <span class="org-string">"%B"</span>
         <span class="org-string">"%I%s"</span>
         <span class="org-string">"\n"</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">string indicating that the current article has the same subject as the</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">previous</span>
  (setq gnus-summary-same-subject <span class="org-string">""</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">strings indicating that the current article has the same subject as the</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">previous</span>
  (<span class="org-keyword">if</span> (char-displayable-p ?\u2514)      <span class="org-comment-delimiter">; </span><span class="org-comment">box drawings</span>
      (<span class="org-keyword">progn</span>                            <span class="org-comment-delimiter">; </span><span class="org-comment">tree layout using Unicode characters</span>
        (setq gnus-sum-thread-tree-root <span class="org-string">""</span>)
        (setq gnus-sum-thread-tree-false-root <span class="org-string">""</span>)
        (setq gnus-sum-thread-tree-single-indent <span class="org-string">""</span>)
        (setq gnus-sum-thread-tree-indent <span class="org-string">"    "</span>)
        (setq gnus-sum-thread-tree-vertical <span class="org-string">"│   "</span>)
        (setq gnus-sum-thread-tree-leaf-with-other <span class="org-string">"├───"</span>)
        (setq gnus-sum-thread-tree-single-leaf <span class="org-string">"└───"</span>))
    (<span class="org-keyword">progn</span>                              <span class="org-comment-delimiter">; </span><span class="org-comment">tree layout using ASCII characters</span>
      (setq gnus-sum-thread-tree-root <span class="org-string">""</span>)
      (setq gnus-sum-thread-tree-false-root <span class="org-string">""</span>)
      (setq gnus-sum-thread-tree-single-indent <span class="org-string">""</span>)
      (setq gnus-sum-thread-tree-indent <span class="org-string">"    "</span>)
      (setq gnus-sum-thread-tree-vertical <span class="org-string">"|   "</span>)
      (setq gnus-sum-thread-tree-leaf-with-other <span class="org-string">"+---"</span>)
      (setq gnus-sum-thread-tree-single-leaf <span class="org-string">"+---"</span>))) <span class="org-comment-delimiter">; </span><span class="org-comment">"`---"</span>

  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"message"</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">regexp matching alternative email addresses</span>
    (setq message-alternative-emails
          (concat
           (regexp-quote <span class="org-string">"johndoe@example.com"</span>) <span class="org-string">"</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
           (regexp-quote <span class="org-string">"janedoe@example.com"</span>)))

    <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-constant"><span class="org-comment">From</span></span><span class="org-comment">' headers that may be suppressed in favor of `</span><span class="org-constant"><span class="org-comment">To</span></span><span class="org-comment">' headers</span>
    (setq gnus-ignored-from-addresses
          (concat
           (regexp-quote user-mail-address) <span class="org-string">"</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span> message-alternative-emails)))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">extra headers to parse (to check when matching recipients)</span>
  (<span class="org-keyword">when</span> (boundp 'nnmail-extra-headers)
    (add-to-list 'nnmail-extra-headers 'Cc))

  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-gnus-count-recipients</span> (header)
    <span class="org-doc">"Given a Gnus message header, returns priority mark.</span>
<span class="org-doc">  If I am the only recipient, return \"!\".</span>
<span class="org-doc">  If I am one of the recipients listed in To:, return \"T\".</span>
<span class="org-doc">  If I am one of a few recipients, return \"C\".</span>
<span class="org-doc">  If I am one of many recipients, return \"*\".</span>
<span class="org-doc">  Else, return \" \"."</span>
    (<span class="org-keyword">let*</span> ((to (or (cdr (assoc 'To (mail-header-extra header))) <span class="org-string">""</span>))
           (cc (or (cdr (assoc 'Cc (mail-header-extra header))) <span class="org-string">""</span>)))
      (<span class="org-keyword">cond</span>
       ((and (string-match gnus-ignored-from-addresses to)
             (fboundp 'bbdb-split))
        (<span class="org-keyword">let</span> ((len (length (bbdb-split to <span class="org-string">","</span>))))
          (<span class="org-keyword">cond</span>
           ((= len 1) <span class="org-string">"»"</span>)
           (t <span class="org-string">"T"</span>))))
       ((and (string-match gnus-ignored-from-addresses (concat to <span class="org-string">", "</span> cc))
             (fboundp 'bbdb-split))
        (<span class="org-keyword">if</span> (&lt; (length (bbdb-split (concat to <span class="org-string">", "</span> cc) <span class="org-string">","</span>)) 5)
            <span class="org-comment-delimiter">;; </span><span class="org-comment">number of recipients to consider as large</span>
            <span class="org-string">"C"</span>
          <span class="org-string">"*"</span>))
       (t <span class="org-string">" "</span>))))

  (<span class="org-keyword">defalias</span> '<span class="org-function-name">gnus-user-format-function-r</span> 'leuven-gnus-count-recipients)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">format specification for the summary mode line</span>
  (setq gnus-summary-mode-line-format <span class="org-string">"%V: %%b"</span>)
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline18" class="outline-3">
<h3 id="orgheadline18">Reply, Followup and Post</h3>
<div class="outline-text-3" id="text-orgheadline18">
<p>Messages posted via Usenet do not show up in the Emacs bug tracker. Avoid to forget about this programmatically!</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.5 (info "(gnus)Reply Followup and Post")</span>

  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-gnus-summary-followup-with-original</span> ()
    <span class="org-doc">"Force sending messages to `</span><span class="org-constant"><span class="org-doc">gnu.emacs.bug</span></span><span class="org-doc">' per email."</span>
    (interactive)
    (<span class="org-keyword">if</span> (string-match (rx <span class="org-string">"gnu.emacs.bug"</span>) gnus-newsgroup-name)
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">Answer per email.</span>
        (call-interactively 'gnus-summary-wide-reply-with-original)
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">Post via news.</span>
      (call-interactively 'gnus-summary-followup-with-original)))

  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"gnus-sum"</span>
    (define-key gnus-summary-mode-map
      (kbd <span class="org-string">"F"</span>) 'leuven-gnus-summary-followup-with-original))
</pre></div>
<p>Source: Michael Heerdegen.</p>
</div>
</div>
<div id="outline-container-orgheadline19" class="outline-3">
<h3 id="orgheadline19">Marking Articles</h3>
<div class="outline-text-3" id="text-orgheadline19">
<p><a href="https://github.com/cofi/dotfiles/blob/master/gnus.el">https://github.com/cofi/dotfiles/blob/master/gnus.el</a></p>
</div>
<div id="outline-container-orgheadline20" class="outline-4">
<h4 id="orgheadline20">Unread Articles</h4>
<div class="outline-text-4 org-src-container" id="text-orgheadline20">
<pre class="src src-emacs-lisp">
  (<span class="org-keyword">when</span> (char-displayable-p ?\u2691)
    (setq gnus-ticked-mark ?⚑))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2690)
    (setq gnus-dormant-mark ?⚐))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2709)
    (setq gnus-unread-mark ?✉))
</pre></div>
</div>
<div id="outline-container-orgheadline21" class="outline-4">
<h4 id="orgheadline21">Read Articles</h4>
<div class="outline-text-4 org-src-container" id="text-orgheadline21">
<pre class="src src-emacs-lisp">
  (<span class="org-keyword">when</span> (char-displayable-p ?\u2717)
    (setq gnus-del-mark ?✗))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2713)
    (setq gnus-read-mark ?✓))

  (setq gnus-ancient-mark ? )

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2620)
    (setq gnus-killed-mark ?☠))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2197)
    (setq gnus-canceled-mark ?↗))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u267B)
    (setq gnus-expirable-mark ?♻))
</pre></div>
</div>
<div id="outline-container-orgheadline22" class="outline-4">
<h4 id="orgheadline22">Other marks</h4>
<div class="outline-text-4" id="text-orgheadline22">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (<span class="org-keyword">when</span> (char-displayable-p ?\u21BA)
    (setq gnus-replied-mark ?↺))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u21AA)
    (setq gnus-forwarded-mark ?↪))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u260D)
    (setq gnus-cached-mark ?☍))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2729)
    (setq gnus-unseen-mark ?✩))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2699)
    (setq gnus-process-mark ?⚙))
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (<span class="org-keyword">when</span> (char-displayable-p ?\u2605)
    (setq gnus-recent-mark ?★))
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline23" class="outline-4">
<h4 id="orgheadline23">Score Variables</h4>
<div class="outline-text-4 org-src-container" id="text-orgheadline23">
<pre class="src src-emacs-lisp">
  (<span class="org-keyword">when</span> (char-displayable-p ?\u2191)
    (setq gnus-score-over-mark ?↑))

  (<span class="org-keyword">when</span> (char-displayable-p ?\u2193)
    (setq gnus-score-below-mark ?↓))
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline24" class="outline-3">
<h3 id="orgheadline24">Threading</h3>
<div class="outline-text-3" id="text-orgheadline24">
<p>Threading is the representation of discussions "as they happen".</p>
<p>Use <code>T T</code> to toggle threading.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.9 (info "(gnus)Threading")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Gather threads by comparing the Subject header of the articles.</span>
  (setq gnus-summary-thread-gathering-function
        'gnus-gather-threads-by-subject)
        <span class="org-comment-delimiter">;; </span><span class="org-comment">'gnus-gather-threads-by-references)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Don't grab old headers to build threads.</span>
  (setq gnus-fetch-old-headers nil)     <span class="org-comment-delimiter">; </span><span class="org-comment">nil to speed up (otherwise, it can</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">seriously impact performance).</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Fill in all the gaps to tie loose threads together.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq gnus-build-sparse-threads 'some)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Sort the articles within a thread after it has been gathered together.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq gnus-sort-gathered-threads-function 'gnus-thread-sort-by-date)</span>
</pre></div>
<p>Show/hide threads with <code>&gt;</code> / <code>&lt;</code>.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (define-key gnus-summary-mode-map
    (kbd <span class="org-string">"&gt;"</span>) 'gnus-summary-show-thread)

  (define-key gnus-summary-mode-map
    (kbd <span class="org-string">"&lt;"</span>) 'gnus-summary-hide-thread)
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline25" class="outline-3">
<h3 id="orgheadline25">Sorting the Summary Buffer</h3>
<div class="outline-text-3" id="text-orgheadline25">
<p><b>Primary</b> sort key should be the <b>last</b> function in the list.</p>
<div class="tip">
<p>You should always include <code>gnus-thread-sort-by-number</code> in the list, probably as first (least important) element.</p>
</div>
<div class="warning">
<p>Sorting by date is often much slower than sorting by number, and the sorting order is very similar.</p>
</div>
<p>The threads with the highest article scores in total are on top in my summary buffers. For threads with equal scores, I sort by the most recent article in a thread (older before younger, thus the not). If that still doesn't distinguish 2 threads, it's sorted by article number (that should always be included as last element to guarantee a total ordering).</p>
<p>By the way: in mail groups (except for mailing list groups) I disable scoring, so there the sorting by recency of youngest message in thread is the decision maker. I like that in older-before-younger order, because then I read older replies to an article before younger replies.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.10 (info "(gnus)Sorting the Summary Buffer")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Sort threads in descending article order.</span>
  (setq gnus-thread-sort-functions
        '(gnus-thread-sort-by-number
          (not gnus-thread-sort-by-most-recent-date)
          <span class="org-comment-delimiter">;; </span><span class="org-comment">gnus-thread-sort-by-total-score</span>
          ))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">If needed, look at `</span><span class="org-constant"><span class="org-comment">gnus-subthread-sort-functions</span></span><span class="org-comment">' for sorting</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">subthreads in the summary buffer.</span>
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline26" class="outline-3">
<h3 id="orgheadline26">Article Caching</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline26">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.12 (info "(gnus)Article Caching")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Use the cache.</span>
  (setq gnus-use-cache t)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Local cache.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq gnus-cache-directory (concat gnus-directory "cache/"))</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Cache your nnimap groups.</span>
  (setq gnus-cacheable-groups <span class="org-string">"^nnimap"</span>)
</pre></div>
</div>
<div id="outline-container-orgheadline27" class="outline-3">
<h3 id="orgheadline27">Article Treatment</h3>
<div class="outline-text-3" id="text-orgheadline27">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.18 (info "(gnus)Article Treatment")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Change a `\205' figure to "...".</span>
  (add-hook 'gnus-part-display-hook 'article-treat-dumbquotes)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Full shampoo of messages you read.</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-gnus-wash-this-article</span> ()
    <span class="org-doc">"Wash an article."</span>
    (interactive)
    (gnus-article-outlook-deuglify-article)
    (gnus-article-fill-cited-article nil '79)
    (gnus-article-capitalize-sentences)
    (message <span class="org-string">"Washed this article"</span>))

  (define-key gnus-summary-mode-map
    (kbd <span class="org-string">"C-c w"</span>) 'leuven-gnus-wash-this-article)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">What is to be considered a signature.</span>
  (setq gnus-signature-separator
        '(<span class="org-string">"^-- $"</span>                       <span class="org-comment-delimiter">; </span><span class="org-comment">The standard.</span>
          <span class="org-string">"^________*$"</span>))               <span class="org-comment-delimiter">; </span><span class="org-comment">A long line of underscores is also</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">popular.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Limit (in lines, in floating point) to what is considered a signature.</span>
  (setq gnus-signature-limit 20.0)
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-prefix-line</span> ()
    <span class="org-doc">"Prefix the current line with `&gt;'."</span>
    (interactive)
    (beginning-of-line)
    (<span class="org-keyword">while</span>
        (<span class="org-keyword">progn</span>
          <span class="org-comment-delimiter">;; </span><span class="org-comment">repeat...</span>
          (<span class="org-keyword">if</span> (looking-at <span class="org-string">"[&gt;\n]"</span>)
              (insert <span class="org-string">"&gt;"</span>)
            (insert <span class="org-string">"&gt; "</span>))
          (forward-line 1)
          (beginning-of-line)
          (not
           <span class="org-comment-delimiter">;; </span><span class="org-comment">...until blank line found</span>
           (looking-at <span class="org-string">" *$"</span>)))))

  (global-set-key (kbd <span class="org-string">"&lt;S-f5&gt;"</span>) 'leuven-prefix-line)
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Banners to remove.</span>
  (setq gnus-article-address-banner-alist
        '((<span class="org-string">"@yahoo\\.com"</span> .
           <span class="org-string">"^__________________+\nDo you Yahoo!\\?\n.*\n.*\n"</span>)
          (<span class="org-string">"@hotmail\\.com</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">@msn.com"</span> .
           <span class="org-string">"^_________________________________________________________________\n.*MSN .*\n.*\n"</span>)))

  <span class="org-comment-delimiter">;; </span><span class="org-leuven-highlight"><span class="org-comment">FIXME</span></span><span class="org-comment"> This is under test!</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">L'affichage des messages</span>
  (setq gnus-article-display-hook
        '(gnus-article-hide-headers-if-wanted
          gnus-article-date-lapsed
          gnus-article-hide-pgp
          gnus-article-treat-overstrike
          gnus-article-de-quoted-unreadable
          gnus-article-strip-leading-blank-lines
          gnus-article-remove-trailing-blank-lines
          gnus-article-strip-multiple-blank-lines
          gnus-article-highlight
          gnus-article-highlight-signature
          gnus-article-emphasize
          gnus-article-fill-cited-article))
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline28" class="outline-3">
<h3 id="orgheadline28">MIME Commands</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline28">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.19 (info "(gnus)MIME Commands")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Rewrite file names of MIME parts (delete control characters, delete shell</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">gotchas, handle evil white spaces).</span>
  (setq mm-file-name-rewrite-functions
        '(mm-file-name-delete-control
          mm-file-name-delete-gotchas
          mm-file-name-trim-whitespace
          mm-file-name-collapse-whitespace
          mm-file-name-replace-whitespace))
</pre></div>
</div>
<div id="outline-container-orgheadline29" class="outline-3">
<h3 id="orgheadline29">Charsets</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline29">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.20 (info "(gnus)Charsets")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">permitted unencoded charsets for posting</span>
  (setq gnus-group-posting-charset-alist
        '((message-this-is-news nil (iso-8859-15))))
</pre></div>
</div>
<div id="outline-container-orgheadline30" class="outline-3">
<h3 id="orgheadline30">Various Summary Stuff</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline30">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 3.27 (info "(gnus)Various Summary Stuff")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">highlight current line in summary buffer</span>
  (<span class="org-keyword">when</span> (fboundp 'leuven--hl-line-highlight)
    (add-hook 'gnus-summary-mode-hook 'leuven--hl-line-highlight))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">search forward for an article containing a given regexp</span>
  (define-key gnus-summary-mode-map
    (kbd <span class="org-string">"s"</span>) 'gnus-summary-search-article-forward)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">repeat the last search through the articles in the summary buffer</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(without requiring a confirmation of the search string each time)</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">gnus-summary-search-article-forward-next</span> ()
    <span class="org-doc">"Repeat the last forward search."</span>
    (interactive)
    (gnus-summary-search-article-forward gnus-last-search-regexp nil))
  <span class="org-comment-delimiter">;; </span><span class="org-leuven-highlight"><span class="org-comment">TODO</span></span><span class="org-comment"> `</span><span class="org-constant"><span class="org-comment">g-s-s-a-f-next</span></span><span class="org-comment">' should be the only function to be called by the</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">user, whether or not the search is made for the first time or a</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">repetition of it</span>

  (define-key gnus-summary-mode-map
    (kbd <span class="org-string">"M-s"</span>) 'gnus-summary-search-article-forward-next)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">turn off the column number in the group buffer</span>
  (add-hook 'gnus-summary-mode-hook
            (<span class="org-keyword">lambda</span> ()
              (set (make-local-variable 'column-number-mode) nil)))
</pre></div>
<div id="outline-container-orgheadline31" class="outline-4">
<h4 id="orgheadline31"><a href="http://www.emacswiki.org/emacs/GnusStripes">Gnus Stripes</a></h4>
<div class="outline-text-4" id="text-orgheadline31">
<p>The following does work, but hides the read background for read postings, as the stripe background is superimposed on my "read" background.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;;  </span><span class="org-comment">;; the color of the stripes is obtained by dimming the frame background color</span>
  <span class="org-comment-delimiter">;;  </span><span class="org-comment">(defvar stripe-intensity 12</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">"*intensity of the shade. Used to compute the color of the stripes.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">0 means no shading of the background color, nil means gray80")</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;;  </span><span class="org-comment">;; a command that computes the rgb code of the shaded background color</span>
  <span class="org-comment-delimiter">;;  </span><span class="org-comment">(defun shade-color (intensity)</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">"print the #rgb color of the background, dimmed according to intensity"</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">(interactive "nIntensity of the shade : ")</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">(apply 'format "#%02x%02x%02x"</span>
  <span class="org-comment-delimiter">;;           </span><span class="org-comment">(mapcar (lambda (x)</span>
  <span class="org-comment-delimiter">;;                     </span><span class="org-comment">(if (&gt; (lsh x -8) intensity)</span>
  <span class="org-comment-delimiter">;;                         </span><span class="org-comment">(- (lsh x -8) intensity)</span>
  <span class="org-comment-delimiter">;;                       </span><span class="org-comment">0))</span>
  <span class="org-comment-delimiter">;;                   </span><span class="org-comment">(color-values (cdr (assoc 'background-color (frame-parameters)))))))</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;;  </span><span class="org-comment">;; the command that actually puts the stripes in the current buffer</span>
  <span class="org-comment-delimiter">;;  </span><span class="org-comment">(defun stripe-alternate ()</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">"stripes all down the current buffer"</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">(interactive)</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">;; compute the color of the stripes from the value of stripe-intensity</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">(if stripe-intensity</span>
  <span class="org-comment-delimiter">;;        </span><span class="org-comment">(setq stripe-overlay-face (shade-color stripe-intensity))</span>
  <span class="org-comment-delimiter">;;      </span><span class="org-comment">(setq stripe-overlay-face "gray80"))</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">;; put the overlay in the current buffer</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">(save-excursion</span>
  <span class="org-comment-delimiter">;;      </span><span class="org-comment">(goto-char (point-min))</span>
  <span class="org-comment-delimiter">;;      </span><span class="org-comment">(let (stripe-overlay)</span>
  <span class="org-comment-delimiter">;;        </span><span class="org-comment">(while (not (eobp))</span>
  <span class="org-comment-delimiter">;;          </span><span class="org-comment">(forward-line)</span>
  <span class="org-comment-delimiter">;;          </span><span class="org-comment">(setq stripe-overlay</span>
  <span class="org-comment-delimiter">;;                </span><span class="org-comment">(make-overlay (line-beginning-position)</span>
  <span class="org-comment-delimiter">;;                              </span><span class="org-comment">(line-beginning-position 2)))</span>
  <span class="org-comment-delimiter">;;          </span><span class="org-comment">(overlay-put stripe-overlay 'face (list :background stripe-overlay-face))</span>
  <span class="org-comment-delimiter">;;          </span><span class="org-comment">(overlay-put stripe-overlay 'priority -1)</span>
  <span class="org-comment-delimiter">;;          </span><span class="org-comment">(forward-line)))))</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;;  </span><span class="org-comment">;; activate the stripes for the mail buffers only</span>
  <span class="org-comment-delimiter">;;  </span><span class="org-comment">(add-hook 'gnus-summary-prepare-hook (lambda ()</span>
  <span class="org-comment-delimiter">;;                                         </span><span class="org-comment">(with-current-buffer gnus-summary-buffer</span>
  <span class="org-comment-delimiter">;;                                           </span><span class="org-comment">;; (unless (gnus-news-group-p gnus-newsgroup-name)</span>
  <span class="org-comment-delimiter">;;                                             </span><span class="org-comment">(stripe-alternate))))</span>
  <span class="org-comment-delimiter">;;  </span><span class="org-comment">;; )</span>
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (message <span class="org-string">"3 Summary Buffer... Done"</span>)
</pre></div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline32" class="outline-2">
<h2 id="orgheadline32">Article Buffer</h2>
<div class="outline-text-2 org-src-container" id="text-orgheadline32">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">* 4 (info "(gnus)The Article Buffer")</span>

  (message <span class="org-string">"4 Article Buffer..."</span>)
</pre></div>
<div id="outline-container-orgheadline33" class="outline-3">
<h3 id="orgheadline33">Hiding headers</h3>
<div class="outline-text-3" id="text-orgheadline33">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 4.1 Hiding headers</span>

  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"gnus-art"</span>
     <span class="org-comment-delimiter">;; </span><span class="org-leuven-highlight"><span class="org-comment">TODO</span></span><span class="org-comment"> Could be limited to news headers only</span>
     (setq gnus-visible-headers
           (concat
           <span class="org-string">"^User-Agent:</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">^X-Spam-Level:</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">^X-Report-Spam:</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
           gnus-visible-headers))

     <span class="org-comment-delimiter">;; </span><span class="org-comment">when Gnus, highlight user agent</span>
     (add-to-list
      'gnus-header-face-alist
      (list (concat
             <span class="org-string">"^"</span>
             (regexp-opt '(<span class="org-string">"User-Agent"</span> <span class="org-string">"X-Mailer"</span> <span class="org-string">"Newsreader"</span> <span class="org-string">"X-Newsreader"</span>) t)
             <span class="org-string">":.*Gnus.*"</span>)
            nil 'gnus-server-opened)))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">,----[ (info "(gnus)Choosing Commands") ]</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">| `G j'</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">| `j'</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">|      Ask for an article number or `</span><span class="org-constant"><span class="org-comment">Message-ID</span></span><span class="org-comment">', and then go to that</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">|      article (`</span><span class="org-constant"><span class="org-comment">gnus-summary-goto-article</span></span><span class="org-comment">').</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">`----</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">&gt; At the moment, I am appending the `</span><span class="org-constant"><span class="org-comment">Message-ID</span></span><span class="org-comment">' to</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">&gt; `</span><span class="org-constant"><span class="org-comment">http://groups.google.com/groups?selm=</span></span><span class="org-comment">' to get the target URL, but</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">&gt; this does not work reliably.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">auxiliary article mode commands for Gnus</span>
  (<span class="org-keyword">when</span> (try-require 'rs-gnus-article-<span class="org-leuven-highlight">XXX</span>)
    <span class="org-comment-delimiter">;; </span><span class="org-leuven-highlight"><span class="org-comment">FIXME</span></span><span class="org-comment"> Break my 2-column display for the mails (summary | article)</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">initialization</span>
    (rs-gnus-buttons)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">(defun rs-gnus-button-browse-mid (mid)</span>
    <span class="org-comment-delimiter">;;   </span><span class="org-comment">"Browse MID on Google or Gmane."</span>
    <span class="org-comment-delimiter">;;   </span><span class="org-comment">(message "mid=`</span><span class="org-constant"><span class="org-comment">%s</span></span><span class="org-comment">'" mid)</span>
    <span class="org-comment-delimiter">;;   </span><span class="org-comment">(browse-url (concat</span>
    <span class="org-comment-delimiter">;;                </span><span class="org-comment">(if (string-match "\\bgmane\\." gnus-newsgroup-name)</span>
    <span class="org-comment-delimiter">;;                    </span><span class="org-comment">"http://thread.gmane.org/31"</span>
    <span class="org-comment-delimiter">;;                  </span><span class="org-comment">"http://groups.google.com/groups?as_umsgid=32")</span>
    <span class="org-comment-delimiter">;;                </span><span class="org-comment">mid)))</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">open the article in the browser when clicking (or using `</span><span class="org-constant"><span class="org-comment">RET</span></span><span class="org-comment">') on a</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">mid in `</span><span class="org-constant"><span class="org-comment">References</span></span><span class="org-comment">' and `</span><span class="org-constant"><span class="org-comment">Message-ID</span></span><span class="org-comment">' headers</span>
    (add-to-list
     'gnus-header-button-alist
     '(<span class="org-string">"^</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">(</span></span><span class="org-string">References</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Message-I[Dd]</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">)</span></span><span class="org-string">:"</span> <span class="org-string">"&lt;</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">(</span></span><span class="org-string">[</span><span class="org-negation-char"><span class="org-string">^</span></span><span class="org-string">&lt;&gt;]+</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">)</span></span><span class="org-string">&gt;"</span>
       1 (&gt;= gnus-button-message-level 0) rs-gnus-button-browse-mid 1)
     t)) <span class="org-comment-delimiter">;; </span><span class="org-comment">append!</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">** 4.2 (info "(gnus)Using MIME")</span>

  (message <span class="org-string">"Emacs MIME..."</span>)
</pre></div>
<div class="note">
<p>Use <code>K i</code> from the summary buffer (or <code>i</code> on the MIME button in the article buffer) to insert the contents of the MIME object into the buffer (<code>gnus-mime-inline-part</code>) as <code>text/plain</code>, in order to read them directly in Gnus.</p>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline34" class="outline-2">
<h2 id="orgheadline34">Emacs MIME</h2>
<div class="outline-text-2 org-src-container" id="text-orgheadline34">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">* (info "(emacs-mime)Top")</span>
</pre></div>
<div id="outline-container-orgheadline35" class="outline-3">
<h3 id="orgheadline35">Decoding and Viewing</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline35">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 1 (info "(emacs-mime)Decoding and Viewing")</span>
</pre></div>
</div>
<div id="outline-container-orgheadline36" class="outline-3">
<h3 id="orgheadline36">Non-MIME</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline36">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 1.2 (info "(emacs-mime)Non-MIME")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Regexp of Emacs sources groups.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq mm-uu-emacs-sources-regexp "emacs")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Regexp matching diff groups.</span>
  (setq mm-uu-diff-groups-regexp <span class="org-string">".*"</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Regexp matching TeX groups.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq mm-uu-tex-groups-regexp ".*")</span>
</pre></div>
</div>
<div id="outline-container-orgheadline37" class="outline-3">
<h3 id="orgheadline37">Display Customization</h3>
<div class="outline-text-3" id="text-orgheadline37">
<p>You can view <code>text/html</code> parts of the current article with a Web browser by pressing <code>K H</code> (<code>gnus-article-browse-html-article</code>).</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 1.5 (info "(emacs-mime)Display Customization")</span>

  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"mm-decode"</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; MIME type that will be displayed externally automatically</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(add-to-list 'mm-automatic-external-display "text/html")</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">do not treat inline images as real attachments (display them, instead)</span>
    (add-to-list 'mm-attachment-override-types <span class="org-string">"image/.*"</span>)
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">"text/x-vcard"...</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">don't render HTML automatically *when plain text alternative is</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">available*</span>
    (add-to-list 'mm-discouraged-alternatives <span class="org-string">"text/html"</span>)
    (add-to-list 'mm-discouraged-alternatives <span class="org-string">"text/richtext"</span>)
    (add-to-list 'mm-discouraged-alternatives <span class="org-string">"text/enriched"</span>)
    (add-to-list 'mm-discouraged-alternatives <span class="org-string">"multipart/related"</span>)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">all images fit in the buffer</span>
    (setq mm-inline-large-images t)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; always show HTML mails as attachments (even if they can be</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; displayed) use `</span><span class="org-constant"><span class="org-comment">browse-url-browser-function</span></span><span class="org-comment">' (firefox) to render</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; HTML mails</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(push "text/html" mm-inline-override-types)</span>


    <span class="org-comment-delimiter">;; </span><span class="org-comment">use `</span><span class="org-constant"><span class="org-comment">w3m</span></span><span class="org-comment">' browser (if installed) to render HTML-only mails</span>
    (setq mm-text-html-renderer
          (<span class="org-keyword">cond</span> ((executable-find <span class="org-string">"w3m"</span>) 'w3m) <span class="org-comment-delimiter">; </span><span class="org-comment">or `</span><span class="org-constant"><span class="org-comment">gnus-w3m</span></span><span class="org-comment">'?</span>
                (t 'html2text)))        <span class="org-comment-delimiter">; </span><span class="org-comment">Emacs built-in</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">recent Gnusae have a built-in HTML renderer which even (somewhat)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">handles CSS</span>
    (setq mm-text-html-renderer 'shr) <span class="org-comment-delimiter">; </span><span class="org-comment">eww-backend?</span>
    )

  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"w3m"</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq browse-url-browser-function 'w3m-browse-url)</span>
     (setq mm-inline-text-html-renderer
           'mm-inline-text-html-render-with-w3m)
     (setq gnus-article-wash-function
           'gnus-article-wash-html-with-w3m)

     <span class="org-comment-delimiter">;; </span><span class="org-comment">Whenever you try to browse URLs found in articles, Gnus</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">(`</span><span class="org-constant"><span class="org-comment">emacs-w3m</span></span><span class="org-comment">', in fact) complains that "This link is considered</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">unsafe...". To turn it off, frob the variables</span>
     <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-constant"><span class="org-comment">w3m-safe-url-regexp</span></span><span class="org-comment">' and `</span><span class="org-constant"><span class="org-comment">mm-w3m-safe-url-regexp</span></span><span class="org-comment">'.</span>
     )

  <span class="org-comment-delimiter">;; </span><span class="org-comment">allow retrieving images in HTML contents with the &lt;img&gt; tags</span>
  (setq mm-inline-text-html-with-images t)
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Remove HTML tags from a buffer</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-wash-ugly-html</span> ()
    <span class="org-doc">"Remove ugly HTML tags."</span>
    (interactive)
    (toggle-read-only -1)
    (<span class="org-keyword">save-excursion</span>
      (goto-char (point-min))
      (<span class="org-keyword">while</span> (re-search-forward <span class="org-string">"&lt;[</span><span class="org-negation-char"><span class="org-string">^</span></span><span class="org-string">#][</span><span class="org-negation-char"><span class="org-string">^</span></span><span class="org-string">&lt;@&gt;]*&gt;"</span> nil t)
        (replace-match <span class="org-string">""</span> nil nil))
      (goto-char (point-min))
      (<span class="org-keyword">while</span> (re-search-forward <span class="org-string">"&amp;gt;"</span> nil t)
        (replace-match <span class="org-string">"&gt;"</span> nil nil))
      (goto-char (point-min))
      (<span class="org-keyword">while</span> (re-search-forward <span class="org-string">"&amp;lt;"</span> nil t)
        (replace-match <span class="org-string">"&lt;"</span> nil nil))

      <span class="org-comment-delimiter">;; </span><span class="org-leuven-highlight"><span class="org-comment">FIXME</span></span><span class="org-comment"> Do not simply remove accents like it does now</span>
      (goto-char (point-min))
      (<span class="org-keyword">while</span> (re-search-forward <span class="org-string">"&amp;[</span><span class="org-negation-char"><span class="org-string">^</span></span><span class="org-string">;]*;"</span> nil t)
        (replace-match <span class="org-string">""</span> nil nil))))
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 1.6 (info "(emacs-mime)Files and Directories")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">default directory for saving attachments</span>
  (setq mm-default-directory
        (<span class="org-keyword">cond</span> ((or leuven--win32-p
                   leuven--cygwin-p)
               <span class="org-string">"~/"</span>)
              (t                        <span class="org-comment-delimiter">; </span><span class="org-comment">Linux</span>
               <span class="org-string">"~/Desktop/"</span>)))

  (<span class="org-keyword">when</span> (fboundp 'leuven-make-directory-yes-or-no)
    (leuven-make-directory-yes-or-no mm-default-directory))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">directory for storing temporary files (opened attachments as well)</span>
  (setq mm-tmp-directory temporary-file-directory)
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline38" class="outline-3">
<h3 id="orgheadline38">Basic Functions</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline38">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 4 (info "(emacs-mime)Basic Functions")</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 4.12 (info "(emacs-mime)mailcap")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Choose the right MIME type when sending an attachment.</span>
  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"mailcap"</span>
     (add-to-list 'mailcap-mime-extensions
                  '(<span class="org-string">".doc"</span> . <span class="org-string">"application/msword"</span>))
     (add-to-list 'mailcap-mime-extensions
                  '(<span class="org-string">".ppt"</span> . <span class="org-string">"application/vnd.ms-powerpoint"</span>)))
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">MIME content-types keyed by file ext.</span>
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline39" class="outline-2">
<h2 id="orgheadline39">Back to Article Buffer</h2>
<div class="outline-text-2" id="text-orgheadline39">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 4.4 (info "(gnus)Customizing Articles")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">(require 'gnus-art)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Add buttons.</span>
  (setq gnus-treat-buttonize t)
  (setq gnus-treat-buttonize-head 'head)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Do not display smileys as pictures.</span>
  (setq gnus-treat-display-smileys nil)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Sound.</span>
  (setq gnus-treat-play-sounds t)
</pre></div>
<p>Toggle coloring from HTML emails:</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">from Tassilo Horn, 2014-07-17</span>
  (setq shr-color-visible-distance-min 10)
  (setq shr-color-visible-luminance-min 60)
  (setq gnus-treat-fill-article 0)
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 4.6 (info "(gnus)Misc Article")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">format specification for the article mode line</span>
  (setq gnus-article-mode-line-format <span class="org-string">"%S%m"</span>)
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">make `C-c C-f' active from within messages</span>
  (define-key gnus-article-mode-map
    (kbd <span class="org-string">"C-c C-f"</span>) 'gnus-summary-mail-forward)
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (message <span class="org-string">"4 Article Buffer... Done"</span>)
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline40" class="outline-2">
<h2 id="orgheadline40">Composing Messages</h2>
<div class="outline-text-2 org-src-container" id="text-orgheadline40">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">* 5 (info "(gnus)Composing Messages")</span>

  (message <span class="org-string">"5 Composing Messages..."</span>)
</pre></div>
<div id="outline-container-orgheadline41" class="outline-3">
<h3 id="orgheadline41">Mail</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline41">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 5.1 (info "(gnus)Mail")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Gnus requests confirmation when replying to news (unlike mail)</span>
  (setq gnus-confirm-mail-reply-to-news t)
</pre></div>
</div>
<div id="outline-container-orgheadline42" class="outline-3">
<h3 id="orgheadline42">Posting Server</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline42">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 5.2 (info "(gnus)Posting Server")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">control the hostname sent in the first EHLO or HELO command sent to the</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">server (client sends `EHLO CLARK.smtpmail-local-domain')</span>
  (setq smtpmail-local-domain
        <span class="org-string">"i-did-not-set--mail-host-address--so-tickle-me"</span>)
        <span class="org-comment-delimiter">;;              </span><span class="org-comment">^^^^^^^^^^^^^^^^^</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">make the SMTP library add `@' and the specified domain name to</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">recipients specified in the message when they are sent using the RCPT</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">TO command (or when we simply enter an email address without its</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">domain extension)</span>
  (setq smtpmail-sendto-domain <span class="org-string">"local"</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">print info in buffer *trace of SMTP session to &lt;somewhere&gt;*</span>
  (setq smtpmail-debug-info t)          <span class="org-comment-delimiter">; </span><span class="org-comment">only to debug problems</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">send the SMTP VERB command (enabling verbose information from the SMTP</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">server)</span>
  (setq smtpmail-debug-verb t)
</pre></div>
</div>
<div id="outline-container-orgheadline43" class="outline-3">
<h3 id="orgheadline43">Archived Messages</h3>
<div class="outline-text-3" id="text-orgheadline43">
<p>The <code>Gcc:</code> header is about in which group to save the messages you've written.</p>
<p><code>gnus-message-archive-group</code> specifies which (if any) <code>Gcc:</code> header is inserted when a message buffer is <b>created</b>.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 5.5 (info "(gnus)Archived Messages")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Group in which to save the messages you've written.</span>
  (setq gnus-message-archive-group <span class="org-string">"INBOX.Sent"</span>)
</pre></div>
<p>The <code>Gcc:</code> header at the time of <b>sending</b> the message specifies where it is archived.</p>
<p>If you want to be asked for each <b>message to be sent</b>, you can change the <code>Gcc:</code> header in the <code>message-send-hook</code>.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">the Gcc Header specifies a local mail box that receives a copy of the</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">sent article</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">"Gcc:"-chooser, from Christoph Conrad</span>
  (<span class="org-keyword">defvar</span> <span class="org-variable-name">header-gcc-history</span> nil)
  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-choose-gcc</span>()
    (interactive)
    (<span class="org-keyword">let*</span> (<span class="org-comment-delimiter">;; </span><span class="org-comment">if this "group" is chosen the default "Gcc" remains</span>
           (default <span class="org-string">"INBOX"</span>)
           <span class="org-comment-delimiter">;; </span><span class="org-comment">if this "group" is chosen the default "Gcc" is deleted</span>
           (delete <span class="org-string">"INBOX.Trash"</span>)
           <span class="org-comment-delimiter">;; </span><span class="org-comment">else the choosen group is inserted as "Gcc:"</span>
           (groups (append gnus-newsrc-alist (list (list default 'dummy)
                                                   (list delete  'dummy))))
           (group (completing-read <span class="org-string">"Gcc: "</span>
                                   groups
                                   nil t default 'header-gcc-history))
           (completion-ignore-case t))
      <span class="org-comment-delimiter">;; </span><span class="org-comment">input?</span>
      (<span class="org-keyword">if</span> (not (equal default group))
          (<span class="org-keyword">progn</span>
            (message-remove-header <span class="org-string">"Gcc"</span> t)
            (<span class="org-keyword">if</span> (not (equal delete group))
                (message-add-header (concat <span class="org-string">"Gcc: "</span> group)))))))

  (add-hook 'message-send-hook 'leuven-choose-gcc)
</pre></div>
<p>I use it in such a way that, in all my IMAP mail groups, mails I write automatically end up in the group I wrote from.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">automatically mark Gcc articles (i.e., sent by myself) as read</span>
  (setq gnus-gcc-mark-as-read t)
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline44" class="outline-3">
<h3 id="orgheadline44">Posting Styles</h3>
<div class="outline-text-3" id="text-orgheadline44">
<p>Concept of "roles" in mutt.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 5.6 (info "(gnus)Posting Styles")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">an alternative to `</span><span class="org-constant"><span class="org-comment">gnus-posting-styles</span></span><span class="org-comment">', if you want to change accounts</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">on the fly while composing messages</span>
  (autoload 'gnus-alias-determine-identity <span class="org-string">"gnus-alias"</span> nil t)
  (add-hook 'message-setup-hook 'gnus-alias-determine-identity)

  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"gnus-alias"</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; add gnus-alias call to message mode hook</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(gnus-alias-init)</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">added one key binding</span>
    (define-key message-mode-map
      (kbd <span class="org-string">"C-c p"</span>) 'gnus-alias-select-identity)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">set up my identities</span>
    (setq gnus-alias-identity-alist
          '((<span class="org-string">"John-Doe-ID"</span>
             <span class="org-string">""</span>
             <span class="org-string">"John Doe <a href="mailto:johndoe%40example.com">&lt;johndoe@example.com&gt;</a>"</span>
             <span class="org-string">"John Doe"</span>
             ((<span class="org-string">"X-Url"</span> . <span class="org-string">"http://www.example.com/~john"</span>))
             <span class="org-string">"\nJohn\n"</span>
             <span class="org-string">"John Doe"</span>)

            (<span class="org-string">"Jane-Doe-ID"</span>
             <span class="org-string">""</span>
             <span class="org-string">"Jane Doe <a href="mailto:janedoe%40example.com">&lt;janedoe@example.com&gt;</a>"</span>
             <span class="org-string">"Jane Doe"</span>
             ((<span class="org-string">"X-Url"</span> . <span class="org-string">"Under construction..."</span>))
             <span class="org-string">"\nBest regards,\n  Jane\n"</span>
             <span class="org-string">"Jane Doe"</span>)))

    <span class="org-comment-delimiter">;; </span><span class="org-comment">automatically choose an identity given the message context</span>
    (setq gnus-alias-identity-rules
          '((<span class="org-string">"Newsgroups-Rule"</span>
             (<span class="org-string">"newsgroups"</span> <span class="org-string">".*"</span> current)
             <span class="org-string">"John-Doe-ID"</span>)

            (<span class="org-string">"John-Doe-Rule"</span>
             (<span class="org-string">"any"</span> <span class="org-string">"johndoe@example.com"</span> both)
             <span class="org-string">"John-Doe-ID"</span>)

            (<span class="org-string">"Jane-Doe-Rule"</span>
             (<span class="org-string">"any"</span> <span class="org-string">"janedoe@example.com"</span> both)
             <span class="org-string">"Jane-Doe-ID"</span>)))

    <span class="org-comment-delimiter">;; </span><span class="org-comment">identity to use when gnus-alias finds an unknown identity</span>
    (setq gnus-alias-unknown-identity-rule 'error)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; default identity (when it isn't able to determine which identity to</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; use)</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq gnus-alias-default-identity "John-Doe-ID")</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">old identity is completely removed before the new one is added</span>
    (setq gnus-alias-overlay-identities nil)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">allow your `</span><span class="org-constant"><span class="org-comment">Return-Path</span></span><span class="org-comment">' to be set properly</span>
    (setq gnus-alias-override-user-mail-address t)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">after an Identity is used, where should point be moved to?</span>
    (setq gnus-alias-point-position 'start-of-sig)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-constant"><span class="org-comment">From</span></span><span class="org-comment">' header becomes a button that you can click on</span>
    (setq gnus-alias-use-buttonized-from t)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">level of verbosity -- message output only (see `*gnus-alias debug*'</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">buffer, when maximum verbosity)</span>
    (setq gnus-alias-verbosity 1)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">set message envelope to content of `</span><span class="org-constant"><span class="org-comment">From</span></span><span class="org-comment">'</span>
    <span class="org-comment-delimiter">;; </span><span class="org-leuven-highlight"><span class="org-comment">XXX</span></span><span class="org-comment"> see `</span><span class="org-constant"><span class="org-comment">mail-specify-envelope-from</span></span><span class="org-comment">'</span>
    (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-set-msg-envelope-from</span>()
      <span class="org-doc">"Set `</span><span class="org-constant"><span class="org-doc">mail-envelope-from</span></span><span class="org-doc">' to the value in the \"From\" field."</span>
      (<span class="org-keyword">let*</span> ((from (message-fetch-field <span class="org-string">"From"</span> t))
             (first (1+ (string-match <span class="org-string">"&lt;"</span> from)))
             (last (string-match <span class="org-string">"&gt;"</span> from)))
        (setq mail-envelope-from (substring from first last))))

    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; alternative for FPZ??</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(defun leuven-set-msg-envelope-from ()</span>
    <span class="org-comment-delimiter">;;   </span><span class="org-comment">(let ((from (cadr</span>
    <span class="org-comment-delimiter">;;                </span><span class="org-comment">(mail-extract-address-components</span>
    <span class="org-comment-delimiter">;;                 </span><span class="org-comment">(message-field-value "from")))))</span>
    <span class="org-comment-delimiter">;;       </span><span class="org-comment">(setq mail-envelope-from from)))</span>

    (add-hook 'message-setup-hook 'leuven-set-msg-envelope-from)
    )
</pre></div>
</div>
<div id="outline-container-orgheadline45" class="outline-4">
<h4 id="orgheadline45">Multiple servers</h4>
<div class="outline-text-4" id="text-orgheadline45">
<p>Let Gnus decide which SMTP server should be used for sending email…</p>
<div class="note">
<p>See <a href="http://www.emacswiki.org/emacs/MultipleSMTPAccounts">http://www.emacswiki.org/emacs/MultipleSMTPAccounts</a> for looking at the <code>From:</code> header line of the current post.</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline46" class="outline-4">
<h4 id="orgheadline46">Headers</h4>
<div class="outline-text-4" id="text-orgheadline46">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">add certain headers before sending messages</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-message-add-content</span> ()
    <span class="org-comment-delimiter">;; </span><span class="org-comment">for Gmane address obfuscation</span>
    (message-add-header <span class="org-string">"X-Archive: encrypt"</span>))

  (add-hook 'message-send-hook 'leuven-message-add-content)
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (message <span class="org-string">"5 Composing Messages... Done"</span>)
</pre></div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline47" class="outline-2">
<h2 id="orgheadline47">Message</h2>
<div class="outline-text-2 org-src-container" id="text-orgheadline47">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">* (info "(message)Top")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Message mode has become the default mail editing mode in Emacs 23.2+</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(used by Gnus and RMail, at least)</span>

  (message <span class="org-string">"Message..."</span>)
</pre></div>
<div id="outline-container-orgheadline48" class="outline-3">
<h3 id="orgheadline48">Interface</h3>
<div class="outline-text-3" id="text-orgheadline48">
<p class="verse">&gt; Is there a way to configure multiple addresses?<br />
<br />
Yes. There are a couple of variables for that. I use a code piece like the one<br />
below to set the variables.<br /></p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (<span class="org-keyword">let</span> ((addr '(<span class="org-string">"primary.address@somewhere.invalid"</span>
                <span class="org-string">"another.address@isp.invalid"</span>
                <span class="org-string">"yet.another@address.invalid"</span>)))

    (setq-default
     user-mail-address (car addr)
     message-alternative-emails (regexp-opt (cdr addr) 'words)
     message-dont-reply-to-names (regexp-opt addr 'words)
     gnus-ignored-from-addresses message-dont-reply-to-names))
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 1 (info "(message)Interface")</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 1.1 (info "(message)New Mail Message")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">prepare a mail from the current buffer</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven-mail-current-region-or-buffer</span> ()
    <span class="org-doc">"Insert the current region or buffer into an email sending buffer."</span>
    (interactive)
    (<span class="org-keyword">save-excursion</span>
      (<span class="org-keyword">if</span> (use-region-p)
          (kill-ring-save (region-beginning) (region-end))
        (kill-ring-save (point-min) (point-max)))
      (mail)
      (end-of-buffer)
      (yank)                            <span class="org-comment-delimiter">; </span><span class="org-comment">insert text</span>
      (beginning-of-buffer)
      (next-line)
      (end-of-line)))

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 1.4 (info "(message)Wide Reply")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">addresses to prune (disable `</span><span class="org-constant"><span class="org-comment">Cc:</span></span><span class="org-comment">' to myself) when doing wide replies</span>
  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"message"</span>
    (<span class="org-keyword">when</span> (boundp 'gnus-ignored-from-addresses)
      (setq message-dont-reply-to-names gnus-ignored-from-addresses)))

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 1.8 (info "(message)Forwarding")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; delimiter inserted before forwarded messages</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq message-forward-start-separator "-----Original Message-----\n")</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; delimiter inserted after forwarded messages</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq message-forward-end-separator "\n")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">when forwarding mail, chop off these headers</span>
  (setq message-forward-ignored-headers
        (concat <span class="org-string">"^</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">(</span></span><span class="org-string">"</span>
                <span class="org-comment-delimiter">;; </span><span class="org-leuven-highlight"><span class="org-comment">FIXME</span></span><span class="org-comment"> Rewrite the following in a shorter way</span>
                <span class="org-comment-delimiter">;; </span><span class="org-comment">(mapconcat 'regexp-quote</span>
                <span class="org-comment-delimiter">;;            </span><span class="org-comment">'("Content-Class" "Content-language" "DKIM-Signature"</span>
                <span class="org-comment-delimiter">;;              </span><span class="org-comment">"Delivered-To" "Disposition-Notification-To")</span>
                <span class="org-comment-delimiter">;;            </span><span class="org-comment">"\\|")</span>

                <span class="org-string">"Approved</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Archived-At</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Authentication-Results</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Accept-Language</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">acceptlanguage</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Auto-Submitted</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"BCc</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Cancel-Lock</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Content-Class</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Content-language</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"DKIM-Signature</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Delivered-To</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Disposition-Notification-To</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">DomainKey-Signature</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Envelope-to</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Errors-To</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Face</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Importance</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">In-Reply-To</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Lines</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">List-.*</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Message-Id</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"NNTP-Posting-Date</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">NNTP-Posting-Host</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Organization</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Original-.*</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Path</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Precedence</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Priority</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Received-SPF</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Received</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">References</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Reply-To</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Return-Path</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Return-Receipt-To</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Sender</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Sensitivity</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"Thread-Index</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">Thread-Topic</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"User-Agent</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string">"</span>
                <span class="org-string">"X.*"</span>
                <span class="org-string">"</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">)</span></span><span class="org-string">:"</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">subject of article with `</span><span class="org-constant"><span class="org-comment">Fwd:</span></span><span class="org-comment">' prepended to it, for forwarded messages</span>
  (setq message-make-forward-subject-function
        'message-forward-subject-fwd)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">forwarded messages will just be copied inline to the new message</span>
  (setq message-forward-as-mime nil)
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline49" class="outline-3">
<h3 id="orgheadline49">Commands</h3>
<div class="outline-text-3" id="text-orgheadline49">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 2 (info "(message)Commands")</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 2.4 (info "(message)Insertion")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">name of file containing the signature</span>
  (setq message-signature-file <span class="org-string">"~/Mail/signatures/johndoe"</span>)
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">this file must exist (otherwise, you</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">get misplaced headers when switching</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">between personalities (see</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">`</span><span class="org-constant"><span class="org-comment">gnus-alias</span></span><span class="org-comment">')</span>
</pre></div>
<p>XXX Look at Gnushush to automatically <b>obfuscate email</b>, Message-ID, etc.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 2.11 (info "(message)Spelling")</span>

 (add-hook 'message-setup-hook          <span class="org-comment-delimiter">; </span><span class="org-comment">or message-mode-hook?</span>
           (<span class="org-keyword">lambda</span> ()
             (flyspell-mode 1)))
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline50" class="outline-3">
<h3 id="orgheadline50">Variables</h3>
<div class="outline-text-3" id="text-orgheadline50">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 3 (info "(message)Variables")</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 3.1 (info "(message)Message Headers")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">specify how `</span><span class="org-constant"><span class="org-comment">From</span></span><span class="org-comment">' headers should look</span>
  (setq message-from-style 'angles)

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 3.3 (info "(message)Mail Variables")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">sending mail -- for Gnus (for `</span><span class="org-constant"><span class="org-comment">message</span></span><span class="org-comment">')</span>
  (setq message-send-mail-function 'message-smtpmail-send-it)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">limit on the size of messages sent (10 MB)</span>
  (setq message-send-mail-partially-limit (* 10 1000 1024))

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 3.4 (info "(message)News Headers")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">masquerade domain part of Message-ID</span>
  (setq message-user-fqdn <span class="org-string">"example.com"</span>) <span class="org-comment-delimiter">; </span><span class="org-comment">(system-name)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">tell Gnus not to generate a sender header on outgoing posts</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(default behavior since Gnus 5.10.0)</span>
  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"message"</span>
    (add-to-list 'message-syntax-checks '(sender . disabled)))
</pre></div>
<p>XXX See <a href="http://www.emacswiki.org/emacs/AutoDictionaryMode">http://www.emacswiki.org/emacs/AutoDictionaryMode</a> for inserting a citation line in the correct language.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 3.6 (info "(message)Insertion Variables")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">function for citing an original message</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(stripping off the signature from the original message)</span>
  (setq message-cite-function 'message-cite-original-without-signature)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq message-cite-function 'trivial-cite</span>
  <span class="org-comment-delimiter">;;       </span><span class="org-comment">tc-normal-citemarks "&gt;|:"</span>
  <span class="org-comment-delimiter">;;       </span><span class="org-comment">tc-fill-long-lines nil</span>
  <span class="org-comment-delimiter">;;       </span><span class="org-comment">tc-make-attribution 'tc-fancy-attribution)</span>

  (<span class="org-keyword">defun</span> <span class="org-function-name">message-insert-citation-line</span> ()
    <span class="org-doc">"A replacement of the original `</span><span class="org-constant"><span class="org-doc">message-insert-citation-line</span></span><span class="org-doc">'."</span>
    (<span class="org-keyword">let</span> ((from (replace-regexp-in-string
                 <span class="org-string">"[()]</span><span class="org-regexp-grouping-backslash"><span class="org-string">\\</span></span><span class="org-regexp-grouping-construct"><span class="org-string">|</span></span><span class="org-string"> ?[</span><span class="org-negation-char"><span class="org-string">^</span></span><span class="org-string"> ]*?@[</span><span class="org-negation-char"><span class="org-string">^</span></span><span class="org-string"> ]* ?"</span> <span class="org-string">""</span>
                 (mail-header-from message-reply-headers))))
      (insert from <span class="org-string">" wrote:\n"</span>)))

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 3.7 (info "(message)Various Message Variables")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; directory from which all other mail file variables are derived</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq message-directory "~/Mail/")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">remove the binding of `C-c C-v', used by Org-Babel commands</span>
  (add-hook 'message-mode-hook
            (<span class="org-keyword">lambda</span> ()
              (define-key message-mode-map
                (kbd <span class="org-string">"C-c C-v"</span>) nil)))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">operates on messages you compose</span>
  (<span class="org-keyword">defun</span> <span class="org-function-name">leuven--message-mode-hook</span> ()
    <span class="org-doc">"Enable Org minor modes and auto-fill."</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; prompt for and insert a mail alias</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(local-set-key (kbd "M-a") 'mail-abbrev-insert-alias)</span>

    <span class="org-comment-delimiter">;; </span><span class="org-comment">tab completion for alias in `</span><span class="org-constant"><span class="org-comment">.mailrc</span></span><span class="org-comment">'</span>
    (local-set-key (kbd <span class="org-string">"&lt;M-tab&gt;"</span>) 'mail-abbrev-complete-alias)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">enable automatic word-wrap when composing messages</span>
    (setq-default fill-column 80)
    (auto-fill-mode)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">turn on the Org mode table editor (in emails)</span>
    (turn-on-orgtbl)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">turn on (the enhanced version of) orgstruct-mode</span>
    (turn-on-orgstruct++)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; make `</span><span class="org-constant"><span class="org-comment">orgstruct-hijacker-command-22</span></span><span class="org-comment">' rebind `</span><span class="org-constant"><span class="org-comment">M-q</span></span><span class="org-comment">' to a message</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">;; specific function to fill a paragraph</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq fill-paragraph-function 'org-fill-paragraph)</span>

    (<span class="org-keyword">when</span> (try-require 'org-footnote)
      <span class="org-comment-delimiter">;; </span><span class="org-comment">default style used for footnoting is local to the Message being</span>
      <span class="org-comment-delimiter">;; </span><span class="org-comment">written</span>
      (set (make-local-variable 'org-footnote-auto-label) 'plain)

      <span class="org-comment-delimiter">;; </span><span class="org-comment">no tag marking the beginning of footnote section</span>
      (set (make-local-variable
      'org-footnote-tag-for-non-org-mode-files) nil))

    <span class="org-comment-delimiter">;; </span><span class="org-comment">(when (try-require 'auto-complete)</span>
    <span class="org-comment-delimiter">;;   </span><span class="org-comment">(auto-complete-mode))</span>
    )

  (add-hook 'message-mode-hook 'leuven--message-mode-hook 'append)

  (add-hook 'message-send-hook 'org-footnote-normalize)

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 3.9 (info "(message)Message Buffers")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">kill message buffer after sending a message</span>
  (setq message-kill-buffer-on-exit t)

  (message <span class="org-string">"Message... Done"</span>)
</pre></div>
</div>
</div>
</div>
<div id="outline-container-orgheadline51" class="outline-2">
<h2 id="orgheadline51">Select Methods</h2>
<div class="outline-text-2 org-src-container" id="text-orgheadline51">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">* 6 (info "(gnus)Select Methods")</span>

  (message <span class="org-string">"6 Select Methods..."</span>)
</pre></div>
<div id="outline-container-orgheadline52" class="outline-3">
<h3 id="orgheadline52">Getting News</h3>
<div class="outline-text-3" id="text-orgheadline52">
<p>Newsgroups in which I'm interested:</p>
<ul class="org-ul">
<li><code>nntp+gmane:gmane.emacs.orgmode</code></li>
<li><code>nntp+gmane:gwene.org.org-mode.git</code></li>
<li><code>nntp+gmane:gwene.com.stackoverflow.feeds.tag.org-mode</code></li>
<li><code>nntp+gmane:gwene.com.stackexchange.emacs.feeds.tag.tagnames.org-mode</code></li>
<li><code>nntp+eternal-september:gnu.emacs.help</code></li>
<li><code>nntp+eternal-september:gnu.emacs.bug</code></li>
<li><code>nntp+eternal-september:gnu.emacs.gnus</code></li>
<li><code>nntp+gmane:gmane.os.cygwin</code></li>
<li><code>nntp+gmane:gmane.emacs.ess.general</code></li>
<li><code>nntp+gmane:gmane.comp.finance.ledger.general</code></li>
</ul>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 6.2 (info "(gnus)Getting News")</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 6.2.1 (info "(gnus)NNTP")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">number of seconds to wait before an nntp connection times out</span>
  (setq nntp-connection-timeout 5)      <span class="org-comment-delimiter">; </span><span class="org-comment">30</span>
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline53" class="outline-3">
<h3 id="orgheadline53">Getting Mail</h3>
<div class="outline-text-3" id="text-orgheadline53">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 6.3 (info "(gnus)Getting Mail")</span>

<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 6.3.3 (info "(gnus)Splitting Mail") (in IMAP)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">the registry should be installed</span>
  (setq gnus-registry-install t)        <span class="org-comment-delimiter">; </span><span class="org-comment">for `G G' searches</span>
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">article registry for Gnus</span>
  (<span class="org-keyword">when</span> (try-require 'gnus-registry-<span class="org-leuven-highlight">XXX</span>)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">use long group names (so that Gnus knows where the article is)</span>
    (setq gnus-registry-use-long-group-names t)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">unlimited number of entries in the registry</span>
    (setq gnus-registry-max-entries nil)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">enable the various registry functions</span>
    (gnus-registry-initialize))
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  <span class="org-comment-delimiter">;; </span><span class="org-comment">the first match in `</span><span class="org-constant"><span class="org-comment">nnmail-split-rule</span></span><span class="org-comment">' found will be used</span>
  (setq nnmail-crosspost nil)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">name(s) of IMAP mailboxes to split mail from</span>
  (setq nnimap-inbox '(<span class="org-string">"INBOX"</span>))        <span class="org-comment-delimiter">; </span><span class="org-comment">Gnus v5.13</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq nnimap-split-inbox '("INBOX")) ; Ma Gnus</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">BBDB (Big Brother DataBase) is loaded from my `</span><span class="org-constant"><span class="org-comment">.emacs</span></span><span class="org-comment">' file</span>
  (<span class="org-keyword">when</span> (try-require 'bbdb-gnus)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">split function to use (sorting mails into groups using BBDB)</span>
    (setq nnimap-split-methods 'nnimap-split-fancy)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">for records which don't have `</span><span class="org-constant"><span class="org-comment">gnus-private</span></span><span class="org-comment">' set, the rules in</span>
    <span class="org-comment-delimiter">;; </span><span class="org-comment">split-fancy are invoked</span>
    (setq bbdb/gnus-split-default-group nil)

    <span class="org-comment-delimiter">;; </span><span class="org-comment">specify how to split mail</span>
    (setq nnimap-split-fancy            <span class="org-comment-delimiter">; </span><span class="org-leuven-highlight"><span class="org-comment">XXX</span></span><span class="org-comment"> vs `</span><span class="org-constant"><span class="org-comment">nnmail-split-fancy</span></span><span class="org-comment">'?</span>
          `(|                           <span class="org-comment-delimiter">; </span><span class="org-comment">split to the *first* match</span>

              <span class="org-comment-delimiter">;; </span><span class="org-comment">mailing lists (in To: or Cc:)</span>
              (to <span class="org-string">"foo@bar\\.com"</span> <span class="org-string">"list.foo"</span>)

              <span class="org-comment-delimiter">;; </span><span class="org-comment">invoke BBDB            ; </span><span class="org-leuven-highlight"><span class="org-comment">XXX</span></span><span class="org-comment"> with BBDB v2 and v3?</span>
              (: (<span class="org-keyword">lambda</span> ()
                   (car (bbdb/gnus-split-method))))

              <span class="org-comment-delimiter">;; </span><span class="org-comment">catch spam</span>
              (<span class="org-string">"X-Spam-Status"</span> <span class="org-string">"[Yy]es"</span>
               <span class="org-string">"INBOX.Spam"</span>)

              <span class="org-comment-delimiter">;; </span><span class="org-comment">unmatched mail goes to the catch-all group (default mailbox)</span>
              <span class="org-string">"INBOX"</span>)))
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 6.3.9 (info "(gnus)Expiring Mail")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">How can I purge a message from an IMAP server using Gnus?</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">IMAP calls it "Expunge" of deleted messages, Gnus calls it expiry of</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">expirable (marked 'E') messages..</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">groups in which to perform expiry of all read articles</span>
  (setq gnus-total-expirable-newsgroups <span class="org-string">"\\`nnrss:"</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; disable the expiry process started on leaving a group (for speed</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; reason) before you leave for lunch, `M-x</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; gnus-group-expire-all-groups'</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(remove-hook 'gnus-summary-prepare-exit-hook</span>
  <span class="org-comment-delimiter">;;              </span><span class="org-comment">'gnus-summary-expire-articles)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">make the `d' key mean `</span><span class="org-constant"><span class="org-comment">delete</span></span><span class="org-comment">' in mail groups, too (as in many other</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">modes), instead of `keep this message for archival purposes'</span>
  (define-key gnus-summary-mode-map
    (kbd <span class="org-string">"d"</span>) 'gnus-summary-mark-as-expirable)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Email pre-expiry period according to group</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq nnmail-expiry-wait-function</span>
  <span class="org-comment-delimiter">;;       </span><span class="org-comment">(lambda (group)</span>
  <span class="org-comment-delimiter">;;         </span><span class="org-comment">(cond ((string= group "Gmail")      90)</span>
  <span class="org-comment-delimiter">;;               </span><span class="org-comment">((string= group "moley")      30)</span>
  <span class="org-comment-delimiter">;;               </span><span class="org-comment">((string= group "blackhole") 'immediate)</span>
  <span class="org-comment-delimiter">;;               </span><span class="org-comment">(t                            7))))</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; Each time I quit the summary buffer of 'blackhole', any read mail</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; is immediately expired</span>


  <span class="org-comment-delimiter">;; </span><span class="org-comment">"deletion" versus "expiry"</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; messages should be expired as soon as possible (when the mail</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; group is left)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq nnmail-expiry-wait 'immediate)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">1) Only (*only*) articles that are marked as expirable are apt to be</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">expired. (Yes, *only* those. Yes.)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">2) If you have made a group total-expirable, all read articles are</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">apt to be expired. (Yes, only the read articles. No, not the</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">unread, ticked and dormant articles. Only the read ones.)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Delete, even in IMAP terms, means "I want this message to go</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">away soon."  IMAP has no equivalent to Gnus' expire mark, which means</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">"I want this message to go away after expiry-wait days."</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">When you `B DEL', the message dies immediately, now and forever.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">There is no recovery.</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">This is "delete" as in "delete it from your disk forever and ever,</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">never to return again." Use with caution.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">If you want something to be scheduled for death, then hit `E' to mark</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">a message as expirable. The default expiry interval is one week, at</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">which point it will be deleted automatically, as though you had hit</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">it then with `B DEL'. Then you have 7 days to undelete the messages.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Many mailers have a concept of a "deleted items" folder but Gnus does</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">not have that.  It has expiry instead, so that articles due to</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">disappear will remain where they belong until their expiry interval</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">arrives.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">Deleting a message is normally done via marking as expirable: you hit</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">`E' (not `e') to mark a message as expirable, and whenever expiry is</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">run (normally when you `q'uit a summary buffer), the old E messages</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">are deleted (old == nnmail-expiry-wait days).</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">1. No expiry.  Only articles explicitly marked with 'E' from the</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">summary buffer are expired.  Reading articles marks them 'R'ead.</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">2. Auto-expiry.  Only articles marked expirable are expired, but</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">reading articles marks them 'E'xpirable.</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">3. Total-expiry.  Articles merely marked 'R'ead are expired, along</span>
  <span class="org-comment-delimiter">;;    </span><span class="org-comment">with articles explicitly marked 'E'xpirable.</span>
  <span class="org-comment-delimiter">;;</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">Assuming you read every article, auto- and total-expiry will</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">eventually expire them all at the same times. It's just a question as</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">to whether you'd prefer to mark articles as expirable or read when</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">you read them. I tend to use total-expiry for everything; it has</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">predictable behavior if I'm switching it on and off for a group, and</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">I understand better how it works with scoring.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">delete the article when pressing `</span><span class="org-constant"><span class="org-comment">Delete</span></span><span class="org-comment">'</span>

  <span class="org-comment-delimiter">;; </span><span class="org-leuven-highlight"><span class="org-comment">FIXME</span></span><span class="org-comment"> Does not work... This is the opposite of SPC (page down)!</span>
  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"gnus-sum"</span> <span class="org-comment-delimiter">;; </span><span class="org-comment">be sure to override default</span>
    (gnus-define-keys gnus-summary-mode-map
      [delete] gnus-summary-delete-article))
</pre></div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">*** 6.3.11 (info "(gnus)Duplicates")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">cache of old Message-IDs for every message Gnus sees</span>
  (setq nnmail-message-id-cache-file
        (concat gnus-directory <span class="org-string">".nnmail-cache"</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">to use `</span><span class="org-constant"><span class="org-comment">nnmail-split-fancy-with-parent</span></span><span class="org-comment">'</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">record the Message-ID of every message it sees</span>
  (setq nnmail-treat-duplicates 'warn)  <span class="org-comment-delimiter">; </span><span class="org-comment">or `</span><span class="org-constant"><span class="org-comment">delete</span></span><span class="org-comment">'</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">ensure that the Message-ID are still in the cache</span>
  (setq nnmail-message-id-cache-length 5000)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">record the Message-ID of moved articles</span>
  (setq nnmail-cache-accepted-message-ids t)
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline54" class="outline-3">
<h3 id="orgheadline54">Browsing the Web</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline54">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 6.4 (info "(gnus)Browsing the Web")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">use `</span><span class="org-constant"><span class="org-comment">wget</span></span><span class="org-comment">' instead of `</span><span class="org-constant"><span class="org-comment">url.el</span></span><span class="org-comment">' (for nnweb-type google), cause it</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">seems to be more reliable (about how the HTML is fetched)</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">use external grab program (to fetch the RSS feed, etc.)</span>
  (setq mm-url-use-external t)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">URL grab program</span>
  <span class="org-comment-delimiter">;; </span><span class="org-leuven-highlight"><span class="org-comment">TODO</span></span><span class="org-comment"> Protect in case wget is not installed</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq mm-url-program "wget") ; make sure you don't use the symbol 'wget</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">FYI, wget is run when a link from Org is not found, for example</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">because the mail has been moved from one group to another.</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">arguments for `</span><span class="org-constant"><span class="org-comment">mm-url-program</span></span><span class="org-comment">'</span>
  (setq mm-url-arguments '(<span class="org-string">"-q"</span> <span class="org-string">"-O"</span> <span class="org-string">"-"</span>))

  <span class="org-comment-delimiter">;; </span><span class="org-comment">how to find the parent article</span>
  (<span class="org-keyword">when</span> (try-require 'nnweb-<span class="org-leuven-highlight">XXX</span>)        <span class="org-comment-delimiter">; </span><span class="org-comment">not sure it really works!?</span>
    (setq gnus-refer-article-method
          '(
            <span class="org-comment-delimiter">;; </span><span class="org-comment">first try the current method</span>
            current

            <span class="org-comment-delimiter">;; </span><span class="org-comment">find the Message-ID based on the registry, so that you can</span>
            <span class="org-comment-delimiter">;; </span><span class="org-comment">safely move articles around</span>
            <span class="org-comment-delimiter">;; </span><span class="org-comment">(nnregistry)</span>

            (nnweb <span class="org-string">"gmane"</span> (nnweb-type gmane))

            <span class="org-comment-delimiter">;; </span><span class="org-comment">then ask Google</span>
            (nnweb <span class="org-string">"google"</span> (nnweb-type google))

            <span class="org-comment-delimiter">;; </span><span class="org-comment">and finally ask `</span><span class="org-constant"><span class="org-comment">news.gmane.org</span></span><span class="org-comment">' if that fails</span>
            (nntp <span class="org-string">"news.gmane.org"</span>)
            )))
</pre></div>
</div>
<div id="outline-container-orgheadline55" class="outline-3">
<h3 id="orgheadline55">IMAP</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline55">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 6.5 (info "(gnus)IMAP")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">log commands (imap session trace) to the `*imap log*' buffer</span>
  (setq nnimap-record-commands t)
</pre></div>
</div>
<div id="outline-container-orgheadline56" class="outline-3">
<h3 id="orgheadline56">Gnus Unplugged</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline56">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 6.8 (info "(gnus)Gnus Unplugged")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">disable the Gnus agent (used for "offline" reading)</span>
  (setq gnus-agent nil)                 <span class="org-comment-delimiter">; </span><span class="org-comment">prevent being unable to delete some</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">mails from your inbox</span>

  (message <span class="org-string">"6 Select Methods... Done"</span>)
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline57" class="outline-2">
<h2 id="orgheadline57">Scoring</h2>
<div class="outline-text-2" id="text-orgheadline57">
<p>You can <i>increase</i> or <i>lower</i> the score, respectively, in the global file (instead of the score file local for the group) by pressing <code>M-i a I</code> or <code>M-i a L</code>.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">* 7 (info "(gnus)Scoring")</span>

  (message <span class="org-string">"7 Scoring..."</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; directory where kill and score files will be stored</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(setq gnus-kill-files-directory "~/")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; increase score of messages that are replies to my own postings</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">;; </span><span class="org-leuven-highlight"><span class="org-comment">TODO</span></span><span class="org-comment"> only for newsgroups (and not for mails)!</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(add-hook 'message-sent-hook 'gnus-score-followup-article)</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">(add-hook 'message-sent-hook 'gnus-score-followup-thread)</span>

  (message <span class="org-string">"7 Scoring... Done"</span>)
</pre></div>
</div>
<div id="outline-container-orgheadline58" class="outline-3">
<h3 id="orgheadline58">From Sacha Chua</h3>
<div class="outline-text-3" id="text-orgheadline58">
<p>Adaptive scoring means that if you kill a thread you're not particularly interested in, it lowers the score on that one, so any replies are shown with a negative score. You can also configure it to hide messages with scores below a certain threshold, so you don't even see replies.</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (setq gnus-use-adaptive-scoring t)

  (setq gnus-default-adaptive-score-alist
        '((gnus-unread-mark)
          (gnus-ticked-mark (subject 10))
          (gnus-killed-mark (subject -5))
          (gnus-catchup-mark (subject -1))))
</pre></div>
<p>I also have some more rules that score things up if they mention my name or other things I'm interested in.</p>
<p>Maybe a score file with this in it?</p>
<pre class="example">
(("Body" ("sacha" 10 nil s)))
</pre>
<p>which theoretically adds a score based on that keyword, but I haven't tested it and it slows loading groups down a bit.</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline59" class="outline-2">
<h2 id="orgheadline59">Searching</h2>
<div class="outline-text-2" id="text-orgheadline59">
<p>Basically, there's only one user-frontend function: <code>gnus-group-make-nnir-group</code> bound to <code>G G</code> in <code>*Group*</code>.</p>
<p>It comes with Gnus. You don't even need to configure anything for searching <b>IMAP</b> and <b>Gmane</b> groups.</p>
</div>
</div>
<div id="outline-container-orgheadline60" class="outline-2">
<h2 id="orgheadline60">Various</h2>
<div class="outline-text-2 org-src-container" id="text-orgheadline60">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">* 9 (info "(gnus)Various")</span>

  (message <span class="org-string">"9 Various..."</span>)
</pre></div>
<div id="outline-container-orgheadline61" class="outline-3">
<h3 id="orgheadline61">Interactive</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline61">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 9.2 (info "(gnus)Interactive")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">don't display verbose messages and don't require confirmations</span>
  (setq gnus-novice-user nil)
</pre></div>
</div>
<div id="outline-container-orgheadline62" class="outline-3">
<h3 id="orgheadline62">Formatting Variables</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline62">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 9.4 (info "(gnus)Formatting Variables")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">assume that fixed width fonts have characters of the same width</span>
  (setq gnus-use-correct-string-widths nil)
</pre></div>
</div>
<div id="outline-container-orgheadline63" class="outline-3">
<h3 id="orgheadline63">Window Layout</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline63">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 9.5 (info "(gnus)Window Layout")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">add a window configuration to `</span><span class="org-constant"><span class="org-comment">gnus-buffer-configuration</span></span><span class="org-comment">'</span>
  (<span class="org-keyword">if</span> (&gt; (frame-width) 160)
      (gnus-add-configuration
       '(article
         (horizontal 1.0
                     (summary 0.50 point)
                     <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-constant"><span class="org-comment">point</span></span><span class="org-comment">' positions the cursor properly</span>
                     (article 1.0))))
    (gnus-add-configuration
     '(article
       (vertical 1.0
                 (summary 0.40 point)
                 (article 1.0)))))
</pre></div>
</div>
<div id="outline-container-orgheadline64" class="outline-3">
<h3 id="orgheadline64">Interaction with other modes</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline64">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 9.20 Interaction with (info "(gnus)Other modes")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">attach all marked files from Dired to a new Gnus message</span>
  (autoload 'gnus-dired-mode <span class="org-string">"gnus-dired"</span>
    <span class="org-doc">"Attach dired's marked files to a gnus message composition."</span> t)

  (autoload 'gnus-dired-attach <span class="org-string">"gnus-dired"</span>
    <span class="org-doc">"Attach dired's marked files to a gnus message composition."</span> t)

  (<span class="org-keyword">with-eval-after-load</span> <span class="org-string">"dired"</span>

    (add-hook 'dired-mode-hook 'gnus-dired-mode)

    (define-key dired-mode-map
      (kbd <span class="org-string">"a"</span>) 'gnus-dired-attach))    <span class="org-comment-delimiter">; </span><span class="org-leuven-highlight"><span class="org-comment">XXX</span></span><span class="org-comment"> conflict with</span>
                                        <span class="org-comment-delimiter">; </span><span class="org-comment">`</span><span class="org-constant"><span class="org-comment">dired-find-alternate-file</span></span><span class="org-comment">'</span>
</pre></div>
</div>
<div id="outline-container-orgheadline65" class="outline-3">
<h3 id="orgheadline65">Various Various</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline65">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 9.21 (info "(gnus)Various Various")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">display more messages from Gnus</span>
  (setq gnus-verbose 10)                <span class="org-comment-delimiter">; </span><span class="org-comment">9 = minimum for helpful debugging</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">display more messages from the Gnus back-ends</span>
  (setq gnus-verbose-backends 10)

  (message <span class="org-string">"9 Various... Done"</span>)
</pre></div>
</div>
</div>
<div id="outline-container-orgheadline66" class="outline-2">
<h2 id="orgheadline66">Appendices</h2>
<div class="outline-text-2 org-src-container" id="text-orgheadline66">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">* 11 (info "(gnus)Appendices")</span>

  (message <span class="org-string">"11 Appendices..."</span>)
</pre></div>
<div id="outline-container-orgheadline67" class="outline-3">
<h3 id="orgheadline67">History</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline67">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 11.2 (info "(gnus)History")</span>

  (setq canlock-password <span class="org-string">"secret"</span>)
  (setq canlock-password-for-verify <span class="org-string">"secret"</span>)
</pre></div>
</div>
<div id="outline-container-orgheadline68" class="outline-3">
<h3 id="orgheadline68">Frequently Asked Questions</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline68">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;;</span><span class="org-comment">** 11.9 (info "(gnus)Frequently Asked Questions")</span>

  <span class="org-comment-delimiter">;; </span><span class="org-comment">byte-compile the user-defined format specs (things like</span>
  <span class="org-comment-delimiter">;; </span><span class="org-comment">`</span><span class="org-constant"><span class="org-comment">gnus-summary-line-format</span></span><span class="org-comment">')</span>
  (<span class="org-keyword">when</span> (fboundp 'gnus-compile)
    (gnus-compile)) <span class="org-comment-delimiter">;;  </span><span class="org-comment">at the bottom</span>

  (message <span class="org-string">"11 Appendices... Done"</span>)

  <span class="org-comment-delimiter">;; </span><span class="org-comment">warn that some packages were missing</span>
  (<span class="org-keyword">dolist</span> (pkg leuven--missing-packages)
    (message <span class="org-string">"(warning) Package `</span><span class="org-constant"><span class="org-string">%s</span></span><span class="org-string">' not found"</span> pkg))

  (message <span class="org-string">"\n"</span>)
</pre></div>
</div>
<div id="outline-container-orgheadline69" class="outline-3">
<h3 id="orgheadline69">Feature</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline69">
<pre class="src src-emacs-lisp">
(<span class="org-keyword">provide</span> '<span class="org-constant">gnus-leuven</span>)
</pre></div>
</div>
<div id="outline-container-orgheadline70" class="outline-3">
<h3 id="orgheadline70">File Local Variables</h3>
<div class="outline-text-3 org-src-container" id="text-orgheadline70">
<pre class="src src-emacs-lisp">
<span class="org-comment-delimiter">;; </span><span class="org-comment">This is for the sake of Emacs.</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">Local Variables:</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">coding: utf-8-unix</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">eval: (when (require 'rainbow-mode nil t) (rainbow-mode))</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">flycheck-emacs-lisp-initialize-packages: t</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">flycheck-mode: nil</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">ispell-local-dictionary: "american"</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">End:</span>

<span class="org-comment-delimiter">;;; </span><span class="org-comment">gnus-leuven.el ends here</span>
</pre></div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Fabrice Niessen</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
